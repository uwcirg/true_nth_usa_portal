{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./static/js/src/modules/SYSTEM_IDENTIFIER_ENUM.js","webpack:///./static/js/src/modules/Utility.js","webpack:///./static/js/src/coredata.js","webpack:///./static/js/src/modules/TnthDate.js","webpack:///./static/js/src/modules/CLINICAL_CODE_ENUM.js","webpack:///./static/js/src/modules/TnthAjax.js","webpack:///./static/js/src/modules/Procedures.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","external_study_id","external_site_id","practice_region","race","race_system","ethnicity","ethnicity_system","indigenous","timezone","language","language_system","shortname","SNOMED_SYS_URL","CLINICAL_SYS_URL","CANCER_TREATMENT_CODE","NONE_TREATMENT_CODE","getExportFileName","getUrlParameter","UtilityObj","Utility","this","requestAttempts","hasValue","val","String","showMain","$","css","visibility","-ms-filter","filter","-moz-opacity","-khtml-opacity","opacity","hideLoader","delay","time","hide","setTimeout","fadeOut","loader","show","document","getElementById","isDelayLoading","self","DELAY_LOADING","isTouchDevice","window","DocumentTouch","getIEVersion","match","navigator","userAgent","parseInt","newHttpRequest","url","params","callBack","xmlhttp","param","XDomainRequest","onload","responseText","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","status","error","open","setRequestHeader","cache","send","ajaxRequest","callback","i18next","defaults","type","contentType","timeout","extend","uself","ajax","done","data","fail","always","initWorker","callbackFunc","worker","Worker","postMessage","addEventListener","e","terminate","console","log","lineno","filename","message","workerAllowed","getRequestMethod","sendRequest","useWorker","LRKeyEvent","length","on","keyCode","toggleClass","getLoaderHTML","concat","convertToNumericField","field","each","prop","isString","obj","toString","disableHeaderFooterLinks","links","not","addClass","off","preventDefault","pad","isNaN","escapeHtml","text","replace","a","\"","&","'","/","<",">","containHtmlTags","test","prefix","Date","getDate","slice","getMonth","getFullYear","capitalize","str","txt","charAt","toUpperCase","substr","toLowerCase","restoreVis","loadingElement","mainElement","setAttribute","VueErrorHandling","Vue","config","errorHandler","err","vm","info","handler","current","$options","$parent","extension","results","RegExp","exec","location","search","decodeURIComponent","resetBrowserBackHistory","locationUrl","stateObject","title","historyDefined","history","pushState","href","forward","handlePostLogout","sessionStorage","getItem","orgin","removeItem","displaySystemOutageMessage","locale","MAINTENANCE_MESSAGE","MAINTENANCE_WINDOW","messageElement","querySelector","createElement","classList","add","appendChild","innerHTML","d1","d2","startDate","endDate","hoursTil","Math","floor","getTime","options","year","month","day","hour","minute","second","hour12","timeZoneName","displayStartDate","toLocaleString","displayEndDate","join","CoreDataObj","_modules_TnthAjax_js__WEBPACK_IMPORTED_MODULE_0__","_modules_SYSTEM_IDENTIFIER_ENUM_js__WEBPACK_IMPORTED_MODULE_1__","_modules_Procedures_js__WEBPACK_IMPORTED_MODULE_2__","subjectId","init","setSubjectId","getDemoData","initFieldEvents","setFooter","success","tnthAjax","getCurrentUser","setError","id","demoFieldsEnabled","getRaceFields","getEthnicityFields","getEthnicityData","ethnicityFields","ethnicityIDs","map","code","system","SYSTEM_IDENTIFIER_ENUM","valueCodeableConcept","coding","getRaceData","raceFields","raceIDs","setDemoData","raceData","ethnicityData","demoArray","resourceType","push","putDemo","getDemo","initDemoFieldEvents","initContinueButtonEvent","event","attr","getReturnAddress","reportError","getAPIUrl","html","setting","GIL","getPortalFooter","ready","Procedure","initViaTemplate","validateDateInputFields","tnthDates","monthField","dayField","yearField","errorFieldId","y","validity","valid","errorField","today","date","setHours","swap_mm_dd","currentDate","splitDate","split","convertMonthNumeric","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","convertMonthString","1","2","3","4","5","6","7","8","9","10","11","12","isDate","displayDateString","getDateDiff","dateToCalc","dateTime","isValidDefaultDateFormat","dArray","trim","dt","isDateObj","isValidDate","errorMsg","getDateObj","convertedDate","getConvertedDate","givenDate","getGivenDate","h","mi","dateObj","formatDateString","dateString","format","hours","minutes","seconds","nd","iosDateTest","getHours","getMinutes","getSeconds","convertToLocalTime","newDate","getTimezoneOffset","offset","getDateWithTimeZone","dObj","utcDate","getTodayDateObj","td","tm","ty","th","tmi","ts","gmtToday","displayDay","displayMonth","displayYear","displayHour","displayMinute","displaySecond","gmtDate","dateValidator","restrictToPresent","errorMessage","iy","im","iid","CLINICAL_CODE_ENUM","biopsy","display","pca_diag","pca_localized","beforeSend","ajaxSetup","xhr","settings","crossDomain","method","userId","defaultParams","attempts","max_attempts","dataType","sync","async","fieldHelper","FieldLoaderHelper","targetField","showLoader","result","JSON","parse","sendError","showError","showUpdate","headers","cache-control","expires","pragma","stringify","arguments","undefined","page_url","subject_id","delayDuration","el","__timeout","containerId","successField","loadingField","removeClass","animate","currentUser","setItem","getStillNeededCoreData","entry_method","__url","getRequiredCoreData","required","getOptionalCoreData","sessionStorageKey","getOrgs","demoOrgsData","getConsent","setConsent","hasConsent","org","testPatient","user_id","organization_id","agreement_url","agreementUrl","staff_editable","include_in_reports","send_reminders","acceptance_date","deleteConsent","consented","getAllValidConsent","arrExcludedOrgIds","exclude","arrConsents","grep","orgId","eOrg","forEach","withdrawConsent","arrConsent","consent_agreements","item","expired","deleted","consentedOrgIds","filterStatus","demoDataKey","clearDemoSessionData","toSend","getLocale","communication","hasTreatment","entry","sortedArray","sort","b","resource","meta","lastUpdated","found","resourceItemCode","procId","getTreatment","postTreatment","started","treatmentDate","deleteTreatment","procID","procArray","subject","reference","performedDateTime","postProc","treatmentData","deleteProc","getProc","newEntry","procedureId","getRoleList","getRoles","removeCachedRoles","putRoles","deleteRoles","getClinical","getObservationId","obId","_code","content","postClinical","toCall","obsCode","obsArray","issued","issuedDate","valueQuantity","units","performer","obsId","getTermsUrl","getInstrumentsList","qList","organization","orgID","questionnaires","q","inArray","questionnaire","getTerms","postTermsByUser","postTerms","accessUrl","access_url","invite","passwordReset","assessmentStatus","updateAssessment","assessmentList","assessmentReport","instrumentId","getCurrentQB","completionDate","as_of_date","patientReport","setTablePreference","tableName","getTablePreference","emailLog","auditLog","deactivateUser","reactivateUser","getConfigurationByKey","configVar","sessionConfigKey","getConfiguration","getEmailReady","_TnthAjax_js__WEBPACK_IMPORTED_MODULE_0__","_TnthDate_js__WEBPACK_IMPORTED_MODULE_1__","_Utility_js__WEBPACK_IMPORTED_MODULE_2__","_SYSTEM_IDENTIFIER_ENUM_js__WEBPACK_IMPORTED_MODULE_3__","currentUserId","dateFields","entries","initCounts","initUserIds","getOptions","getUserProcedures","initFieldExtension","profileSubject","setCurrentUserId","setTreatmentOptionsSelector","optionsList","append","treatmentOptions","treatment_options","getCreatorDisplay","creator","defaultDisplay","getDeleteInvocationDisplay","setNewEntry","highestId","find","setProcedureRowsView","hasClass","setNoDataDisplay","onDidGetProcedures","eventInput","data-name","data-system","checkSubmit","fn","setDate","closest","remove","initPopoverEvents","popover","trigger","placement","parents","prev","populateProcedureRows","contentHTML","proceduresHtml","otherHtml","indexOf","creatorRef","by","dateEdited","creationText","toLocaleDateString","deleteInvocation","max","fadeIn","handleOtherProcedures","otherProcElements","setAccountCreationRowDisplay","arrProcAttrs","stopImmediatePropagation","isAccountCreation","selectVal","selectDate","selectSystem","selectFriendly","reset","data-date","data-date-read","btnId","removeAttr","isTouchScreen","checkDate","df","mf","yf","deField","passedDate"],"mappings":"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","file":"coredata.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","export default {\n    \"external_study_id\": \"http://us.truenth.org/identity-codes/external-study-id\",\n    \"external_site_id\": \"http://us.truenth.org/identity-codes/external-site-id\",\n    \"practice_region\": \"http://us.truenth.org/identity-codes/practice-region\",\n    \"race\": \"http://hl7.org/fhir/StructureDefinition/us-core-race\",\n    \"race_system\": \"http://hl7.org/fhir/v3/Race\",\n    \"ethnicity\": \"http://hl7.org/fhir/StructureDefinition/us-core-ethnicity\",\n    \"ethnicity_system\": \"http://hl7.org/fhir/v3/Ethnicity\",\n    \"indigenous\": \"http://us.truenth.org/fhir/StructureDefinition/AU-NHHD-METeOR-id-291036\",\n    \"timezone\": \"http://hl7.org/fhir/StructureDefinition/user-timezone\",\n    \"language\": \"http://hl7.org/fhir/valueset/languages\",\n    \"language_system\": \"urn:ietf:bcp:47\",\n    \"shortname\": \"http://us.truenth.org/identity-codes/shortname\",\n    SNOMED_SYS_URL: \"http://snomed.info/sct\",\n    CLINICAL_SYS_URL: \"http://us.truenth.org/clinical-codes\",\n    CANCER_TREATMENT_CODE: \"118877007\",\n    NONE_TREATMENT_CODE: \"999\"\n};\n\n","var Utility = (function() {\n    var UtilityObj = function() { /*global $ */\n        this.requestAttempts = 0;\n    };\n    UtilityObj.prototype.hasValue = function(val) {\n        return String(val) !== \"null\" && String(val) !== \"\" && String(val) !== \"undefined\";\n    };\n    UtilityObj.prototype.showMain = function() {\n        $(\"#mainHolder\").css({\n            \"visibility\": \"visible\",\n            \"-ms-filter\": \"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\",\n            \"filter\": \"alpha(opacity=100)\",\n            \"-moz-opacity\": 1,\n            \"-khtml-opacity\": 1,\n            \"opacity\": 1\n        });\n    };\n    UtilityObj.prototype.hideLoader = function(delay, time) {\n        if (delay) {\n            $(\"#loadingIndicator\").hide();\n            return;\n        }\n        setTimeout(function() {\n            $(\"#loadingIndicator\").fadeOut();\n        }, time || 200);\n    };\n    UtilityObj.prototype.loader = function(show) {\n        //landing page\n        if (document.getElementById(\"fullSizeContainer\")) {\n            this.hideLoader();\n            this.showMain();\n            return false;\n        }\n        if (show) {\n            $(\"#loadingIndicator\").show();\n            return;\n        }\n        if (!this.isDelayLoading()) {\n            var self = this;\n            setTimeout(function() {\n                self.showMain();\n            }, 100);\n            this.hideLoader(true, 350);\n        }\n    };\n    UtilityObj.prototype.isDelayLoading = function() { /*global DELAY_LOADING*/\n        return (typeof DELAY_LOADING !== \"undefined\") && DELAY_LOADING;\n    };\n    UtilityObj.prototype.isTouchDevice = function() {\n        return true === (\"ontouchstart\" in window || window.DocumentTouch && document instanceof window.DocumentTouch);\n    };\n    UtilityObj.prototype.getIEVersion = function() {\n        var match = navigator.userAgent.match(/(?:MSIE |Trident\\/.*; rv:)(\\d+)/);\n        return match ? parseInt(match[1]) : false;\n    };\n    UtilityObj.prototype.newHttpRequest = function(url, params, callBack) { /* note: this function supports older version of IE (version <= 9) - jquery ajax calls errored in older IE version*/\n        this.requestAttempts++;\n        var xmlhttp, self = this;\n        callBack = callBack || function() {};\n        if (window.XDomainRequest) { /*global XDomainRequest */\n            xmlhttp = new XDomainRequest();\n            xmlhttp.onload = function() {\n                callBack(xmlhttp.responseText);\n            };\n        } else if (window.XMLHttpRequest) {\n            xmlhttp = new XMLHttpRequest();\n        } else {\n            xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\"); /*global ActiveXObject */\n        }\n        xmlhttp.onreadystatechange = function() {\n            if (xmlhttp.readyState === 4) {\n                if (xmlhttp.status === 200) {\n                    callBack(xmlhttp.responseText);\n                    self.requestAttempts = 0;\n                    return;\n                }\n                if (self.requestAttempts < 3) {\n                    setTimeout(function() {\n                        self.newHttpRequest(url, params, callBack);\n                    }, 3000);\n                } else {\n                    callBack({error: xmlhttp.responseText});\n                    self.loader();\n                    self.requestAttempts = 0;\n                }\n            }\n        };\n        params = params || {};\n        xmlhttp.open(\"GET\", url, true);\n        for (var param in params) {\n            if (params.hasOwnProperty(param)) {\n                xmlhttp.setRequestHeader(param, params[param]);\n            }\n        }\n        if (!params.cache) {\n            xmlhttp.setRequestHeader(\"cache-control\", \"no-cache\");\n            xmlhttp.setRequestHeader(\"expires\", \"-1\");\n            xmlhttp.setRequestHeader(\"pragma\", \"no-cache\"); //legacy HTTP 1.0 servers and IE support\n        }\n        xmlhttp.send();\n    };\n    UtilityObj.prototype.ajaxRequest = function(url, params, callback) {\n        callback = callback || function() {};\n        if (!url) {\n            callback({error: i18next.t(\"Url is required.\")});\n            return false;\n        }\n        var defaults = {\n            url: url,\n            type: \"GET\",\n            contentType: \"text/plain\",\n            timeout: 5000,\n            cache: false\n        };\n        params = params || defaults;\n        params = $.extend({}, defaults, params);\n        this.requestAttempts++;\n        var uself = this;\n        $.ajax(params).done(function(data) {\n            callback(data);\n            uself.requestAttempts = 0;\n        }).fail(function() {\n            if (uself.requestAttempts <= 3) {\n                setTimeout(function() { uself.ajaxRequest(url, params, callback);}, 3000);\n            } else {\n                callback({error: i18next.t(\"Error occurred processing request\")}); /*global i18next */\n                uself.requestAttempts = 0;\n                uself.loader();\n            }\n        }).always(function() {\n            uself.loader();\n        });\n    };\n    UtilityObj.prototype.initWorker = function(url, params, callbackFunc) {\n        var worker = new Worker(\"/static/js/ajaxWorker.js\");\n        var self = this;\n        worker.postMessage({url: url, params: params});\n        worker.addEventListener(\"message\", function(e) {\n            (callbackFunc).call(self, e.data);\n            worker.terminate();\n        }, false);\n        worker.addEventListener(\"error\", function(e) {\n            console.log(\"Worker runtime error: Line \", e.lineno, \" in \", e.filename, \": \", e.message);\n            worker.terminate();\n        }, false);\n    };\n    UtilityObj.prototype.workerAllowed = function() {\n        return window.Worker && !this.isTouchDevice();\n    };\n    UtilityObj.prototype.getRequestMethod = function() {\n        return this.getIEVersion() ? this.newHttpRequest: this.ajaxRequest; //NOTE JQuery ajax request does not work for IE <= 9\n    };\n    UtilityObj.prototype.sendRequest = function(url, params, callback) { /*generic function for sending GET ajax request, make use of worker if possible */\n        params = params || {};\n        if (params.useWorker && this.workerAllowed()) {\n            this.initWorker(url, params, callback);\n            return true;\n        }\n        var useFunc = this.getRequestMethod();\n        (useFunc).call(this, url, params, function(data) { (callback).call(this, data);});\n    };\n    UtilityObj.prototype.LRKeyEvent = function() {\n        var LR_INVOKE_KEYCODE = 187;\n        if ($(\".button--LR\").length > 0) {\n            $(\"html\").on(\"keydown\", function(e) {\n                if (parseInt(e.keyCode) === parseInt(LR_INVOKE_KEYCODE)) {\n                    $(\".button--LR\").toggleClass(\"data-show\");\n                }\n            });\n        }\n    };\n    UtilityObj.prototype.getLoaderHTML = function(message) {\n        return `<div class=\"loading-message-indicator\"><i class=\"fa fa-spinner fa-spin fa-2x\"></i>${message ? \"&nbsp;\" + message : \"\"}</div>`;\n    };\n    UtilityObj.prototype.convertToNumericField = function(field) {\n        if (!field) {\n            return;\n        }\n        if (this.isTouchDevice()) {\n            field.each(function() {\n                $(this).prop(\"type\", \"tel\");\n            });\n        }\n    };\n    UtilityObj.prototype.isString = function(obj) {\n        return (Object.prototype.toString.call(obj) === \"[object String]\");\n    };\n    UtilityObj.prototype.disableHeaderFooterLinks = function() {\n        var links = $(\"#tnthNavWrapper a, #homeFooter a\").not(\"a[href*='logout']\").not(\"a.required-link\").not(\"a.home-link\");\n        links.addClass(\"disabled\");\n        links.prop(\"onclick\", null).off(\"click\");\n        links.on(\"click\", function(e) {\n            e.preventDefault();\n            return false;\n        });\n    };\n    UtilityObj.prototype.pad = function(n) {\n        n = parseInt(n);\n        return (!isNaN(n) && n < 10) ? \"0\" + n : n;\n    };\n    UtilityObj.prototype.escapeHtml = function(text) {\n        \"use strict\";\n        if (text === null || text !== \"undefined\" || String(text).length === 0) {\n            return text;\n        }\n        return text.replace(/[\\\"&'\\/<>]/g, function(a) {\n            return {\n                '\"': \"&quot;\",\n                \"&\": \"&amp;\",\n                \"'\": \"&#39;\",\n                \"/\": \"&#47;\",\n                \"<\": \"&lt;\",\n                \">\": \"&gt;\"\n            }[a];\n        });\n    };\n    UtilityObj.prototype.containHtmlTags = function(text) {\n        if (!text) {\n            return false;\n        }\n        return /[<>]/.test(text);\n    };\n    UtilityObj.prototype.getExportFileName = function(prefix) {\n        var d = new Date();\n        return (prefix ? prefix : \"ExportList_\") + (\"00\" + d.getDate()).slice(-2) + (\"00\" + (d.getMonth() + 1)).slice(-2) + d.getFullYear();\n    };\n    UtilityObj.prototype.capitalize = function(str) {\n        return str.replace(/\\w\\S*/g, function(txt) {\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n        });\n    };\n    UtilityObj.prototype.restoreVis = function() {\n        var loadingElement = document.getElementById(\"loadingIndicator\"), mainElement = document.getElementById(\"mainHolder\");\n        if (loadingElement) { loadingElement.setAttribute(\"style\", \"display:none; visibility:hidden;\"); }\n        if (mainElement) { mainElement.setAttribute(\"style\", \"visibility:visible;-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=100)';filter:alpha(opacity=100); -moz-opacity:1; -khtml-opacity:1; opacity:1\"); }\n    };\n    UtilityObj.prototype.VueErrorHandling = function() {\n        if (typeof Vue === \"undefined\") { return false; } /*global Vue */\n        var self = this;\n        Vue.config.errorHandler = function (err, vm, info)  {\n            var handler, current = vm;\n            if (vm.$options.errorHandler) {\n                handler = vm.$options.errorHandler;\n            } else {\n                while (!handler && current.$parent) {\n                    current = current.$parent;\n                    handler = current.$options.errorHandler;\n                }\n            }\n            self.restoreVis();\n            if (handler) {\n                handler.call(current, err, vm, info);\n                return;\n            }\n            console.log(err);\n        };\n    };\n    UtilityObj.prototype.extend = function(obj, extension) { // Extend an object with an extension\n        for (var key in extension) {\n            if (extension.hasOwnProperty(key)) {\n                obj[key] = extension[key];\n            }\n        }\n        return obj;\n    };\n    UtilityObj.prototype.getUrlParameter = function(name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        var results = regex.exec(location.search);\n        return results === null ? \"\" : decodeURIComponent(results[1]);\n    };\n    UtilityObj.prototype.resetBrowserBackHistory = function(locationUrl, stateObject, title) {\n        var historyDefined = typeof history !== \"undefined\" && history.pushState;\n        locationUrl = locationUrl || location.href;\n        if (historyDefined) {\n            history.pushState(stateObject, title, locationUrl);\n        }\n        window.addEventListener(\"popstate\", function() {\n            if (historyDefined) {\n                history.pushState(stateObject, title, locationUrl);\n            } else {\n                window.history.forward(1);\n            }\n        });\n    };\n    UtilityObj.prototype.handlePostLogout = function() {\n        if (typeof sessionStorage === \"undefined\") {\n            return false;\n        }\n        if (sessionStorage.getItem(\"logout\")) {\n            this.resetBrowserBackHistory(location.orgin, \"logout\"); /* global resetBrowserBackHistory */\n            sessionStorage.removeItem(\"logout\");\n        }\n    };\n    UtilityObj.prototype.displaySystemOutageMessage = function(locale) {\n        locale = locale || \"en-us\";\n        locale = locale.replace(\"_\", \"-\");\n        var systemMaintenanceElId = \"systemMaintenanceContainer\";\n        if (!document.getElementById(systemMaintenanceElId)) { //check for system outage maintenance message element\n            return;\n        }\n        var self = this;\n        this.ajaxRequest(\"api/settings\", {contentType: \"application/json; charset=utf-8\"}, function(data) {\n            if (!data || !(data.MAINTENANCE_MESSAGE || data.MAINTENANCE_WINDOW)) {\n                return false;\n            }\n            var messageElement = document.querySelector(\".message-container\");\n            if (!messageElement) {\n                messageElement = document.createElement(\"div\");\n                messageElement.classList.add(\"message-container\");\n                document.getElementById(systemMaintenanceElId).appendChild(messageElement);\n            }\n            if (data.MAINTENANCE_MESSAGE) {\n                messageElement.innerHTML = self.escapeHtml(data.MAINTENANCE_MESSAGE);\n                return;\n            }\n            if (!data.MAINTENANCE_WINDOW || !data.MAINTENANCE_WINDOW.length) {\n                return;\n            }\n            //use maintenance window specified in config to compose the message, assuming in following example format: [\"2018-11-02T12:00:00Z\", \"2018-11-02T18:00:00Z\"], dates in system ISO format\n            var hoursDiff = function(d1, d2) {\n                if (!d1 || !d2) {\n                    return 0;\n                }\n                return Math.floor(((d2.getTime() - d1.getTime())/ (1000 * 60 * 60)) % 24);\n            };\n            //date object automatically convert iso date/time to local date/time as it assumes a timezone of UTC if date in ISO format\n            var startDate = new Date(data.MAINTENANCE_WINDOW[0]), endDate = new Date(data.MAINTENANCE_WINDOW[1]);\n            var hoursTil = hoursDiff(new Date(), startDate);\n            if (hoursTil < 0 || isNaN(hoursTil)) { //maintenance window has passed\n                document.getElementById(systemMaintenanceElId).classList.add(\"tnth-hide\");\n                return;\n            }\n            /*global i18next */\n            //construct message based on maintenance window\n            try {\n                var options = {year: \"numeric\", month: \"long\", day: \"numeric\", hour: \"numeric\", minute: \"numeric\", second: \"numeric\", hour12: true, timeZoneName: \"short\"};\n                var displayStartDate = startDate.toLocaleString(locale,options).replace(/[,]/g, \" \"); //display language-sensitive representation of date/time\n                var displayEndDate = endDate.toLocaleString(locale, options).replace(/[,]/g, \" \");\n                var message = [\"<div>\" + i18next.t(\"Hi there.\") + \"</div>\",\n                    \"<div>\" + i18next.t(\"TrueNTH will be down for website maintenance starting <b>{startdate}</b>. This should last until <b>{enddate}</b>.\".replace(\"{startdate}\", displayStartDate).replace(\"{enddate}\", displayEndDate)) + \"</div>\",\n                    \"<div>\" + i18next.t(\"Thanks for your patience while we upgrade our site.\") + \"</div>\"].join(\"\");\n                messageElement.innerHTML = self.escapeHtml(message);\n            } catch(e) {\n                console.log(\"Error occurred converting system outage date/time \", e); /*eslint no-console:off */\n                document.getElementById(systemMaintenanceElId).classList.add(\"tnth-hide\");\n            }\n        });\n    };\n    return new UtilityObj();\n})();\nexport default Utility;\nexport var getExportFileName = Utility.getExportFileName; /* expose common functions */\nexport var getUrlParameter= Utility.getUrlParameter;\n","import tnthAjax from \"./modules/TnthAjax.js\";\nimport SYSTEM_IDENTIFIER_ENUM from \"./modules/SYSTEM_IDENTIFIER_ENUM.js\";\nimport Procedure from \"./modules/Procedures.js\";\n(function() {  /*global $, tnthAjax, SYSTEM_IDENTIFIER_ENUM, i18next */\n    var CoreDataObj = function() {\n        this.subjectId = null;\n        this.init = function(subjectId) { /* entry point for initiating CoreDataObj */\n            var self = this;\n            this.setSubjectId(subjectId, function() {\n                if (!self.subjectId) {\n                    return;\n                }\n                self.getDemoData();\n                self.initFieldEvents();\n                self.setFooter();\n            });\n        };\n        this.setSubjectId = function(subjectId, callback) {\n            callback = callback || function() {};\n            var self = this;\n            this.subjectId = subjectId || $(\"#coreDataUserId\").val(); //check user id in template, if any\n            if (this.subjectId) {\n                callback({success:1});\n                return;\n            }\n            tnthAjax.getCurrentUser(function(data) { //this will get session storage current user first before firing off ajax\n                if (!data || data.error) {\n                    self.setError(i18next.t(\"Error occurred retrieving subject ID\"));\n                    callback({error: true});\n                    return;\n                }\n                self.subjectId = data.id;\n                callback(data);\n            });\n        };\n        this.demoFieldsEnabled = function() {\n            return this.getRaceFields().length || this.getEthnicityFields().length;\n        };\n        this.getRaceFields = function() {\n            return $(\"#userRace input:checkbox\");\n        };\n        this.getEthnicityFields = function() {\n            return $(\"#userEthnicity input:checkbox\");\n        };\n        this.getEthnicityData = function() {\n            var ethnicityFields = this.getEthnicityFields().filter(\":checked\");\n            if (!ethnicityFields.length) {\n                return false;\n            }\n            var ethnicityIDs = ethnicityFields.map(function() {\n                return {\n                    code: $(this).val(),\n                    system: SYSTEM_IDENTIFIER_ENUM.ethnicity_system\n                };\n            }).get();\n            return {\n                \"url\": SYSTEM_IDENTIFIER_ENUM.ethnicity,\n                \"valueCodeableConcept\": {\"coding\": ethnicityIDs}\n            };\n        };\n        this.getRaceData = function() {\n            var raceFields = this.getRaceFields().filter(\":checked\");\n            if (!raceFields.length) {\n                return false;\n            }\n            var raceIDs = raceFields.map(function() {\n                return {\n                    code: $(this).val(),\n                    system: SYSTEM_IDENTIFIER_ENUM.race_system\n                };\n            }).get();\n            return {\n                \"url\": SYSTEM_IDENTIFIER_ENUM.race,\n                \"valueCodeableConcept\": {\"coding\": raceIDs}\n            };\n        };\n        this.setDemoData = function() {\n            if (!this.demoFieldsEnabled()) {\n                return;\n            }\n            var raceData = this.getRaceData();\n            var ethnicityData = this.getEthnicityData();\n            var demoArray = {resourceType: \"Patient\", extension: []};\n            if (raceData) {\n                demoArray.extension.push(raceData);\n            }\n            if (ethnicityData) {\n                demoArray.extension.push(ethnicityData);\n            }\n            tnthAjax.putDemo(this.subjectId, demoArray);\n        };\n        this.getDemoData = function() {\n            if (!this.demoFieldsEnabled()) {\n                return;\n            }\n            tnthAjax.getDemo(this.subjectId);\n        };\n        this.initDemoFieldEvents = function() {\n            if (!this.demoFieldsEnabled()) {\n                return;\n            }\n            var self = this;\n            this.getRaceFields().on(\"click\", function() {\n                self.setDemoData();\n            });\n            this.getEthnicityFields().on(\"click\", function() {\n                self.setDemoData();\n            });\n        };\n        this.initContinueButtonEvent = function() {\n            // Class for both \"done\" and \"skip\" buttons\n            var self = this;\n            $(\".continue-btn\").on(\"click\", function(event){\n                event.preventDefault();\n                $(this).attr(\"disabled\", true);\n                $(\".loading-indicator\").show();\n                try {\n                    window.location.replace(self.getReturnAddress());\n                } catch(e) {\n                    self.setError(i18next.t(\"Error occurred - unable to reach destination\"));\n                    //report error if invalid return address is used here\n                    tnthAjax.reportError(self.subjectId, self.getAPIUrl(), e.message, true);\n                    $(this).attr(\"disabled\", false);\n                    $(\".loading-indicator\").hide();\n                    $(\".error-continue\").text(e.message);\n                }\n            });\n        };\n        this.initFieldEvents = function() {\n            this.initDemoFieldEvents();\n            this.initContinueButtonEvent();\n        };\n        this.getReturnAddress = function() {\n            return $(\"#procReturnAddress\").val() || \"/\";\n        };\n        this.getAPIUrl = function() {\n            return $(\"procAPIUrl\").val() || \"/api/coredata/acquire\";\n        };\n        this.setError = function(message) {\n            $(\"#coreDataError\").html(message || \"\");\n        };\n        this.setFooter = function() { //only for GIL footer\n            var self = this;\n            tnthAjax.setting(\"GIL\", this.subjectId, false, function(data) {\n                if (data && data.GIL) {\n                    tnthAjax.getPortalFooter(self.subjectId, false, \"core_data_footer\");\n                }\n            });\n        };\n    };\n    $(document).ready(function(){\n        Procedure.initViaTemplate();\n        (new CoreDataObj()).init();\n    });\n})();\n\n\n\n\n","var tnthDates =  { /*global i18next */\n    /** validateDateInputFields  check whether the date is a sensible date in month, day and year fields.\n     ** params: month, day and year fields and error field ID\n     ** NOTE this can replace the custom validation check; hook this up to the onchange/blur event of birthday field\n     ** work better in conjunction with HTML5 native validation check on the field e.g. required, pattern match  ***/\n    \"validateDateInputFields\": function(monthField, dayField, yearField, errorFieldId) {\n        var m = $(monthField).val(), d = $(dayField).val(), y = $(yearField).val();\n        if (m && d && y) {\n            if ($(yearField).get(0).validity.valid && $(monthField).get(0).validity.valid && $(dayField).get(0).validity.valid) {\n                m = parseInt(m);\n                d = parseInt(d);\n                y = parseInt(y);\n                var errorField = $(\"#\" + errorFieldId);\n\n                if (!(isNaN(m)) && !(isNaN(d)) && !(isNaN(y))) {\n                    var today = new Date();\n                    var date = new Date(y, m - 1, d);\n                    if (!(date.getFullYear() === y && (date.getMonth() + 1) === m && date.getDate() === d)) { // Check to see if this is a real date\n                        errorField.html(i18next.t(\"Invalid date. Please try again.\")).show();\n                        return false;\n                    } else if (date.setHours(0, 0, 0, 0) > today.setHours(0, 0, 0, 0)) {\n                        errorField.html(i18next.t(\"Date must not be in the future. Please try again.\")).show();\n                        return false; //shouldn't be in the future\n                    } else if (y < 1900) {\n                        errorField.html(i18next.t(\"Date must not be before 1900. Please try again.\")).show();\n                        return false;\n                    }\n                    errorField.html(\"\").hide();\n                    return true;\n                } else {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        } else {\n            return false;\n        }\n    },\n    /**\n     * Simply swaps: a/b/cdef to b/a/cdef (single & double digit permutations accepted...)\n     * Does not check for valid dates on input or output!\n     * @param currentDate string eg 7/4/1976\n     * @returns string eg 4/7/1976\n     */\n    \"swap_mm_dd\": function(currentDate) {\n        var splitDate = currentDate.split(\"/\");\n        return splitDate[1] + \"/\" + splitDate[0] + \"/\" + splitDate[2];\n    },\n    \"convertMonthNumeric\": function(month) { //Convert month string to numeric\n        if (!month) { return \"\"; }\n        else {\n            var month_map = {\"jan\": 1,\"feb\": 2,\"mar\": 3,\"apr\": 4,\"may\": 5,\"jun\": 6,\"jul\": 7,\"aug\": 8,\"sep\": 9,\"oct\": 10,\"nov\": 11,\"dec\": 12};\n            var m = month_map[month.toLowerCase()];\n            return m ? m : \"\";\n        }\n    },\n    \"convertMonthString\": function(month) { //Convert month string to text\n        if (!month) {\n            return \"\";\n        } else {\n            var numeric_month_map = {1: \"Jan\",2: \"Feb\",3: \"Mar\",4: \"Apr\",5: \"May\",6: \"Jun\",7: \"Jul\",8: \"Aug\",9: \"Sep\",10: \"Oct\",11: \"Nov\",12: \"Dec\"};\n            var m = numeric_month_map[parseInt(month)];\n            return m ? m : \"\";\n        }\n    },\n    \"isDate\": function(obj) {\n        return Object.prototype.toString.call(obj) === \"[object Date]\" && !isNaN(obj.getTime());\n    },\n    \"displayDateString\": function(m, d, y) {\n        var s = \"\";\n        s += (d ? d : \"\");\n        if (m) {\n            s += (s ? \" \" : \"\") + this.convertMonthString(m);\n        }\n        if (y) {\n            s += (s ? \" \" : \"\") + y;\n        }\n        return s;\n    },\n    /***\n     * Calculates number of days between two dates. Used in mPOWEr for surgery/discharge\n     * @param startDate - required. Assumes YYYY-MM-DD. This is typically the date of surgery or discharge\n     * @param dateToCalc - optional. If empty, then assumes today's date\n     * @returns number of days\n     */\n    \"getDateDiff\": function(startDate, dateToCalc) {\n        if (!startDate) {\n            return 0;\n        }\n        var a = startDate.split(/[^0-9]/);\n        var dateTime = new Date(a[0], a[1] - 1, a[2]).getTime();\n        var d;\n        if (dateToCalc) {\n            var c = dateToCalc.split(/[^0-9]/);\n            d = new Date(c[0], c[1] - 1, c[2]).getTime();\n        } else { // If no baseDate, then use today to find the number of days between dateToCalc and today\n            d = new Date().getTime();\n        }\n        return Math.floor((d - dateTime) / (1000 * 60 * 60 * 24)); // Round down to floor so we don't add an extra day if session is 12+ hours into the day\n    },\n    \"isValidDefaultDateFormat\": function(date, errorField) {\n        if (!date || date.length < 10) { return false; }\n        var dArray = $.trim(date).split(\" \");\n        if (dArray.length < 3) { return false; }\n        var day = parseInt(dArray[0])+\"\", month = dArray[1], year = dArray[2];\n        if (day.length < 1 || month.length < 3 || year.length < 4) { return false; }\n        if (!/(0)?[1-9]|1\\d|2\\d|3[01]/.test(day)) { return false; }\n        if (!/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/i.test(month)) { return false; }\n        if (!/(19|20)\\d{2}/.test(year)) { return false; }\n        var dt = new Date(date);\n        if (!this.isDateObj(dt)) { return false; }\n        else if (!this.isValidDate(year, this.convertMonthNumeric(month), day)) {\n            return false;\n        } else {\n            var today = new Date(),\n                errorMsg = \"\";\n            if (dt.getFullYear() < 1900) { errorMsg = \"Year must be after 1900\"; }\n            // Only allow if date is before today\n            if (dt.setHours(0, 0, 0, 0) > today.setHours(0, 0, 0, 0)) {\n                errorMsg = \"The date must not be in the future.\";\n            }\n            if (errorMsg) {\n                $(errorField).text(errorMsg);\n                return false;\n            } else {\n                $(errorField).text(\"\");\n                return true;\n            }\n        }\n    },\n    \"isDateObj\": function(d) {\n        return Object.prototype.toString.call(d) === \"[object Date]\" && !isNaN(d.getTime());\n    },\n    \"isValidDate\": function(y, m, d) {\n        var date = this.getDateObj(y, m, d), convertedDate = this.getConvertedDate(date), givenDate = this.getGivenDate(y, m, d);\n        return String(givenDate) === String(convertedDate);\n    },\n    /*\n     * method does not check for valid numbers, will return NaN if conversion failed\n     */\n    \"getDateObj\": function(y, m, d, h, mi, s) {\n        h = h || 0;\n        mi = mi || 0;\n        s = s || 0;\n        return new Date(parseInt(y), parseInt(m) - 1, parseInt(d), parseInt(h), parseInt(mi), parseInt(s));\n    },\n    \"getConvertedDate\": function(dateObj) {\n        if (dateObj && this.isDateObj(dateObj)) { return \"\" + dateObj.getFullYear() + (dateObj.getMonth() + 1) + dateObj.getDate(); }\n        else { return \"\"; }\n    },\n    \"getGivenDate\": function(y, m, d) {\n        return \"\" + y + m + d;\n    },\n    \"formatDateString\": function(dateString, format) { //NB For dateString in ISO-8601 format date as returned from server e.g. '2011-06-29T16:52:48'\n        if (dateString) {\n            var iosDateTest = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n            var d = new Date(dateString);\n            var day, month, year, hours, minutes, seconds, nd;\n            if (!iosDateTest && !isNaN(d) && !this.isDateObj(d)) { //note instantiating ios formatted date using Date object resulted in error in IE\n                return \"\";\n            }\n            if (iosDateTest.test(dateString)) {\n                //IOS date, no need to convert again to date object, just parse it as is\n                //issue when passing it into Date object, the output date is inconsistent across from browsers\n                var dArray = $.trim($.trim(dateString).replace(/[\\.TZ:\\-]/gi, \" \")).split(\" \");\n                year = dArray[0];\n                month = dArray[1];\n                day = dArray[2];\n                hours = dArray[3] || \"0\";\n                minutes = dArray[4] || \"0\";\n                seconds = dArray[5] || \"0\";\n            } else {\n                day = d.getDate();\n                month = d.getMonth() + 1;\n                year = d.getFullYear();\n                hours = d.getHours();\n                minutes = d.getMinutes();\n                seconds = d.getSeconds();\n                nd = \"\";\n            }\n            var pad = function(n) {n = parseInt(n); return (n < 10) ? \"0\" + n : n;};\n            day = pad(day);\n            month = pad(month);\n            hours = pad(hours);\n            minutes = pad(minutes);\n            seconds = pad(seconds);\n\n            switch (format) {\n            case \"mm/dd/yyyy\":\n                nd = month + \"/\" + day + \"/\" + year;\n                break;\n            case \"mm-dd-yyyy\":\n                nd = month + \"-\" + day + \"-\" + year;\n                break;\n            case \"mm-dd-yyyy hh:mm:ss\":\n                nd = month + \"-\" + day + \"-\" + year + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"dd/mm/yyyy\":\n                nd = day + \"/\" + month + \"/\" + year;\n                break;\n            case \"dd/mm/yyyy hh:mm:ss\":\n                nd = day + \"/\" + month + \"/\" + year + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"dd-mm-yyyy\":\n                nd = day + \"-\" + month + \"-\" + year;\n                break;\n            case \"dd-mm-yyyy hh:mm:ss\":\n                nd = day + \"-\" + month + \"-\" + year + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"iso-short\":\n            case \"yyyy-mm-dd\":\n                nd = year + \"-\" + month + \"-\" + day;\n                break;\n            case \"iso\":\n            case \"yyyy-mm-dd hh:mm:ss\":\n                nd = year + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"system\":\n                nd = year + \"-\" + month + \"-\" + day + \"T\" + hours + \":\" + minutes + \":\" + seconds + \"Z\";\n                break;\n            case \"d M y hh:mm:ss\":\n                nd = this.displayDateString(month, day, year);\n                nd = nd + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"d M y\":\n                nd = this.displayDateString(month, day, year);\n                break;\n            default:\n                nd = this.displayDateString(month, day, year);\n                break;\n            }\n            return nd;\n        } else {\n            return \"\";\n        }\n    },\n    \"convertToLocalTime\": function(dateString) {\n        var convertedDate = \"\";\n        if (dateString) { //assuming dateString is UTC date/time\n            var d = new Date(dateString);\n            var newDate = new Date(d.getTime() + d.getTimezoneOffset() * 60 * 1000);\n            var offset = d.getTimezoneOffset() / 60;\n            var hours = d.getHours();\n            newDate.setHours(hours - offset);\n            var options = {year: \"numeric\", day: \"numeric\", month: \"short\", hour: \"numeric\", minute: \"numeric\", second: \"numeric\", hour12: false};\n            convertedDate = newDate.toLocaleString(options);\n        }\n        return convertedDate;\n    },\n    getDateWithTimeZone: function(dObj) {\n        /*\n         * param is a date object - calculating UTC date using Date object's timezoneOffset method\n         * the method return offset in minutes, so need to convert it to miliseconds - adding the resulting offset will be the UTC date/time\n         */\n        var utcDate = new Date(dObj.getTime() + (dObj.getTimezoneOffset()) * 60 * 1000);\n        return this.formatDateString(utcDate, \"yyyy-mm-dd hh:mm:ss\");  //I believe this is a valid python date format, will save it as GMT date/time NOTE, conversion already occurred, so there will be no need for backend to convert it again\n    },\n    getTodayDateObj: function() { //return object containing today's date/time information\n        var today = new Date();\n        var td = today.getDate(), tm = today.getMonth() + 1, ty = today.getFullYear();\n        var th = today.getHours(), tmi = today.getMinutes(), ts = today.getSeconds();\n        var gmtToday = this.getDateWithTimeZone(this.getDateObj(ty, tm, td, th, tmi, ts));\n        var pad = function(n) {n = parseInt(n); return (n < 10) ? \"0\" + n : n;};\n        return {\n            date: today,\n            day: td,\n            month: tm,\n            year: ty,\n            hour: th,\n            minute: tmi,\n            second: ts,\n            displayDay: pad(td),\n            displayMonth: pad(tm),\n            displayYear: pad(ty),\n            displayHour: pad(th),\n            displayMinute: pad(tmi),\n            displaySecond: pad(ts),\n            gmtDate: gmtToday\n        };\n    },\n    dateValidator: function(day, month, year, restrictToPresent) { //parameters: day, month and year values in numeric, boolean value for restrictToPresent, true if the date needs to be before today, false is the default\n        var errorMessage = \"\";\n        if (day && month && year) {\n            var iy = parseInt(year), im = parseInt(month), iid = parseInt(day), date = new Date(iy, im - 1, iid);\n            if (date.getFullYear() === iy && (date.getMonth() + 1) === im && date.getDate() === iid) { // Check to see if this is a real date\n                if (iy < 1900) {\n                    errorMessage = i18next.t(\"Year must be after 1900\");\n                }\n                if (restrictToPresent) { // Only allow if date is before today\n                    var today = new Date();\n                    if (date.setHours(0, 0, 0, 0) > today.setHours(0, 0, 0, 0)) {\n                        errorMessage = i18next.t(\"The date must not be in the future.\");\n                    }\n                }\n            } else {\n                errorMessage = i18next.t(\"Invalid Date. Please enter a valid date.\");\n            }\n        } else {\n            errorMessage = i18next.t(\"Missing value.\");\n        }\n        return errorMessage;\n    }\n};\nexport default tnthDates;\nexport var validateDateInputFields = tnthDates.validateDateInputFields; /* generic validation function for global use */\n\n","export default {\n    \"biopsy\": {\n        code: \"111\",\n        display: \"biopsy\"\n    },\n    \"pca_diag\": {\n        code: \"121\",\n        display: \"PCa diagnosis\"\n    },\n    \"pca_localized\": {\n        code: \"141\",\n        display: \"PCa localized diagnosis\"\n    }\n};\n\n","import Utility from \"./Utility.js\";\nimport tnthDates from \"./TnthDate.js\";\nimport SYSTEM_IDENTIFIER_ENUM from \"./SYSTEM_IDENTIFIER_ENUM.js\";\nimport CLINICAL_CODE_ENUM from \"./CLINICAL_CODE_ENUM.js\";\nexport default { /*global $ */\n    \"beforeSend\": function() {\n        $.ajaxSetup({\n            beforeSend: function(xhr, settings) {\n                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {\n                    xhr.setRequestHeader(\"X-CSRFToken\", $(\"#__CRSF_TOKEN\").val());\n                }\n            }\n        });\n    },\n    \"sendRequest\": function(url, method, userId, params, callback) {\n        if (!url) { return false; }\n        var defaultParams = {type: method ? method : \"GET\", url: url, attempts: 0, max_attempts: 3, contentType: \"application/json; charset=utf-8\", dataType: \"json\", sync: false, timeout: 5000, data: null, useWorker: false, async: true};\n        params = params || defaultParams;\n        params = $.extend({}, defaultParams, params);\n        params.async = params.sync ? false: params.async;\n        var self = this;\n        var fieldHelper = this.FieldLoaderHelper, targetField = params.targetField || null;\n        callback = callback || function() {};\n        params.attempts++;\n        fieldHelper.showLoader(targetField);\n        if (params.useWorker && window.Worker && !Utility.isTouchDevice()) { /*global isTouchDevice()*/\n            Utility.initWorker(url, params, function(result) { /*global initWorker*/\n                var data;\n                try {\n                    data = JSON.parse(result);\n                } catch(e) {\n                    callback({error: \"Error occurred parsing data for \" + url});\n                    return false;\n                }\n                if (!data) {\n                    callback({\"error\": true, \"data\": \"no data returned\"});\n                    fieldHelper.showError(targetField);\n                } else if (data.error) {\n                    callback({\"error\": true, \"data\": data});\n                    self.sendError(data, url, userId, params);\n                    fieldHelper.showError(targetField);\n                } else {\n                    callback(data);\n                    fieldHelper.showUpdate(targetField);\n                }\n            });\n            return true;\n        }\n        if (!params.cache) {\n            params.headers = {\n                \"cache-control\": \"no-cache\",\n                \"expires\": \"-1\",\n                \"pragma\": \"no-cache\"\n            };\n        }\n        $.ajax(params).done(function(data) {\n            params.attempts = 0;\n            if (data) {\n                fieldHelper.showUpdate(targetField);\n                callback(data);\n            } else {\n                fieldHelper.showError(targetField);\n                callback({\"error\": true, \"data\": \"no data returned\"});\n            }\n        }).fail(function(xhr) {\n            if (params.attempts < params.max_attempts) {\n                (function(self, url, method, userId, params, callback) {\n                    setTimeout(function() {\n                        self.sendRequest(url, method, userId, params, callback);\n                    }, 3000); //retry after 3 seconds\n                })(self, url, method, userId, params, callback);\n            } else {\n                params.attempts = 0;\n                fieldHelper.showError(targetField);\n                callback({\"error\": true, \"data\": xhr});\n                self.sendError(xhr, url, userId, params);\n            }\n        });\n    },\n    \"sendError\": function(xhr, url, userId, params) {\n        if (!xhr) { return false; }\n        var errorMessage = \"[Error occurred processing request]  status - \" + (parseInt(xhr.status) === 0 ? \"request timed out/network error\" : xhr.status) + \", response text - \" + (xhr.responseText ? xhr.responseText : \"no response text returned from server\");\n        if (params) {\n            try {\n                errorMessage += \" [data sent]: \" + JSON.stringify(params); //error can happen if for some reason the params are malformed\n            } catch(e) {\n                errorMessage += \" Error occurred transforming sent data: \" + e.message;\n            }\n        }\n        this.reportError(userId ? userId : \"Not available\", url, errorMessage, true);\n    },\n    \"reportError\": function(userId=0, page_url, message, sync) {\n        //params need to contain the following: subject_id: User on which action is being attempted message: Details of the error event page_url: The page requested resulting in the error\n        var params = {};\n        page_url = page_url || window.location.href;\n        params.subject_id = userId;\n        params.page_url = page_url;\n        params.message = \"Error generated in JS - \" + (message ? message.replace(/[\"']/g, \"\") : \"no detail available\"); //don't think we want to translate message sent back to the server here\n        console.log(\"Errors occurred.....\"); /*eslint no-console: off */\n        console.log(params); /*global console*/\n        $.ajax({\n            type: \"GET\",\n            url: \"/report-error\",\n            contentType: \"application/json; charset=utf-8\",\n            cache: false,\n            async: (sync ? false : true),\n            data: params\n        }).done(function() {}).fail(function() {});\n    },\n    \"FieldLoaderHelper\": {\n        delayDuration: 300,\n        showLoader: function(targetField) {\n            if (!targetField || targetField.length === 0) { return false; }\n            var el = $(\"#\" + (targetField.attr(\"data-save-container-id\") || targetField.attr(\"id\")) + \"_load\");\n            el.css(\"opacity\", 1);\n            el.addClass(\"loading\");\n        },\n        showUpdate: function(targetField) {\n            var __timeout = this.delayDuration;\n            if (!targetField || targetField.length === 0) { return false; }\n            setTimeout(function() {\n                (function(targetField) {\n                    var containerId = targetField.attr(\"data-save-container-id\") || targetField.attr(\"id\");\n                    var errorField = $(\"#\" + containerId + \"_error\");\n                    var successField = $(\"#\" + containerId + \"_success\");\n                    var loadingField = $(\"#\" + containerId + \"_load\");\n                    loadingField.removeClass(\"loading\");\n                    errorField.text(\"\").css(\"opacity\", 0);\n                    successField.text(i18next.t(\"success\"));\n                    loadingField.animate({\"opacity\": 0}, __timeout, function() {\n                        successField.animate({\"opacity\": 1}, __timeout, function() {\n                            setTimeout(function() {\n                                successField.animate({\"opacity\": 0}, __timeout * 2);\n                            }, __timeout * 2);\n                        });\n                    });\n                })(targetField);\n            }, __timeout);\n        },\n        showError: function(targetField) {\n            targetField = targetField || $(targetField);\n            var __timeout = this.delayDuration;\n            if (!targetField || targetField.length === 0) { return false; }\n            setTimeout(function() {\n                (function(targetField) {\n                    var containerId = targetField.attr(\"data-save-container-id\") || targetField.attr(\"id\");\n                    var errorField = $(\"#\" + containerId + \"_error\");\n                    var successField = $(\"#\" + containerId + \"_success\");\n                    var loadingField = $(\"#\" + containerId + \"_load\");\n                    loadingField.removeClass(\"loading\");\n                    errorField.text(i18next.t(\"Unable to update. System/Server Error.\"));\n                    successField.text(\"\").css(\"opacity\", 0);\n                    loadingField.animate({\"opacity\": 0}, __timeout, function() {\n                        errorField.animate({\"opacity\": 1}, __timeout, function() {\n                            setTimeout(function() {\n                                errorField.animate({\"opacity\": 0}, __timeout * 2);\n                            }, __timeout * 2);\n                        });\n                    });\n                })(targetField);\n            }, __timeout);\n        }\n    },\n    \"getCurrentUser\": function(callback, params) {\n        callback = callback||function() {};\n        if (sessionStorage.currentUser) {\n            callback(JSON.parse(sessionStorage.currentUser));\n        } else {\n            this.sendRequest(\"/api/me\", \"GET\", \"\", params, function(data) {\n                if (data && data.id) { //make sure the necessary data is there before setting session\n                    sessionStorage.setItem(\"currentUser\", JSON.stringify(data));\n                }\n                callback(data);\n            });\n        }\n    },\n    \"getStillNeededCoreData\": function(userId, sync, callback, entry_method) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User Id is required\")});\n            return false;\n        }\n        var __url = \"/api/coredata/user/\" + userId + \"/still_needed\" + (entry_method ? \"?entry_method=\" + (entry_method).replace(/\\_/g, \" \") : \"\");\n        this.sendRequest(__url, \"GET\", userId, {sync: sync,cache: true}, function(data) {\n            if (!data) {\n                callback({\"error\": i18next.t(\"no data returned\")});\n                return false;\n            }\n            if (data.error) {\n                callback({\"error\": i18next.t(\"unable to get needed core data\")});\n                return false;\n            }\n            callback(data);\n        });\n    },\n    \"getRequiredCoreData\": function(userId, sync, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User Id is required\")});\n            return false;\n        }\n        this.sendRequest(\"/api/coredata/user/\" + userId + \"/required\", \"GET\", userId, {sync: sync,cache: true}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    if (data.required) {\n                        callback(data.required);\n                    } else {\n                        callback({\"error\": i18next.t(\"no data returned\")});\n                    }\n                } else {\n                    callback({\"error\": i18next.t(\"unable to get required core data\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"getOptionalCoreData\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User Id is required\")});\n            return false;\n        }\n        var __url = \"/api/coredata/user/\" + userId + \"/optional\", sessionStorageKey = \"optionalCoreData_\" + userId;\n        if (sessionStorage.getItem(sessionStorageKey)) {\n            callback(JSON.parse(sessionStorage.getItem(sessionStorageKey)));\n        } else {\n            this.sendRequest(__url, \"GET\", userId, params, function(data) {\n                if (data) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"no data found\")});\n                }\n            });\n        }\n    },\n    \"getPortalFooter\": function(userId, sync, containerId, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback(\"<div class='error-message'>\" + i18next.t(\"User Id is required\") + \"</div>\");\n            return false;\n        }\n        this.sendRequest(\"/api/portal-footer-html/\", \"GET\", userId, {sync: sync,cache: true,\"dataType\": \"html\"}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    if (containerId) {\n                        $(\"#\" + containerId).html(data);\n                    }\n                    callback(data);\n                } else {\n                    callback(\"<div class='error-message'>\" + i18next.t(\"Unable to retrieve portal footer html\") + \"</div>\");\n                }\n            } else {\n                callback(\"<div class='error-message'>\" + i18next.t(\"No data found\") + \"</div>\");\n            }\n        });\n    },\n    \"getOrgs\": function(userId, params, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/organization\", \"GET\", userId, params, function(data) {\n            if (sessionStorage.demoOrgsData) {\n                callback(JSON.parse(sessionStorage.demoOrgsData));\n                return true;\n            }\n            if (!data.error) {\n                $(\".get-orgs-error\").html(\"\");\n                sessionStorage.setItem(\"demoOrgsData\", JSON.stringify(data));\n                callback(data);\n            } else {\n                var errorMessage = i18next.t(\"Server error occurred retrieving organization/clinic information.\");\n                $(\".get-orgs-error\").html(errorMessage);\n                callback({\"error\": errorMessage});\n            }\n        });\n    },\n    \"getConsent\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/consent\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    $(\".get-consent-error\").html(\"\");\n                    callback(data);\n                    return true;\n                } else {\n                    var errorMessage = i18next.t(\"Server error occurred retrieving consent information.\");\n                    callback({\"error\": errorMessage});\n                    $(\".get-consent-error\").html(errorMessage);\n                    return false;\n                }\n            }\n        });\n    },\n    \"setConsent\": function(userId, params, status, sync, callback) {\n        callback = callback || function() {};\n        if (!userId && !params) {\n            callback({\"error\": i18next.t(\"User id and parameters are required\")});\n            return false;\n        }\n        var consented = this.hasConsent(userId, params.org, status);\n        var __url = \"/api/user/\" + userId + \"/consent\";\n        if (consented && !params.testPatient) {\n            callback({\"error\": false});\n            return;\n        }\n        var data = {};\n        data.user_id = userId;\n        data.organization_id = params.org;\n        data.agreement_url = params.agreementUrl;\n        data.staff_editable = (String(params.staff_editable) !== \"null\"  && String(params.staff_editable) !== \"undefined\" ? params.staff_editable : false);\n        data.include_in_reports = (String(params.include_in_reports) !== \"null\" && String(params.include_in_reports) !== \"undefined\" ? params.include_in_reports : false);\n        data.send_reminders = (String(params.send_reminders) !== \"null\" &&  String(params.send_reminders) !== \"undefined\"? params.send_reminders : false);\n        if (params.acceptance_date) {\n            data.acceptance_date = params.acceptance_date;\n        }\n        this.sendRequest(__url, \"POST\", userId, {sync: sync, data: JSON.stringify(data)}, function(data) {\n            if (!data.error) {\n                $(\".set-consent-error\").html(\"\");\n                callback(data);\n            } else {\n                var errorMessage = i18next.t(\"Server error occurred setting consent status.\");\n                callback({\"error\": errorMessage});\n                $(\".set-consent-error\").html(errorMessage);\n            }\n        });\n    },\n    deleteConsent: function(userId, params={}) {\n        if (!userId) {\n            return false;\n        }\n        var consented = this.getAllValidConsent(userId, params.org);\n        if (!consented) {\n            return false;\n        }\n        var arrExcludedOrgIds = params.exclude ? params.exclude.split(\",\"): [];\n        var arrConsents = $.grep(consented, function(orgId) {\n            var inArray = $.grep(arrExcludedOrgIds, function(eOrg) {\n                return String(eOrg) === String(orgId);\n            });\n            return !(inArray.length); //filter out org Id(s) that are in the array of org Ids to be excluded;\n        });\n        var self = this;\n        arrConsents.forEach(function(orgId) { //delete all consents for the org\n            self.sendRequest(\"/api/user/\" + userId + \"/consent\", \"DELETE\", userId, {data: JSON.stringify({\"organization_id\": parseInt(orgId)})}, function(data) {\n                if (!data) {\n                    return false;\n                }\n                if (!data.error) {\n                    $(\".delete-consent-error\").html(\"\");\n                } else {\n                    $(\".delete-consent-error\").html(i18next.t(\"Server error occurred removing consent.\"));\n                }\n            });\n        });\n    },\n    withdrawConsent: function(userId, orgId, params, callback) {\n        callback = callback || function() {};\n        params = params || {};\n        if (!userId || !orgId) {\n            callback({\"error\": i18next.t(\"User id and organization id are required.\")});\n            return false;\n        }\n        var self = this, arrConsent = [];\n        this.sendRequest(\"/api/user/\" + userId + \"/consent\", \"GET\", userId, params, function(data) {\n            if (data && data.consent_agreements && data.consent_agreements.length) {\n                arrConsent = $.grep(data.consent_agreements, function(item) {\n                    var expired = tnthDates.getDateDiff(String(item.expires)); /*global tnthDates */\n                    return (String(orgId) === String(item.organization_id)) && !item.deleted && !(expired > 0) && String(item.status) === \"suspended\";\n                });\n            }\n            if (arrConsent.length) { //don't send request if suspended consent already existed\n                callback({\"data\": \"success\"});\n                return false;\n            }\n            self.sendRequest(\"/api/user/\" + userId + \"/consent/withdraw\",\n                \"POST\",\n                userId, {sync: params.sync,data: JSON.stringify({organization_id: orgId})},\n                function(data) {\n                    if (data.error) {\n                        callback({\"error\": i18next.t(\"Error occurred setting suspended consent status.\")});\n                        return false;\n                    }\n                    callback(data);\n                });\n        });\n    },\n    getAllValidConsent: function(userId, orgId) {\n        if (!userId || !orgId) { return false; }\n        var consentedOrgIds = [];\n        this.sendRequest(\"/api/user/\" + userId + \"/consent\", \"GET\", userId, {sync: true}, function(data) {\n            if (!data || data.error || !data.consent_agreements || !data.consent_agreements.length) {\n                return consentedOrgIds;\n            }\n            consentedOrgIds = $.grep(data.consent_agreements, function(item) {\n                var expired = tnthDates.getDateDiff(String(item.expires));\n                return !item.deleted && !(expired > 0) && (String(orgId).toLowerCase() === \"all\" || String(orgId) === String(item.organization_id));\n            });\n            consentedOrgIds = (consentedOrgIds).map(function(item) {\n                return item.organization_id;\n            });\n            return consentedOrgIds;\n        });\n        return consentedOrgIds;\n    },\n    hasConsent: function(userId, orgId, filterStatus) {  /****** NOTE - this will return the latest updated consent entry *******/\n        if (!userId || !orgId || String(filterStatus) === \"default\") { return false; }\n        var consentedOrgIds = [];\n        var __url = \"/api/user/\" + userId + \"/consent\", self = this;\n        self.sendRequest(__url, \"GET\", userId, {sync: true}, function(data) {\n            if (!data || data.error || (data.consent_agreements && data.consent_agreements.length === 0)) {\n                return false;\n            }\n            consentedOrgIds = $.grep(data.consent_agreements, function(item) {\n                var expired = item.expires ? tnthDates.getDateDiff(String(item.expires)) : 0; /*global tnthDates */\n                return (String(orgId) === String(item.organization_id)) && !item.deleted && !(expired > 0) && item.staff_editable && item.send_reminders && item.include_in_reports;\n            });\n        });\n        return consentedOrgIds.length;\n    },\n    \"getDemo\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User id is required.\")});\n            return false;\n        }\n        params = params || {};\n        var demoDataKey = \"demoData_\"+userId;\n        if (sessionStorage.getItem(demoDataKey)) {\n            callback(JSON.parse(sessionStorage.getItem(demoDataKey)));\n            return;\n        }\n        this.sendRequest(\"/api/demographics/\" + userId, \"GET\", userId, params, function(data) {\n            var errorMessage = \"\";\n            if (data.error) {\n                errorMessage = i18next.t(\"Server error occurred retrieving demographics information.\");\n                $(\".get-demo-error\").html(errorMessage);\n                callback({\"error\": errorMessage});\n                return false;\n            }\n            $(\".get-demo-error\").html(errorMessage);\n            sessionStorage.setItem(demoDataKey, JSON.stringify(data));\n            callback(data);\n        });\n    },\n    \"clearDemoSessionData\": function(userId) {\n        sessionStorage.removeItem(\"demoData_\"+userId);\n    },\n    \"putDemo\": function(userId, toSend, targetField, sync, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User Id is required\")});\n            return false;\n        }\n        this.clearDemoSessionData(userId);\n        this.sendRequest(\"/api/demographics/\" + userId, \"PUT\", userId, {sync: sync, data: JSON.stringify(toSend),targetField: targetField}, function(data) {\n            if (!data.error) {\n                $(\".put-demo-error\").html(\"\");\n            } else {\n                $(\".put-demo-error\").html(i18next.t(\"Server error occurred setting demographics information.\"));\n            }\n            callback(data);\n        });\n    },\n    \"getLocale\": function(userId) {\n        this.sendRequest(\"/api/demographics/\" + userId, \"GET\", userId, null, function(data) {\n            if (data) {\n                if (!data.error) {\n                    if (data.communication) {\n                        $(\"#profileLocaleTimezoneContainer .get-locale-error\").html(\"\");\n                    }\n                } else {\n                    $(\"#profileLocaleTimezoneContainer .get-locale-error\").html(i18next.t(\"Server error occurred retrieving locale information.\"));\n                }\n            }\n        });\n    },\n    \"hasTreatment\": function(data) {\n        if (!data || !data.entry || data.entry.length === 0) {\n            return false;\n        }\n        var sortedArray = data.entry.sort(function(a, b) { // sort from newest to oldest based on lsat updated date\n            return new Date(b.resource.meta.lastUpdated) - new Date(a.resource.meta.lastUpdated);\n        });\n        var found = false;\n        sortedArray.forEach(function(item) {\n            if (found) { return true; }\n            var resourceItemCode = String(item.resource.code.coding[0].code);\n            var system = String(item.resource.code.coding[0].system);\n            var procId = item.resource.id;\n            if ((resourceItemCode === SYSTEM_IDENTIFIER_ENUM.CANCER_TREATMENT_CODE && (system === SYSTEM_IDENTIFIER_ENUM.SNOMED_SYS_URL)) || (resourceItemCode === SYSTEM_IDENTIFIER_ENUM.NONE_TREATMENT_CODE && (system === SYSTEM_IDENTIFIER_ENUM.CLINICAL_SYS_URL))) {\n                found = {\"code\": resourceItemCode,\"id\": procId};\n            }\n        });\n        return found;\n    },\n    \"getTreatment\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required\")});\n            return false;\n        }\n        this.sendRequest(\"/api/patient/\" + userId + \"/procedure\", \"GET\", userId, params, function(data) {\n            if (data.error) {\n                $(\"#userProcedures\").html(\"<span class='error-message'>\" + i18next.t(\"Error retrieving data from server\") + \"</span>\");\n            }\n            callback(data);\n        });\n    },\n    \"postTreatment\": function(userId, started, treatmentDate, targetField) {\n        if (!userId) { return false;}\n        this.deleteTreatment(userId, targetField);\n        var code = SYSTEM_IDENTIFIER_ENUM.NONE_TREATMENT_CODE, display = \"None\", system = SYSTEM_IDENTIFIER_ENUM.CLINICAL_SYS_URL;\n        if (started) {\n            code = SYSTEM_IDENTIFIER_ENUM.CANCER_TREATMENT_CODE;\n            display = \"Procedure on prostate\";\n            system = SYSTEM_IDENTIFIER_ENUM.SNOMED_SYS_URL;\n        }\n        if (!treatmentDate) {\n            var date = new Date();\n            treatmentDate = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();  //in yyyy-mm-dd format\n        }\n        var procID = [{\"code\": code,\"display\": display,\"system\": system}];\n        var procArray = {};\n        procArray.resourceType = \"Procedure\";\n        procArray.subject = {\"reference\": \"Patient/\" + userId};\n        procArray.code = {\"coding\": procID};\n        procArray.performedDateTime = treatmentDate ? treatmentDate : \"\";\n        this.postProc(userId, procArray, targetField);\n    },\n    deleteTreatment: function(userId, targetField) {\n        var self = this;\n        this.sendRequest(\"/api/patient/\" + userId + \"/procedure\", \"GET\", userId, {sync: true}, function(data) {\n            if (!data || data.error) { return false; }\n            var treatmentData = self.hasTreatment(data);\n            if (!treatmentData) { return false; }\n            if (String(treatmentData.code) === String(SYSTEM_IDENTIFIER_ENUM.CANCER_TREATMENT_CODE)){\n                self.deleteProc(treatmentData.id, targetField, true);\n                return true;\n            }\n            self.deleteProc(treatmentData.id, targetField, true);\n        });\n    },\n    \"getProc\": function(userId, newEntry, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/patient/\" + userId + \"/procedure\", \"GET\", userId, null, function(data) {\n            callback(data);\n        });\n    },\n    \"postProc\": function(userId, toSend, targetField, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/procedure\", \"POST\", userId, {data: JSON.stringify(toSend),targetField: targetField}, function(data) {\n            if (!data) {\n                callback({\"error\": i18next.t(\"no data returned\")});\n                return false;\n            }\n            if (data.error) {\n                var errorMessage = i18next.t(\"Server error occurred saving procedure/treatment information.\");\n                $(\"#userProcuedures .get-procs-error\").html(errorMessage);\n                callback({error: errorMessage});\n                return false;\n            }\n            $(\".get-procs-error\").html(\"\");\n            callback(data);\n        });\n    },\n    \"deleteProc\": function(procedureId, targetField, sync) {\n        this.sendRequest(\"/api/procedure/\" + procedureId, \"DELETE\", null, {sync: sync,targetField: targetField}, function(data) {\n            if (!data.error) {\n                $(\".del-procs-error\").html(\"\");\n            } else {\n                $(\".del-procs-error\").html(i18next.t(\"Server error occurred removing procedure/treatment information.\"));\n            }\n        });\n    },\n    \"getRoleList\": function(params, callback) {\n        this.sendRequest(\"/api/roles\", \"GET\", null, params, function(data) {\n            callback = callback || function() {};\n            if (!data.error) {\n                callback(data);\n            } else {\n                var errorMessage = i18next.t(\"Server error occurred retrieving roles information.\");\n                $(\".get-roles-error\").html(errorMessage);\n                callback({\"error\": errorMessage});\n            }\n        });\n    },\n    \"getRoles\": function(userId, callback, params) {\n        callback = callback || function() {};\n        var sessionStorageKey = \"userRole_\" + userId;\n        if (sessionStorage.getItem(sessionStorageKey)) {\n            var data = JSON.parse(sessionStorage.getItem(sessionStorageKey));\n            callback(data);\n        } else {\n            this.sendRequest(\"/api/user/\" + userId + \"/roles\", \"GET\", userId, params, function(data) {\n                if (data) {\n                    if (!data.error) {\n                        $(\".get-roles-error\").html(\"\");\n                        sessionStorage.setItem(sessionStorageKey, JSON.stringify(data));\n                        callback(data);\n                    } else {\n                        var errorMessage = i18next.t(\"Server error occurred retrieving user role information.\");\n                        $(\".get-roles-error\").html(errorMessage);\n                        callback({\"error\": errorMessage});\n                    }\n                }\n            });\n        }\n    },\n    \"removeCachedRoles\": function(userId) {\n        sessionStorage.removeItem(\"userRole_\"+userId);\n    },\n    \"putRoles\": function(userId, toSend, targetField, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User Id is required.\")});\n            return false;\n        }\n        this.removeCachedRoles(userId);\n        this.sendRequest(\"/api/user/\" + userId + \"/roles\", \"PUT\", userId, {data: JSON.stringify(toSend),targetField: targetField}, function(data) {\n            if (!data || data.error) {\n                var errorMessage = i18next.t(\"Server error occurred setting user role information.\");\n                $(\".put-roles-error\").html(errorMessage);\n                callback({error: errorMessage});\n                return;\n            }\n            $(\".put-roles-error\").html(\"\");\n            sessionStorage.setItem(\"userRole_\" + userId, \"\");\n            callback(data);\n        });\n    },\n    \"deleteRoles\": function(userId, toSend) {\n        if (!userId) {\n            return false;\n        }\n        this.removeCachedRoles(userId);\n        this.sendRequest(\"/api/user/\" + userId, \"GET\", userId, {data: JSON.stringify(toSend)}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    $(\".delete-roles-error\").html(\"\");\n                } else {\n                    $(\".delete-roles-error\").html(i18next.t(\"Server error occurred deleting user role.\"));\n                }\n            }\n        });\n    },\n    \"getClinical\": function(userId, params, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/patient/\" + userId + \"/clinical\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    $(\".get-clinical-error\").html(\"\");\n                    callback(data);\n                } else {\n                    var errorMessage = i18next.t(\"Server error occurred retrieving clinical data.\");\n                    $(\".get-clinical-error\").html(errorMessage);\n                    callback({\"error\": errorMessage});\n                }\n            }\n        });\n    },\n    \"getObservationId\": function(userId, code) {\n        if (!userId) { return false; }\n        var obId = \"\",_code = \"\";\n        this.sendRequest(\"/api/patient/\" + userId + \"/clinical\", \"GET\", userId, {sync: true}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    if (data.entry) {\n                        (data.entry).forEach(function(item) {\n                            if (!obId) {\n                                _code = item.content.code.coding[0].code;\n                                if (String(_code) === String(code)) {\n                                    obId = item.content.id;\n                                }\n                            }\n                        });\n                    }\n                }\n            }\n        });\n        return obId;\n    },\n    \"postClinical\": function(userId, toCall, toSend, status, targetField, params, callback) {\n        if (!userId) { return false; }\n        params = params || {};\n        var code = \"\", display = \"\";\n        if (CLINICAL_CODE_ENUM.hasOwnProperty(String(toCall).toLowerCase())) {\n            var match = CLINICAL_CODE_ENUM[toCall];\n            code = match.code;\n            display = match.display;\n        }\n        if (!code) {\n            return false;\n        }\n        var self = this;\n        var system = SYSTEM_IDENTIFIER_ENUM.CLINICAL_SYS_URL;\n        var method = \"POST\";\n        var url = \"/api/patient/\" + userId + \"/clinical\";\n        var obsCode = [{\"code\": code,\"display\": display,\"system\": system}];\n        var obsArray = {};\n        obsArray.resourceType = \"Observation\";\n        obsArray.code = {\"coding\": obsCode};\n        obsArray.issued = params.issuedDate ? params.issuedDate : \"\";\n        obsArray.status = status ? status : \"\";\n        obsArray.valueQuantity = {\"units\": \"boolean\",\"value\": toSend};\n        if (params.performer) {\n            obsArray.performer = params.performer;\n        }\n        var obsId = self.getObservationId(userId, code);\n        if (obsId) {\n            method = \"PUT\";\n            url = url + \"/\" + obsId;\n        }\n        callback = callback || function() {};\n        this.sendRequest(url, method, userId, {data: JSON.stringify(obsArray),targetField: targetField}, function(data) {\n            if (!data || data.error) {\n                var errorMessage = i18next.t(\"Server error occurred updating clinical data.\");\n                $(\".post-clinical-error\").html(errorMessage).show();\n                callback({error: errorMessage});\n                return;\n            }\n            $(\".post-clinical-error\").html(\"\").hide();\n            callback(data);\n        });\n    },\n    \"getTermsUrl\": function(sync, callback) { /*global i18next */\n        callback = callback || function() {};\n        this.sendRequest(\"/api/tou\", \"GET\", null, {sync: sync}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    $(\".get-tou-error\").html(\"\");\n                    if (data.url) {\n                        $(\"#termsURL\").attr(\"data-url\", data.url);\n                        $(\"#termsCheckbox_default .terms-url\").attr(\"href\", data.url);\n                        callback({\"url\": data.url});\n                    } else {\n                        callback({\"error\": i18next.t(\"no url returned\")});\n                    }\n                } else {\n                    $(\".get-tou-error\").html(i18next.t(\"Server error occurred retrieving tou url.\"));\n                    callback({\"error\": i18next.t(\"Server error\")});\n                }\n            }\n        });\n    },\n    \"getInstrumentsList\": function(sync, callback) { //return instruments list by organization(s)\n        callback = callback || function() {};\n        this.sendRequest(\"api/questionnaire_bank\", \"GET\", null, {\n            sync: sync\n        }, function(data) {\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"error retrieving instruments list\")});\n                return;\n            }\n            if (!data.entry || !data.entry.length) {\n                callback({\"error\": i18next.t(\"no data returned\")});\n                return;\n            }\n            var qList = {};\n            (data.entry).forEach(function(item) {\n                if (item.organization) {\n                    var orgID = (item.organization.reference).split(\"/\")[2];\n                    if (!qList[orgID]) {\n                        qList[orgID] = []; //don't assign orgID to object if it was already present\n                    }\n                    if (item.questionnaires) {\n                        (item.questionnaires).forEach(function(q) {\n                            /*\n                             * add instrument name to instruments array for the org - will not add if it is already in the array\n                             * NOTE: inArray returns -1 if the item is NOT in the array\n                             */\n                            if ($.inArray(q.questionnaire.display, qList[orgID]) === -1) {\n                                qList[orgID].push(q.questionnaire.display);\n                            }\n                        });\n                    }\n                }\n            });\n            callback(qList);\n\n        });\n    },\n    \"getTerms\": function(userId, type, sync, callback, params) {\n        callback = callback || function() {};\n        params = params || {};\n        var url = \"/api/user/{userId}/tou{type}{all}\".replace(\"{userId}\", userId)\n            .replace(\"{type}\", type ? (\"/\" + type) : \"\")\n            .replace(\"{all}\", (params.hasOwnProperty(\"all\") ? \"?all=true\" : \"\"));\n        this.sendRequest(url, \"GET\", userId, {sync: sync}, function(data) {\n            if (!data || data.error) {\n                var errorMessage = i18next.t(\"Server error occurred retrieving tou data.\");\n                $(\".get-tou-error\").html(errorMessage);\n                callback({\"error\": errorMessage});\n                return;\n            }\n            $(\".get-tou-error\").html(\"\");\n            callback(data);\n        });\n    },\n    \"postTermsByUser\": function(userId, toSend, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/user/\" + userId + \"/tou/accepted\", \"POST\", userId, {data: JSON.stringify(toSend)}, function(data) {\n            if (!data || data.error) {\n                $(\".post-tou-error\").html(i18next.t(\"Server error occurred saving terms of use information.\"));\n                callback(data);\n                return;\n            }\n            $(\".post-tou-error\").html(\"\");\n            callback(data);\n        });\n    },\n    \"postTerms\": function(toSend, targetField, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/tou/accepted\", \"POST\", null, {data: JSON.stringify(toSend), targetField: targetField}, function(data) {\n            if (!data || data.error) {\n                var errorMessage = i18next.t(\"Server error occurred saving terms of use information.\");\n                $(\".post-tou-error\").html(errorMessage);\n                callback({error: errorMessage});\n                return;\n            }\n            $(\".post-tou-error\").html(\"\");\n            callback(data);\n        });\n    },\n    \"accessUrl\": function(userId, sync, callback) {\n        callback = callback || function() {};\n        if (!userId) { callback({\"error\": i18next.t(\"User id is required.\")}); return false; }\n        this.sendRequest(\"/api/user/\" + userId + \"/access_url\", \"GET\", userId, {sync: sync}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback({url: data.access_url});\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving access url.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"invite\": function(userId, data, callback) {\n        callback = callback || function() {};\n        if (!data) { callback({\"error\": i18next.t(\"Invite data are required.\")}); return false; }\n        this.sendRequest(\"/invite\", \"POST\", userId, {\n            \"contentType\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n            \"data\": data,\n            \"dataType\": \"html\"\n        }, function(data) {\n            if (data) {\n                callback(data);\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"passwordReset\": function(userId, callback) {\n        callback = callback || function() {};\n        if (!userId) { callback({\"error\": i18next.t(\"User id is required.\")}); return false; }\n        this.sendRequest(\"/api/user/\" + userId + \"/password_reset\", \"POST\", userId, {\"contentType\": \"application/x-www-form-urlencoded; charset=UTF-8\"}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred sending password reset request.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"assessmentStatus\": function(userId, callback) {\n        callback = callback || function() {};\n        if (!userId) { callback({\"error\": i18next.t(\"User id is required.\")}); return false; }\n        this.sendRequest(\"/api/patient/\" + userId + \"/assessment-status\", \"GET\", userId, null, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving assessment status.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"updateAssessment\": function(userId, data, callback) {\n        callback = callback || function() {};\n        if (!userId) { callback({\"error\": i18next.t(\"User id is required.\")}); return false; }\n        if (!data) { callback({\"error\": i18next.t(\"Questionnaire response data is required.\")}); return false;}\n        this.sendRequest(\"/api/patient/\" + userId + \"/assessment\", \"PUT\", userId, {data: JSON.stringify(data)}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving assessment list.\")});\n                }\n\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"assessmentList\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/patient/\" + userId + \"/assessment\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving assessment list.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"assessmentReport\": function(userId, instrumentId, callback) {\n        callback = callback || function() {};\n        if (!userId || !instrumentId) {\n            callback({error: i18next.t(\"User id and instrument Id are required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/patient/\" + userId + \"/assessment/\" + instrumentId, \"GET\", userId, null, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving assessment report.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"getCurrentQB\": function(userId, completionDate, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        params = params || {};\n        this.sendRequest(\"/api/user/\" + userId + \"/questionnaire_bank\", \"GET\", userId, {data: {as_of_date: completionDate}, sync: params.sync}, function(data) {\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"Error occurred retrieving current questionnaire bank for user.\")});\n                return false;\n            }\n            callback(data);\n        });\n    },\n    \"patientReport\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/user_documents?document_type=PatientReport\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving patient report.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"setTablePreference\": function(userId, tableName, params, callback) {\n        callback = callback || function() {};\n        params = params || {};\n        if (!userId || !tableName) {\n            callback({error: \"User Id and table name is required for setting preference.\"});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/table_preferences/\" + tableName, \"PUT\", userId, {\"data\": params.data,\"sync\": params.sync}, function(data) {\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"Error occurred setting table preference.\")});\n                return false;\n            }\n            callback(data);\n        });\n    },\n    \"getTablePreference\": function(userId, tableName, params, callback) {\n        params = params || function() {};\n        callback = callback || function(){};\n        if (!userId) {\n            callback({error: \"User Id is required for setting preference.\"});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/table_preferences/\" + tableName, \"GET\", userId, params, function(data) {\n            if (data && data.error) {\n                callback({\"error\": i18next.t(\"Error occurred setting table preference.\")});\n                return;\n            }\n            callback(data);\n        });\n    },\n    \"emailLog\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/messages\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving email audit entries.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"auditLog\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/audit\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving audit log.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"setting\": function(key, userId, params, callback) {\n        callback = callback || function() {};\n        if (!key) {\n            callback({\"error\": i18next.t(\"configuration key is required.\")});\n            return false;\n        }\n        params = params || {};\n        this.sendRequest(\"/api/settings/\" + key, \"GET\", userId, {\n            \"sync\": params.sync\n        }, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving content for configuration key.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"deactivateUser\": function(userId, params, callback) {\n        callback = callback||function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User id is required\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId, \"DELETE\", userId, (params || {}), function(data) {\n            callback = callback||function() {};\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"Error occurred deactivating user.\")});\n                return;\n            }\n            callback(data);\n        });\n    },\n    \"reactivateUser\": function(userId, params, callback) {\n        callback = callback||function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User id is required\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/reactivate\", \"POST\", userId, (params || {}), function(data) {\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"Error occurred reactivating user.\")});\n                return;\n            }\n            callback(data);\n        });\n    },\n    \"getConfigurationByKey\": function(configVar, params, callback) {\n        callback = callback || function() {};\n        if (!configVar) {\n            callback({\"error\": i18next.t(\"configuration variable name is required.\")});\n            return false;\n        }\n        var sessionConfigKey = \"config_\" + configVar;\n        if (sessionStorage.getItem(sessionConfigKey)) {\n            var data = JSON.parse(sessionStorage.getItem(sessionConfigKey));\n            callback(data);\n            return true;\n        }\n        this.sendRequest(\"/api/settings/\" + configVar, \"GET\", null, (params || {}), function(data) {\n            if (!data) {\n                callback({\"error\": i18next.t(\"no data returned\")});\n                return;\n            }\n            callback(data);\n            sessionStorage.setItem(sessionConfigKey, JSON.stringify(data));\n        });\n    },\n    \"getConfiguration\": function(userId, params, callback) {\n        callback = callback || function() {};\n        var sessionConfigKey = \"settings_\" + userId;\n        if (sessionStorage.getItem(sessionConfigKey)) {\n            var data = JSON.parse(sessionStorage.getItem(sessionConfigKey));\n            callback(data);\n            return;\n        }\n        this.sendRequest(\"/api/settings\", \"GET\", userId, (params || {}), function(data) {\n            if (data) {\n                callback(data);\n                sessionStorage.setItem(sessionConfigKey, JSON.stringify(data));\n            } else {\n                callback({\n                    \"error\": i18next.t(\"no data returned\")\n                });\n            }\n        });\n\n    },\n    \"getEmailReady\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/email_ready\", \"GET\", userId, params, function(data) {\n            callback(data);\n        });\n    }\n};\n","import tnthAjax from \"./TnthAjax.js\";\nimport tnthDates from \"./TnthDate.js\";\nimport Utility from \"./Utility.js\";\nimport SYSTEM_IDENTIFIER_ENUM from \"./SYSTEM_IDENTIFIER_ENUM.js\";\nexport default (function() {\n    /*global $ i18next tnthAjax tnthDates SYSTEM_IDENTIFIER_ENUM */\n    var ProcApp = {\n        subjectId: \"\",\n        currentUserId: \"\",\n        dateFields: [\"procDay\", \"procMonth\", \"procYear\"],\n        entries: [],\n        initCounts: 0,\n        init: function(subjectId) { //entry method for initializing ProcApp object\n            var self = this;\n            this.initUserIds(subjectId, function() {\n                if (!self.subjectId) {\n                    self.setError(i18next.t(\"Subject id is required\")); //display error on UI\n                    return false;\n                }\n                self.getOptions(); //treatment options\n                self.getUserProcedures();\n                self.initFieldExtension();\n                self.initFieldEvents();\n            });\n        },\n        initViaTemplate: function() { //profile and coredata views\n            var self = this;\n            $(document).ready(function() {\n                var profileSubject = $(\"#profileProcSubjectId\");\n                if (!profileSubject.length) {\n                    return;\n                }\n                self.init(profileSubject.val());\n            });\n        },\n        initUserIds: function(subjectId, callback) {\n            callback = callback || function() {};\n            var self = this;\n            this.setSubjectId(subjectId);\n            tnthAjax.getCurrentUser(function(data) {\n                if (!data || data.error) {\n                    self.setError(i18next.t(\"error occurred setting current user id\"));\n                    callback();\n                    return;\n                }\n                self.setCurrentUserId(data.id);\n                if (!self.subjectId) {\n                    self.setSubjectId(data.id);\n                }\n                callback();\n            });\n        },\n        setSubjectId: function(id) {\n            this.subjectId = id;\n        },\n        setCurrentUserId: function(id) {\n            this.currentUserId = id;\n        },\n        setError: function(message) {\n            $(\"#procDateErrorContainer\").html(message||\"\");\n            if (message) {\n                $(\"#procedure_view\").html(\"<p class='text-muted'>\" + i18next.t(\"no data found\") + \"</p>\");\n            }\n        },\n        setTreatmentOptionsSelector: function(entries) {\n            if (!entries) {\n                return;\n            }\n            var optionsList = [];\n            optionsList.push(\"<option value=''>\" + i18next.t(\"Select\") + \"</option>\");\n            entries.forEach(function(item) {\n                optionsList.push(\"<option value='{value}' data-system='{system}'>{text}</option>\"\n                    .replace(\"{value}\", item.code)\n                    .replace(\"{text}\", item.text)\n                    .replace(\"{system}\", item.system));\n            });\n            $(\"#tnthproc\").append(optionsList.join(\"\"));\n            sessionStorage.setItem(\"treatmentOptions\", JSON.stringify(entries));\n        },\n        getOptions: function() {\n            if (!$(\"#tnthproc\").length) {\n                return;\n            }\n            if (sessionStorage.treatmentOptions) {\n                this.setTreatmentOptionsSelector(JSON.parse(sessionStorage.treatmentOptions));\n                return;\n            }\n            var self = this, url =  \"/patients/treatment-options\";\n            if (window.Worker) {\n                Utility.initWorker(url, {cache: true}, function(result) { /*global Utility */\n                    var data = JSON.parse(result);\n                    self.setTreatmentOptionsSelector(data.treatment_options);\n                });\n                return true;\n            }\n            $.ajax({\n                type: \"GET\",\n                url: url,\n                cache: true\n            }).done(function(data) {\n                self.setTreatmentOptionsSelector(data.treatment_options);\n            }).fail(function() {});\n        },\n        getCreatorDisplay: function(creator, defaultDisplay) {\n            if (!creator) {\n                return \"\";\n            }\n            if (String(creator) === this.currentUserId) {\n                return i18next.t(\"you\");\n            } else if (String(creator) === String(this.subjectId)) {\n                return i18next.t(\"this patient\");\n            }\n            return i18next.t(\"staff member\") + \", <span class='creator'>\" + defaultDisplay + \"</span>, \";\n        },\n        getDeleteInvocationDisplay: function() {\n            return $(\"#popoverHolder .popover__link\").html();\n        },\n        setNewEntry: function(newEntry, highestId){\n            if (!newEntry) {\n                return;\n            }\n            // If newEntry, then add icon to what we just added\n            $(\"#eventListtnthproc\").find(\"tr[data-id='\" + highestId + \"'] td.descriptionCell\").append(\"&nbsp; <small class='text-success'><i class='fa fa-check-square-o'></i> <em>\" + i18next.t(\"Added!\") + \"</em></small>\");\n        },\n        setProcedureRowsView: function() {\n            var content = \"\";\n            $(\"#userProcedures tr[data-id]\").each(function() {\n                $(this).find(\"td\").each(function() {\n                    if (!$(this).hasClass(\"list-cell\") && !$(this).hasClass(\"lastCell\")) {\n                        content += \"<div>\" + $(this).text() + \"</div>\"; //display content from database\n                    }\n                });\n            });\n            $(\"#procedure_view\").html(content || (\"<p class='text-muted'>\" + i18next.t(\"no data found\") + \"</p>\"));\n        },\n        setNoDataDisplay: function() {\n            $(\"#userProcedures\").html(\"<p id='noEvents'><em>\" + i18next.t(\"You haven't entered any management option yet.\") + \"</em></p>\").animate({\n                opacity: 1\n            });\n            $(\"#procedure_view\").html(\"<p class='text-muted'>\" + i18next.t(\"no data found\") + \"</p>\");\n            $(\"#pastTreatmentsContainer\").hide();\n            $(\"#eventListLoad\").fadeOut();\n        },\n        getUserProcedures: function(newEntry) {\n            if (!this.subjectId) {\n                return false;\n            }\n            var self = this;\n            $.ajax({\n                type: \"GET\",\n                url: \"/api/patient/\" + this.subjectId + \"/procedure\",\n                cache: false\n            }).done(function(data) {\n                if (data.entry.length === 0) {\n                    self.setNoDataDisplay();\n                    return false;\n                }\n                self.onDidGetProcedures(data.entry, newEntry);\n                $(\"#eventListLoad\").fadeOut();\n            }).fail(function() {\n                self.setError(i18next.t(\"error occurred retrieving user procedures\"));\n                $(\"#eventListLoad\").fadeOut();\n            });\n        },\n        initFieldEvents: function() {\n            var self = this;\n\n            this.convertToNumericField($(\"#procYear, #procDay\"));\n\n            setTimeout(function() {// Trigger eventInput on submit button\n                $(\"#tnthproc-submit\").eventInput();\n            }, 150);\n\n            $(\"#tnthproc\").on(\"change\", function() { // Update submit button when select changes\n                $(\"#tnthproc-submit\").attr({\"data-name\": $(this).val(), \"data-system\": $(this).find(\"option:selected\").attr(\"data-system\")});\n                self.checkSubmit(\"#tnthproc-submit\");\n            });\n\n            self.dateFields.forEach(function(fn) {\n                $(\"#\" + fn).on(\"keyup change\", function() {\n                    self.setDate();\n                });\n            });\n\n            $(\"body\").on(\"click\", \".data-delete\", function() { //new row remove button event at account creation\n                $(this).closest(\"tr\").remove();\n            });\n        },\n        initPopoverEvents: function() {\n            var self = this;\n            $(\"[data-toggle='popover']\").popover({trigger: \"click\", placement: \"top\", html: true, content: $(\"#popoverHolder .popover__content\").html()});\n            $(\"body\").on(\"click\", \".cancel-delete\", function() { //popover cancel button event\n                $(this).parents(\"div.popover\").prev(\"a.confirm-delete\").trigger(\"click\");\n            });\n\n            $(\"body\").on(\"click\", \".btn-delete\", function() { // popover delete button event - need to attach delete functionality to body b/c section gets reloaded\n                var procId = $(this).parents(\"tr\").attr(\"data-id\");\n                $(this).parents(\"tr\").fadeOut(\"slow\", function() {\n                    $(this).remove(); // Remove from list\n                    if ($(\"#eventListtnthproc tr\").length === 0) { //If there's no events left, add status msg back in\n                        self.setNoDataDisplay();\n                    }\n                });\n                tnthAjax.deleteProc(procId, false, false, function() { // Post delete to server\n                    self.getUserProcedures();\n                });\n                return false;\n            });\n        },\n        onDidGetProcedures: function(data, newEntry) {\n            this.populateProcedureRows(data, newEntry);\n            this.setProcedureRowsView();\n            this.setError(!data||data.error?i18next(\"Error occurred retrieving procedures\"): \"\");\n        },\n        populateProcedureRows: function(data, newEntry) {\n            data.sort(function(a, b) { // sort from newest to oldest\n                return new Date(b.resource.performedDateTime) - new Date(a.resource.performedDateTime);\n            });\n            var self = this, contentHTML = [], proceduresHtml = \"\", otherHtml = [];\n            // If we're adding a procedure in-page, then identify the highestId (most recent) so we can put \"added\" icon\n            var highestId = 0;\n            $.each(data, function(i, val) {\n                var code = val.resource.code.coding[0].code;\n                var procID = val.resource.id;\n                if ([SYSTEM_IDENTIFIER_ENUM.CANCER_TREATMENT_CODE, SYSTEM_IDENTIFIER_ENUM.NONE_TREATMENT_CODE].indexOf(code) !== -1) {\n                    //for entries marked as other procedure.  These are rendered as hidden fields and can be referenced when these entries are deleted.\n                    otherHtml.push(\"<input type='hidden' data-id='\" + procID + \"'  data-code='\" + code + \"' name='otherProcedures' >\");\n                    return true;\n                }\n                var creatorRef = (val.resource.meta.by.reference).match(/\\d+/)[0];  // just the user ID, not eg \"api/patient/46\";\n                var creator = self.getCreatorDisplay(creatorRef, val.resource.meta.by.display || creatorRef);\n                var dateEdited = new Date(val.resource.meta.lastUpdated);\n                var creationText = i18next.t(\"(data entered by %actor on %date)\").replace(\"%actor\", creator).replace(\"%date\", dateEdited.toLocaleDateString(\"en-GB\", {\n                    day: \"numeric\",\n                    month: \"short\",\n                    year: \"numeric\"\n                }));\n                var deleteInvocation = \"\";\n                if (String(creatorRef) === String(self.currentUserId)) {\n                    deleteInvocation = self.getDeleteInvocationDisplay();\n                }\n                contentHTML.push([\"<tr data-id='\" + procID + \"' data-code='\" + code + \"'>\",\n                    \"<td width='1%' valign='top' class='list-cell'>&#9679;</td>\",\n                    \"<td class='col-md-10 col-xs-10 descriptionCell' valign='top'>\" +\n                    (tnthDates.formatDateString(val.resource.performedDateTime)) + \"&nbsp;--&nbsp;\" + val.resource.code.coding[0].display +\n                    \"&nbsp;<em>\" + creationText +\n                    \"</em></td>\",\n                    \"<td class='col-md-2 col-xs-2 lastCell text-left' valign='top'>\" +\n                    deleteInvocation + \"</td>\",\n                    \"</tr>\"].join(\"\"));\n                highestId = Math.max(highestId, procID);\n            });\n            if (contentHTML) {\n                proceduresHtml = \"<table  class=\\\"table-responsive\\\" width=\\\"100%\\\" id=\\\"eventListtnthproc\\\" cellspacing=\\\"4\\\" cellpadding=\\\"6\\\">\";\n                proceduresHtml += contentHTML.join(\"\");\n                proceduresHtml += \"</table>\";\n                $(\"#userProcedures\").html(proceduresHtml);\n            }\n            this.setNewEntry(newEntry, highestId);\n            this.initPopoverEvents();\n\n            if ($(\"#eventListtnthproc tr\").length) {\n                $(\"#pastTreatmentsContainer\").fadeIn();\n            } else {\n                $(\"#pastTreatmentsContainer\").fadeOut();\n            }\n\n            $(\"#userProcedures\").append(otherHtml.join(\"\")); //other procedures\n        },\n        handleOtherProcedures: function() {\n            var otherProcElements = $(\"#userProcedures input[name='otherProcedures']\");\n            if (!otherProcElements.length) {\n                return false;\n            }\n            otherProcElements.each(function() {\n                var code = $(this).attr(\"data-code\"), procId = $(this).attr(\"data-id\");\n                if ([SYSTEM_IDENTIFIER_ENUM.CANCER_TREATMENT_CODE, SYSTEM_IDENTIFIER_ENUM.NONE_TREATMENT_CODE].indexOf(code) !== -1) { //remove any procedure on prostate or none treatment\n                    tnthAjax.deleteProc(procId);\n                }\n            });\n        },\n        setAccountCreationRowDisplay: function(procArray) {\n            procArray = procArray || {};\n            if ($(\"#pastTreatmentsContainer tr[data-code='\" + procArray[\"code\"] + \"'][data-performedDateTime='\" + procArray[\"performedDateTime\"] + \"']\").length === 0) {\n                var content = [];\n                content.push(\"<tr \");\n                var arrProcAttrs = [];\n                for (var item in procArray) { /*eslint guard-for-in: off, security/detect-object-injection: off */\n                    arrProcAttrs.push(\"data-\" + item + \"='\" + procArray[item] + \"'\");\n                }\n                content.push(arrProcAttrs.join(\" \"));\n                content.push(\">\");\n                content.push(\"<td>&#9679;</td><td>\" + procArray[\"display\"] + \"</td><td>\" + procArray[\"performedDateTime\"] + \"</td><td><a class='btn btn-default btn-xs data-delete'>\" + i18next.t(\"REMOVE\") + \"</a></td>\");\n                content.push(\"</tr>\");\n                $(\"#pastTreatmentsContainer\").append(content.join(\"\"));\n                setTimeout(function() {\n                    $(\"#pastTreatmentsContainer\").show();\n                }, 100);\n            }\n        },\n        initFieldExtension: function() {\n            var self = this;\n            $.fn.extend({\n                // Special type of select question - passes two values - the answer from - the select plus an associated date from a separate input\n                eventInput: function() {\n                    $(this).on(\"click\", function(e) {\n                        e.stopImmediatePropagation();\n                        $(this).attr(\"disabled\", true); // First disable button to prevent double-clicks\n                        var isAccountCreation = $(this).attr(\"data-account-create\");\n                        var subjectId = self.subjectId, selectVal = $(this).attr(\"data-name\"), selectDate = $(this).attr(\"data-date\"), selectSystem = $(this).attr(\"data-system\");\n                        if (!selectVal || !selectDate) {\n                            return false;\n                        }\n                        var selectFriendly = $(\"#tnthproc option:selected\").text();\n                        var procArray = {resourceType: \"Procedure\", performedDateTime: selectDate, system: selectSystem};\n                        /* eslint detect-object-injection: off*/\n                        if (isAccountCreation) {\n                            procArray[\"display\"] = selectFriendly;\n                            procArray[\"code\"] = selectVal;\n                            self.setAccountCreationRowDisplay(procArray);\n                        } else {\n                            self.handleOtherProcedures();\n                            var procID = [{\"code\": selectVal, \"display\": selectFriendly, system: selectSystem}];\n                            procArray[\"subject\"] = {\"reference\": \"Patient/\" + subjectId};\n                            procArray[\"code\"] = { \"coding\": procID};\n                            tnthAjax.postProc(subjectId, procArray);\n                            $(\"#eventListLoad\").show();\n                            setTimeout(function() { // Set a delay before getting updated list. Mostly to give user sense of progress/make it more obvious when the updated list loads\n                                self.getUserProcedures(true);\n                            }, 1800);\n                            $(\"#pastTreatmentsContainer\").hide();\n                        }\n                        self.reset();\n                        return false;\n                    });\n                }\n            }); // $.fn.extend({\n        },\n        reset: function() {\n            $(\"#tnthproc\").val(\"\"); //treatment select element\n            $(\"#procDay, #procMonth, #procYear\").val(\"\"); //date fields\n            $(\"#tnthproc-submit\").addClass(\"disabled\").attr({\"data-name\": \"\", \"data-date\": \"\", \"data-date-read\": \"\", \"data-system\": \"\"}); // Clear submit button\n        },\n        checkSubmit: function(btnId) { // Add/remove disabled from submit button\n            if (String($(btnId).attr(\"data-name\")) !== \"\" && String($(btnId).attr(\"data-date-read\")) !== \"\") {\n                $(btnId).removeClass(\"disabled\").removeAttr(\"disabled\");\n            } else {\n                $(btnId).addClass(\"disabled\").attr(\"disabled\", true);\n            }\n        },\n        convertToNumericField: function(field) {\n            if (\"ontouchstart\" in window || (typeof window.DocumentTouch !== \"undefined\" && document instanceof window.DocumentTouch)) {\n                $(field).each(function() {\n                    $(this).prop(\"type\", \"tel\");\n                });\n            }\n        },\n        isTouchScreen: function() {\n            return (\"ontouchstart\" in window || window.DocumentTouch && document instanceof window.DocumentTouch);\n        },\n        checkDate: function() {\n            var df = $(\"#procDay\"), mf =  $(\"#procMonth\"), yf = $(\"#procYear\");\n            var d = df.val(), y = yf.val();\n            var deField = $(\"#procDateErrorContainer\"), errorClass=\"error-message\";\n            if (!d || !/(19|20)\\d{2}/.test(y)) {\n                return false;\n            }\n            if (!tnthDates.validateDateInputFields(mf, df, yf, \"procDateErrorContainer\")) {\n                deField.text(i18next.t(\"The procedure date must be valid and in required format.\")).addClass(errorClass);\n                return false;\n            }\n            deField.text(\"\").removeClass(errorClass);\n            return true;\n        },\n        setDate: function() {\n            var isValid = this.checkDate();\n            if (isValid) {\n                var passedDate = this.dateFields.map(function(fn) {\n                    return $(\"#\" + fn).val();\n                }).join(\"/\");\n                $(\"#tnthproc-submit\").attr(\"data-date-read\", passedDate);\n                $(\"#tnthproc-submit\").attr(\"data-date\", tnthDates.swap_mm_dd(passedDate));\n            } else {\n                $(\"#tnthproc-submit\").attr({\"data-date-read\": \"\", \"data-date\": \"\"});\n            }\n            this.checkSubmit(\"#tnthproc-submit\");\n        }\n    };\n    return ProcApp;\n})(); /*eslint wrap-iife: off */\n"],"sourceRoot":""}