{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./static/js/src/modules/SYSTEM_IDENTIFIER_ENUM.js","webpack:///./static/js/src/modules/Utility.js","webpack:///./static/js/src/modules/TnthDate.js","webpack:///./static/js/src/modules/CLINICAL_CODE_ENUM.js","webpack:///./static/js/src/modules/TnthAjax.js","webpack:///./static/js/src/modules/OrgTool.js","webpack:///./static/js/src/admin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","external_study_id","external_site_id","practice_region","race","race_system","ethnicity","ethnicity_system","indigenous","timezone","language","language_system","shortname","SNOMED_SYS_URL","CLINICAL_SYS_URL","CANCER_TREATMENT_CODE","NONE_TREATMENT_CODE","getExportFileName","getUrlParameter","UtilityObj","Utility","this","requestAttempts","hasValue","val","String","showMain","$","css","visibility","-ms-filter","filter","-moz-opacity","-khtml-opacity","opacity","hideLoader","delay","time","hide","setTimeout","fadeOut","loader","show","document","getElementById","isDelayLoading","self","DELAY_LOADING","isTouchDevice","window","DocumentTouch","getIEVersion","match","navigator","userAgent","parseInt","newHttpRequest","url","params","callBack","xmlhttp","param","XDomainRequest","onload","responseText","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","status","error","open","setRequestHeader","cache","send","ajaxRequest","callback","i18next","defaults","type","contentType","timeout","extend","uself","ajax","done","data","fail","always","initWorker","callbackFunc","worker","Worker","postMessage","addEventListener","e","terminate","console","log","lineno","filename","message","workerAllowed","getRequestMethod","sendRequest","useWorker","LRKeyEvent","length","on","keyCode","toggleClass","getLoaderHTML","concat","convertToNumericField","field","each","prop","isString","obj","toString","disableHeaderFooterLinks","links","not","addClass","off","preventDefault","pad","isNaN","escapeHtml","text","replace","a","\"","&","'","/","<",">","containHtmlTags","test","prefix","Date","getDate","slice","getMonth","getFullYear","capitalize","str","txt","charAt","toUpperCase","substr","toLowerCase","restoreVis","loadingElement","mainElement","setAttribute","VueErrorHandling","Vue","config","errorHandler","err","vm","info","handler","current","$options","$parent","extension","results","RegExp","exec","location","search","decodeURIComponent","resetBrowserBackHistory","locationUrl","stateObject","title","historyDefined","history","pushState","href","forward","handlePostLogout","sessionStorage","getItem","orgin","removeItem","displaySystemOutageMessage","locale","MAINTENANCE_MESSAGE","MAINTENANCE_WINDOW","messageElement","querySelector","createElement","classList","add","appendChild","innerHTML","d1","d2","startDate","endDate","hoursTil","Math","floor","getTime","options","year","month","day","hour","minute","second","hour12","timeZoneName","displayStartDate","toLocaleString","displayEndDate","join","validateDateInputFields","tnthDates","y","errorFieldId","errorField","today","date","html","setHours","swap_mm_dd","currentDate","splitDate","split","convertMonthNumeric","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","convertMonthString","1","2","3","4","5","6","7","8","9","10","11","12","isDate","displayDateString","getDateDiff","dateToCalc","dateTime","isValidDefaultDateFormat","dArray","trim","dt","isDateObj","isValidDate","errorMsg","getDateObj","convertedDate","getConvertedDate","givenDate","getGivenDate","h","mi","dateObj","formatDateString","dateString","format","hours","minutes","seconds","nd","IOSDateTest","getHours","getMinutes","getSeconds","convertToLocalTime","newDate","getTimezoneOffset","offset","getDateWithTimeZone","dObj","utcDate","getTodayDateObj","td","tm","ty","th","tmi","ts","gmtToday","displayDay","displayMonth","displayYear","displayHour","displayMinute","displaySecond","gmtDate","dateValidator","restrictToPresent","errorMessage","iy","im","iid","CLINICAL_CODE_ENUM","biopsy","code","display","pca_diag","pca_localized","beforeSend","ajaxSetup","xhr","settings","crossDomain","method","userId","defaultParams","attempts","max_attempts","dataType","sync","async","fieldHelper","FieldLoaderHelper","targetField","showLoader","result","JSON","parse","sendError","showError","showUpdate","headers","cache-control","expires","pragma","stringify","reportError","page_url","subject_id","delayDuration","el","attr","__timeout","containerId","successField","loadingField","removeClass","animate","getCurrentUser","currentUser","id","setItem","getStillNeededCoreData","entry_method","__url","getRequiredCoreData","required","getOptionalCoreData","sessionStorageKey","getPortalFooter","getOrgs","demoOrgsData","getConsent","setConsent","hasConsent","org","testPatient","user_id","organization_id","agreement_url","agreementUrl","staff_editable","include_in_reports","send_reminders","acceptance_date","deleteConsent","consented","getAllValidConsent","arrExcludedOrgIds","exclude","arrConsents","grep","orgId","eOrg","forEach","withdrawConsent","arrConsent","consent_agreements","item","expired","deleted","consentedOrgIds","map","filterStatus","getDemo","demoDataKey","clearDemoSessionData","putDemo","toSend","getLocale","communication","hasTreatment","entry","sortedArray","sort","b","resource","meta","lastUpdated","found","resourceItemCode","coding","system","procId","SYSTEM_IDENTIFIER_ENUM","getTreatment","postTreatment","started","treatmentDate","deleteTreatment","procID","procArray","subject","reference","performedDateTime","postProc","treatmentData","deleteProc","getProc","newEntry","procedureId","getRoleList","getRoles","removeCachedRoles","putRoles","deleteRoles","getClinical","getObservationId","obId","_code","content","postClinical","toCall","obsCode","obsArray","issued","issuedDate","valueQuantity","units","performer","obsId","getTermsUrl","getInstrumentsList","qList","organization","orgID","questionnaires","q","inArray","questionnaire","push","getTerms","postTermsByUser","postTerms","accessUrl","access_url","invite","passwordReset","assessmentStatus","updateAssessment","assessmentList","assessmentReport","instrumentId","getCurrentQB","completionDate","as_of_date","patientReport","setTablePreference","tableName","getTablePreference","emailLog","auditLog","setting","deactivateUser","reactivateUser","getConfigurationByKey","configVar","sessionConfigKey","getConfiguration","getEmailReady","OrgObj","OrgTool","_SYSTEM_IDENTIFIER_ENUM_js__WEBPACK_IMPORTED_MODULE_0__","_TnthAjax_js__WEBPACK_IMPORTED_MODULE_1__","orgName","parentOrg","children","parentOrgId","isTopLevel","TOP_LEVEL_ORGS","orgsList","initialized","init","orgsData","populateOrgsList","tnthAjax","onLoaded","doPopulateUI","setUserId","populateUI","getUserId","array","Array","isArray","index","getElementParentOrg","closest","getTopLevelOrgs","ml","getOrgsList","orgList","getOrgName","filterOrgs","leafOrgs","allChildrenHidden","subOrgs","find","allSubOrgsHidden","isVisible","is","ip","findOrg","items","keys","parentId","partOf","pop","identifier","getShortName","shortName","orgItem","orgsHTML","container","parentContent","getState","parentOrgsArray","orgA","orgB","parentDiv","parentFragment","createDocumentFragment","parentOrgItem","orgShortName","parentState","parentOrgName","childClinic","_parentOrgId","_parentOrg","_isTopLevel","state","topLevelOrgId","getTopLevelParentOrg","attrObj","dataAttributes","containerClass","textClass","parentOrgContainer","append","getSelectedOrgTopLevelParentOrg","getSelectedOrg","getUserTopLevelParentOrgs","uo","parentList","currentOrg","currentOrgItem","getChildOrgs","orgs","mainOrgsList","childOrgs","getHereBelowOrgs","userOrgs","here_below_orgs","selectedOrg","co","cOrgs","morphPatientOrgs","checkedOrgs","_modules_TnthAjax_js__WEBPACK_IMPORTED_MODULE_0__","_modules_TnthDate_js__WEBPACK_IMPORTED_MODULE_1__","_modules_Utility_js__WEBPACK_IMPORTED_MODULE_2__","_modules_OrgTool_js__WEBPACK_IMPORTED_MODULE_3__","AdminObj","errorCaptured","Error","Component","dataError","errorElement","warn","created","injectDependencies","getOrgTool","mounted","preConfig","rowLinkEvent","setColumnSelections","setTableFilters","initTableEvents","initOrgsList","handleDisableFields","handleDeletedUsersVis","setRowItemEvent","handleAffiliatedUIVis","addFilterPlaceHolders","handleDownloadModal","fadeLoader","configured","initIntervalId","sortFilterEnabled","showDeletedUsers","isAdmin","userRoles","topLevelOrgs","orgTool","orgsSelector","selectAll","clearAll","close","ROW_ID_PREFIX","tableIdentifier","popoverEventInitiated","dependencies","tableConfig","formatShowingRows","pageFrom","pageTo","totalRows","rowInfo","formatRecordsPerPage","pageNumber","formatToggle","formatColumns","formatAllRows","formatSearch","formatNoMatches","formatExport","currentTablePreference","errorCollection","demo","instruments","list","selected","patientReports","loading","methods","portalModules","getDependency","setOrgsMenuHeight","padding","height","adminTable","orgMenu","calculatedHeight","clearFilterButtons","setOrgsSelector","alert","setIdentifier","setSortFilterProp","configTable","adminTableContainer","hasClass","sortObj","getDefaultTablePreference","sortName","sort_field","sortOrder","sort_order","filterBy","exportOptions","fileName","bootstrapTable","getTableConfigOptions","resetRowVisByActivationStatus","isOnScreen","scrollTop","top","stop","order","popover","setShowDeletedUsersFlag","activationstatus","modal","stopPropagation","getReportModal","documentDataType","role","checked","arrRoles","roles","placement","parent","undelegate","handleMedidataRave","MEDIDATA_RAVE_ORG","setCreateAccountVis","checkAdmin","createAccountElements","getUserRoles","setUserRoles","indexOf","setUserOrgs","careProvider","getUserOrgs","setTopLevelOrgs","hbOrgs","initOrgsFilter","initOrgsEvent","siteFilterApplied","filters","orgs_filter_control","orgFields","fi","fa","oself","ofields","target","isChecked","reload","clearOrgsSelection","trigger","getInstrumentList","instrumentList","parentOrgList","instrumentItems","instrumentContainer","setInstruments","event","setDataType","showMessage","hasInstrumentsSelection","setFilter","prefData","uid","column_selections","class","column","fname","tagName","sortField","sortedField","has","sortedOrder","__filters","nodeName","selectedOrgs","patientId","existingItems","count","uploaded_at","contributor","download","delegate","click","row","deactivationEnabled","isDeactivatedRow","handleReactivatedRow","hideRow","handleDeactivatedRow","getRowData","rowData","handleDeactivatedRowVis","handleReactivatedRowVis","updateFieldData","getRowIndex","reinit","allowReactivate","remove"],"mappings":"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","file":"admin.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","export default {\n    \"external_study_id\": \"http://us.truenth.org/identity-codes/external-study-id\",\n    \"external_site_id\": \"http://us.truenth.org/identity-codes/external-site-id\",\n    \"practice_region\": \"http://us.truenth.org/identity-codes/practice-region\",\n    \"race\": \"http://hl7.org/fhir/StructureDefinition/us-core-race\",\n    \"race_system\": \"http://hl7.org/fhir/v3/Race\",\n    \"ethnicity\": \"http://hl7.org/fhir/StructureDefinition/us-core-ethnicity\",\n    \"ethnicity_system\": \"http://hl7.org/fhir/v3/Ethnicity\",\n    \"indigenous\": \"http://us.truenth.org/fhir/StructureDefinition/AU-NHHD-METeOR-id-291036\",\n    \"timezone\": \"http://hl7.org/fhir/StructureDefinition/user-timezone\",\n    \"language\": \"http://hl7.org/fhir/valueset/languages\",\n    \"language_system\": \"urn:ietf:bcp:47\",\n    \"shortname\": \"http://us.truenth.org/identity-codes/shortname\",\n    SNOMED_SYS_URL: \"http://snomed.info/sct\",\n    CLINICAL_SYS_URL: \"http://us.truenth.org/clinical-codes\",\n    CANCER_TREATMENT_CODE: \"118877007\",\n    NONE_TREATMENT_CODE: \"999\"\n};\n\n","var Utility = (function() {\n    var UtilityObj = function() { /*global $ */\n        this.requestAttempts = 0;\n    };\n    UtilityObj.prototype.hasValue = function(val) {\n        return String(val) !== \"null\" && String(val) !== \"\" && String(val) !== \"undefined\";\n    };\n    UtilityObj.prototype.showMain = function() {\n        $(\"#mainHolder\").css({\n            \"visibility\": \"visible\",\n            \"-ms-filter\": \"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\",\n            \"filter\": \"alpha(opacity=100)\",\n            \"-moz-opacity\": 1,\n            \"-khtml-opacity\": 1,\n            \"opacity\": 1\n        });\n    };\n    UtilityObj.prototype.hideLoader = function(delay, time) {\n        if (delay) {\n            $(\"#loadingIndicator\").hide();\n            return;\n        }\n        setTimeout(function() {\n            $(\"#loadingIndicator\").fadeOut();\n        }, time || 200);\n    };\n    UtilityObj.prototype.loader = function(show) {\n        //landing page\n        if (document.getElementById(\"fullSizeContainer\")) {\n            this.hideLoader();\n            this.showMain();\n            return false;\n        }\n        if (show) {\n            $(\"#loadingIndicator\").show();\n            return;\n        }\n        if (!this.isDelayLoading()) {\n            var self = this;\n            setTimeout(function() {\n                self.showMain();\n            }, 100);\n            this.hideLoader(true, 350);\n        }\n    };\n    UtilityObj.prototype.isDelayLoading = function() { /*global DELAY_LOADING*/\n        return (typeof DELAY_LOADING !== \"undefined\") && DELAY_LOADING;\n    };\n    UtilityObj.prototype.isTouchDevice = function() {\n        return true === (\"ontouchstart\" in window || window.DocumentTouch && document instanceof window.DocumentTouch);\n    };\n    UtilityObj.prototype.getIEVersion = function() {\n        var match = navigator.userAgent.match(/(?:MSIE |Trident\\/.*; rv:)(\\d+)/);\n        return match ? parseInt(match[1]) : false;\n    };\n    UtilityObj.prototype.newHttpRequest = function(url, params, callBack) { /* note: this function supports older version of IE (version <= 9) - jquery ajax calls errored in older IE version*/\n        this.requestAttempts++;\n        var xmlhttp, self = this;\n        callBack = callBack || function() {};\n        if (window.XDomainRequest) { /*global XDomainRequest */\n            xmlhttp = new XDomainRequest();\n            xmlhttp.onload = function() {\n                callBack(xmlhttp.responseText);\n            };\n        } else if (window.XMLHttpRequest) {\n            xmlhttp = new XMLHttpRequest();\n        } else {\n            xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\"); /*global ActiveXObject */\n        }\n        xmlhttp.onreadystatechange = function() {\n            if (xmlhttp.readyState === 4) {\n                if (xmlhttp.status === 200) {\n                    callBack(xmlhttp.responseText);\n                    self.requestAttempts = 0;\n                    return;\n                }\n                if (self.requestAttempts < 3) {\n                    setTimeout(function() {\n                        self.newHttpRequest(url, params, callBack);\n                    }, 3000);\n                } else {\n                    callBack({error: xmlhttp.responseText});\n                    self.loader();\n                    self.requestAttempts = 0;\n                }\n            }\n        };\n        params = params || {};\n        xmlhttp.open(\"GET\", url, true);\n        for (var param in params) {\n            if (params.hasOwnProperty(param)) {\n                xmlhttp.setRequestHeader(param, params[param]);\n            }\n        }\n        if (!params.cache) {\n            xmlhttp.setRequestHeader(\"cache-control\", \"no-cache\");\n            xmlhttp.setRequestHeader(\"expires\", \"-1\");\n            xmlhttp.setRequestHeader(\"pragma\", \"no-cache\"); //legacy HTTP 1.0 servers and IE support\n        }\n        xmlhttp.send();\n    };\n    UtilityObj.prototype.ajaxRequest = function(url, params, callback) {\n        callback = callback || function() {};\n        if (!url) {\n            callback({error: i18next.t(\"Url is required.\")});\n            return false;\n        }\n        var defaults = {\n            url: url,\n            type: \"GET\",\n            contentType: \"text/plain\",\n            timeout: 5000,\n            cache: false\n        };\n        params = params || defaults;\n        params = $.extend({}, defaults, params);\n        this.requestAttempts++;\n        var uself = this;\n        $.ajax(params).done(function(data) {\n            callback(data);\n            uself.requestAttempts = 0;\n        }).fail(function() {\n            if (uself.requestAttempts <= 3) {\n                setTimeout(function() { uself.ajaxRequest(url, params, callback);}, 3000);\n            } else {\n                callback({error: i18next.t(\"Error occurred processing request\")}); /*global i18next */\n                uself.requestAttempts = 0;\n                uself.loader();\n            }\n        }).always(function() {\n            uself.loader();\n        });\n    };\n    UtilityObj.prototype.initWorker = function(url, params, callbackFunc) {\n        var worker = new Worker(\"/static/js/ajaxWorker.js\");\n        var self = this;\n        worker.postMessage({url: url, params: params});\n        worker.addEventListener(\"message\", function(e) {\n            (callbackFunc).call(self, e.data);\n            worker.terminate();\n        }, false);\n        worker.addEventListener(\"error\", function(e) {\n            console.log(\"Worker runtime error: Line \", e.lineno, \" in \", e.filename, \": \", e.message);\n            worker.terminate();\n        }, false);\n    };\n    UtilityObj.prototype.workerAllowed = function() {\n        return window.Worker && !this.isTouchDevice();\n    };\n    UtilityObj.prototype.getRequestMethod = function() {\n        return this.getIEVersion() ? this.newHttpRequest: this.ajaxRequest; //NOTE JQuery ajax request does not work for IE <= 9\n    };\n    UtilityObj.prototype.sendRequest = function(url, params, callback) { /*generic function for sending GET ajax request, make use of worker if possible */\n        params = params || {};\n        if (params.useWorker && this.workerAllowed()) {\n            this.initWorker(url, params, callback);\n            return true;\n        }\n        var useFunc = this.getRequestMethod();\n        (useFunc).call(this, url, params, function(data) { (callback).call(this, data);});\n    };\n    UtilityObj.prototype.LRKeyEvent = function() {\n        var LR_INVOKE_KEYCODE = 187;\n        if ($(\".button--LR\").length > 0) {\n            $(\"html\").on(\"keydown\", function(e) {\n                if (parseInt(e.keyCode) === parseInt(LR_INVOKE_KEYCODE)) {\n                    $(\".button--LR\").toggleClass(\"data-show\");\n                }\n            });\n        }\n    };\n    UtilityObj.prototype.getLoaderHTML = function(message) {\n        return `<div class=\"loading-message-indicator\"><i class=\"fa fa-spinner fa-spin fa-2x\"></i>${message ? \"&nbsp;\" + message : \"\"}</div>`;\n    };\n    UtilityObj.prototype.convertToNumericField = function(field) {\n        if (!field) {\n            return;\n        }\n        if (this.isTouchDevice()) {\n            field.each(function() {\n                $(this).prop(\"type\", \"tel\");\n            });\n        }\n    };\n    UtilityObj.prototype.isString = function(obj) {\n        return (Object.prototype.toString.call(obj) === \"[object String]\");\n    };\n    UtilityObj.prototype.disableHeaderFooterLinks = function() {\n        var links = $(\"#tnthNavWrapper a, #homeFooter a\").not(\"a[href*='logout']\").not(\"a.required-link\").not(\"a.home-link\");\n        links.addClass(\"disabled\");\n        links.prop(\"onclick\", null).off(\"click\");\n        links.on(\"click\", function(e) {\n            e.preventDefault();\n            return false;\n        });\n    };\n    UtilityObj.prototype.pad = function(n) {\n        n = parseInt(n);\n        return (!isNaN(n) && n < 10) ? \"0\" + n : n;\n    };\n    UtilityObj.prototype.escapeHtml = function(text) {\n        \"use strict\";\n        if (text === null || text !== \"undefined\" || String(text).length === 0) {\n            return text;\n        }\n        return text.replace(/[\\\"&'\\/<>]/g, function(a) {\n            return {\n                '\"': \"&quot;\",\n                \"&\": \"&amp;\",\n                \"'\": \"&#39;\",\n                \"/\": \"&#47;\",\n                \"<\": \"&lt;\",\n                \">\": \"&gt;\"\n            }[a];\n        });\n    };\n    UtilityObj.prototype.containHtmlTags = function(text) {\n        if (!text) {\n            return false;\n        }\n        return /[<>]/.test(text);\n    };\n    UtilityObj.prototype.getExportFileName = function(prefix) {\n        var d = new Date();\n        return (prefix ? prefix : \"ExportList_\") + (\"00\" + d.getDate()).slice(-2) + (\"00\" + (d.getMonth() + 1)).slice(-2) + d.getFullYear();\n    };\n    UtilityObj.prototype.capitalize = function(str) {\n        return str.replace(/\\w\\S*/g, function(txt) {\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n        });\n    };\n    UtilityObj.prototype.restoreVis = function() {\n        var loadingElement = document.getElementById(\"loadingIndicator\"), mainElement = document.getElementById(\"mainHolder\");\n        if (loadingElement) { loadingElement.setAttribute(\"style\", \"display:none; visibility:hidden;\"); }\n        if (mainElement) { mainElement.setAttribute(\"style\", \"visibility:visible;-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=100)';filter:alpha(opacity=100); -moz-opacity:1; -khtml-opacity:1; opacity:1\"); }\n    };\n    UtilityObj.prototype.VueErrorHandling = function() {\n        if (typeof Vue === \"undefined\") { return false; } /*global Vue */\n        var self = this;\n        Vue.config.errorHandler = function (err, vm, info)  {\n            var handler, current = vm;\n            if (vm.$options.errorHandler) {\n                handler = vm.$options.errorHandler;\n            } else {\n                while (!handler && current.$parent) {\n                    current = current.$parent;\n                    handler = current.$options.errorHandler;\n                }\n            }\n            self.restoreVis();\n            if (handler) {\n                handler.call(current, err, vm, info);\n                return;\n            }\n            console.log(err);\n        };\n    };\n    UtilityObj.prototype.extend = function(obj, extension) { // Extend an object with an extension\n        for (var key in extension) {\n            if (extension.hasOwnProperty(key)) {\n                obj[key] = extension[key];\n            }\n        }\n        return obj;\n    };\n    UtilityObj.prototype.getUrlParameter = function(name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n        var results = regex.exec(location.search);\n        return results === null ? \"\" : decodeURIComponent(results[1]);\n    };\n    UtilityObj.prototype.resetBrowserBackHistory = function(locationUrl, stateObject, title) {\n        var historyDefined = typeof history !== \"undefined\" && history.pushState;\n        locationUrl = locationUrl || location.href;\n        if (historyDefined) {\n            history.pushState(stateObject, title, locationUrl);\n        }\n        window.addEventListener(\"popstate\", function() {\n            if (historyDefined) {\n                history.pushState(stateObject, title, locationUrl);\n            } else {\n                window.history.forward(1);\n            }\n        });\n    };\n    UtilityObj.prototype.handlePostLogout = function() {\n        if (typeof sessionStorage === \"undefined\") {\n            return false;\n        }\n        if (sessionStorage.getItem(\"logout\")) {\n            this.resetBrowserBackHistory(location.orgin, \"logout\"); /* global resetBrowserBackHistory */\n            sessionStorage.removeItem(\"logout\");\n        }\n    };\n    UtilityObj.prototype.displaySystemOutageMessage = function(locale) {\n        locale = locale || \"en-us\";\n        locale = locale.replace(\"_\", \"-\");\n        var systemMaintenanceElId = \"systemMaintenanceContainer\";\n        if (!document.getElementById(systemMaintenanceElId)) { //check for system outage maintenance message element\n            return;\n        }\n        var self = this;\n        this.ajaxRequest(\"api/settings\", {contentType: \"application/json; charset=utf-8\"}, function(data) {\n            if (!data || !(data.MAINTENANCE_MESSAGE || data.MAINTENANCE_WINDOW)) {\n                return false;\n            }\n            var messageElement = document.querySelector(\".message-container\");\n            if (!messageElement) {\n                messageElement = document.createElement(\"div\");\n                messageElement.classList.add(\"message-container\");\n                document.getElementById(systemMaintenanceElId).appendChild(messageElement);\n            }\n            if (data.MAINTENANCE_MESSAGE) {\n                messageElement.innerHTML = self.escapeHtml(data.MAINTENANCE_MESSAGE);\n                return;\n            }\n            if (!data.MAINTENANCE_WINDOW || !data.MAINTENANCE_WINDOW.length) {\n                return;\n            }\n            //use maintenance window specified in config to compose the message, assuming in following example format: [\"2018-11-02T12:00:00Z\", \"2018-11-02T18:00:00Z\"], dates in system ISO format\n            var hoursDiff = function(d1, d2) {\n                if (!d1 || !d2) {\n                    return 0;\n                }\n                return Math.floor(((d2.getTime() - d1.getTime())/ (1000 * 60 * 60)) % 24);\n            };\n            //date object automatically convert iso date/time to local date/time as it assumes a timezone of UTC if date in ISO format\n            var startDate = new Date(data.MAINTENANCE_WINDOW[0]), endDate = new Date(data.MAINTENANCE_WINDOW[1]);\n            var hoursTil = hoursDiff(new Date(), startDate);\n            if (hoursTil < 0 || isNaN(hoursTil)) { //maintenance window has passed\n                document.getElementById(systemMaintenanceElId).classList.add(\"tnth-hide\");\n                return;\n            }\n            /*global i18next */\n            //construct message based on maintenance window\n            try {\n                var options = {year: \"numeric\", month: \"long\", day: \"numeric\", hour: \"numeric\", minute: \"numeric\", second: \"numeric\", hour12: true, timeZoneName: \"short\"};\n                var displayStartDate = startDate.toLocaleString(locale,options).replace(/[,]/g, \" \"); //display language-sensitive representation of date/time\n                var displayEndDate = endDate.toLocaleString(locale, options).replace(/[,]/g, \" \");\n                var message = [\"<div>\" + i18next.t(\"Hi there.\") + \"</div>\",\n                    \"<div>\" + i18next.t(\"TrueNTH will be down for website maintenance starting <b>{startdate}</b>. This should last until <b>{enddate}</b>.\".replace(\"{startdate}\", displayStartDate).replace(\"{enddate}\", displayEndDate)) + \"</div>\",\n                    \"<div>\" + i18next.t(\"Thanks for your patience while we upgrade our site.\") + \"</div>\"].join(\"\");\n                messageElement.innerHTML = self.escapeHtml(message);\n            } catch(e) {\n                console.log(\"Error occurred converting system outage date/time \", e); /*eslint no-console:off */\n                document.getElementById(systemMaintenanceElId).classList.add(\"tnth-hide\");\n            }\n        });\n    };\n    return new UtilityObj();\n})();\nexport default Utility;\nexport var getExportFileName = Utility.getExportFileName; /* expose common functions */\nexport var getUrlParameter= Utility.getUrlParameter;\n","var tnthDates =  { /*global i18next */\n    /** validateDateInputFields  check whether the date is a sensible date in month, day and year fields.\n     ** params: month, day and year fields and error field ID\n     ** NOTE this can replace the custom validation check; hook this up to the onchange/blur event of birthday field\n     ** work better in conjunction with HTML5 native validation check on the field e.g. required, pattern match  ***/\n    \"validateDateInputFields\": function(m, d, y, errorFieldId) {\n        if (!m || !d || !y) {\n            return false;\n        }\n        m = parseInt(m);\n        d = parseInt(d);\n        y = parseInt(y);\n        var errorField = $(\"#\" + errorFieldId);\n        if (!(isNaN(m)) && !(isNaN(d)) && !(isNaN(y))) {\n            var today = new Date();\n            var date = new Date(y, m - 1, d);\n            if (!(date.getFullYear() === y && (date.getMonth() + 1) === m && date.getDate() === d)) { // Check to see if this is a real date\n                errorField.html(i18next.t(\"Invalid date. Please try again.\")).show();\n                return false;\n            } else if (date.setHours(0, 0, 0, 0) > today.setHours(0, 0, 0, 0)) {\n                errorField.html(i18next.t(\"Date must not be in the future. Please try again.\")).show();\n                return false; //shouldn't be in the future\n            } else if (y < 1900) {\n                errorField.html(i18next.t(\"Date must not be before 1900. Please try again.\")).show();\n                return false;\n            }\n            errorField.html(\"\").hide();\n            return true;\n        }\n        return false;\n    },\n    /**\n     * Simply swaps: a/b/cdef to b/a/cdef (single & double digit permutations accepted...)\n     * Does not check for valid dates on input or output!\n     * @param currentDate string eg 7/4/1976\n     * @returns string eg 4/7/1976\n     */\n    \"swap_mm_dd\": function(currentDate) {\n        var splitDate = currentDate.split(\"/\");\n        return splitDate[1] + \"/\" + splitDate[0] + \"/\" + splitDate[2];\n    },\n    \"convertMonthNumeric\": function(month) { //Convert month string to numeric\n        if (!month) { return \"\"; }\n        else {\n            var month_map = {\"jan\": 1,\"feb\": 2,\"mar\": 3,\"apr\": 4,\"may\": 5,\"jun\": 6,\"jul\": 7,\"aug\": 8,\"sep\": 9,\"oct\": 10,\"nov\": 11,\"dec\": 12};\n            var m = month_map[month.toLowerCase()];\n            return m ? m : \"\";\n        }\n    },\n    \"convertMonthString\": function(month) { //Convert month string to text\n        if (!month) {\n            return \"\";\n        } else {\n            var numeric_month_map = {1: \"Jan\",2: \"Feb\",3: \"Mar\",4: \"Apr\",5: \"May\",6: \"Jun\",7: \"Jul\",8: \"Aug\",9: \"Sep\",10: \"Oct\",11: \"Nov\",12: \"Dec\"};\n            var m = numeric_month_map[parseInt(month)];\n            return m ? m : \"\";\n        }\n    },\n    \"isDate\": function(obj) {\n        return Object.prototype.toString.call(obj) === \"[object Date]\" && !isNaN(obj.getTime());\n    },\n    \"displayDateString\": function(m, d, y) {\n        var s = \"\";\n        s += (d ? d : \"\");\n        if (m) {\n            s += (s ? \" \" : \"\") + this.convertMonthString(m);\n        }\n        if (y) {\n            s += (s ? \" \" : \"\") + y;\n        }\n        return s;\n    },\n    /***\n     * Calculates number of days between two dates. Used in mPOWEr for surgery/discharge\n     * @param startDate - required. Assumes YYYY-MM-DD. This is typically the date of surgery or discharge\n     * @param dateToCalc - optional. If empty, then assumes today's date\n     * @returns number of days\n     */\n    \"getDateDiff\": function(startDate, dateToCalc) {\n        if (!startDate) {\n            return 0;\n        }\n        var a = startDate.split(/[^0-9]/);\n        var dateTime = new Date(a[0], a[1] - 1, a[2]).getTime();\n        var d;\n        if (dateToCalc) {\n            var c = dateToCalc.split(/[^0-9]/);\n            d = new Date(c[0], c[1] - 1, c[2]).getTime();\n        } else { // If no baseDate, then use today to find the number of days between dateToCalc and today\n            d = new Date().getTime();\n        }\n        return Math.floor((d - dateTime) / (1000 * 60 * 60 * 24)); // Round down to floor so we don't add an extra day if session is 12+ hours into the day\n    },\n    \"isValidDefaultDateFormat\": function(date, errorField) {\n        if (!date || date.length < 10) { return false; }\n        var dArray = $.trim(date).split(\" \");\n        if (dArray.length < 3) { return false; }\n        var day = parseInt(dArray[0])+\"\", month = dArray[1], year = dArray[2];\n        if (day.length < 1 || month.length < 3 || year.length < 4) { return false; }\n        if (!/(0)?[1-9]|1\\d|2\\d|3[01]/.test(day)) { return false; }\n        if (!/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/i.test(month)) { return false; }\n        if (!/(19|20)\\d{2}/.test(year)) { return false; }\n        var dt = new Date(date);\n        if (!this.isDateObj(dt)) { return false; }\n        else if (!this.isValidDate(year, this.convertMonthNumeric(month), day)) {\n            return false;\n        } else {\n            var today = new Date(),\n                errorMsg = \"\";\n            if (dt.getFullYear() < 1900) { errorMsg = \"Year must be after 1900\"; }\n            // Only allow if date is before today\n            if (dt.setHours(0, 0, 0, 0) > today.setHours(0, 0, 0, 0)) {\n                errorMsg = \"The date must not be in the future.\";\n            }\n            if (errorMsg) {\n                $(errorField).text(errorMsg);\n                return false;\n            } else {\n                $(errorField).text(\"\");\n                return true;\n            }\n        }\n    },\n    \"isDateObj\": function(d) {\n        return Object.prototype.toString.call(d) === \"[object Date]\" && !isNaN(d.getTime());\n    },\n    \"isValidDate\": function(y, m, d) {\n        var date = this.getDateObj(y, m, d), convertedDate = this.getConvertedDate(date), givenDate = this.getGivenDate(y, m, d);\n        return String(givenDate) === String(convertedDate);\n    },\n    /*\n     * method does not check for valid numbers, will return NaN if conversion failed\n     */\n    \"getDateObj\": function(y, m, d, h, mi, s) {\n        h = h || 0;\n        mi = mi || 0;\n        s = s || 0;\n        return new Date(parseInt(y), parseInt(m) - 1, parseInt(d), parseInt(h), parseInt(mi), parseInt(s));\n    },\n    \"getConvertedDate\": function(dateObj) {\n        if (dateObj && this.isDateObj(dateObj)) { return \"\" + dateObj.getFullYear() + (dateObj.getMonth() + 1) + dateObj.getDate(); }\n        else { return \"\"; }\n    },\n    \"getGivenDate\": function(y, m, d) {\n        return \"\" + y + m + d;\n    },\n    \"formatDateString\": function(dateString, format) { //NB For dateString in ISO-8601 format date as returned from server e.g. '2011-06-29T16:52:48'\n        if (dateString) {\n            /* IOS (8601) date format test */\n            var IOSDateTest = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n            var d = new Date(dateString);\n            var day, month, year, hours, minutes, seconds, nd;\n            if (!IOSDateTest && !isNaN(d) && !this.isDateObj(d)) { //note instantiating ios formatted date using Date object resulted in error in IE\n                return \"\";\n            }\n            if (IOSDateTest.test(dateString)) {\n                //IOS date, no need to convert again to date object, just parse it as is\n                //issue when passing it into Date object, the output date is inconsistent across from browsers\n                var dArray = $.trim($.trim(dateString).replace(/[\\.TZ:\\-]/gi, \" \")).split(\" \");\n                year = dArray[0];\n                month = dArray[1];\n                day = dArray[2];\n                hours = dArray[3] || \"0\";\n                minutes = dArray[4] || \"0\";\n                seconds = dArray[5] || \"0\";\n            } else {\n                day = d.getDate();\n                month = d.getMonth() + 1;\n                year = d.getFullYear();\n                hours = d.getHours();\n                minutes = d.getMinutes();\n                seconds = d.getSeconds();\n                nd = \"\";\n            }\n            var pad = function(n) {n = parseInt(n); return (n < 10) ? \"0\" + n : n;};\n            day = pad(day);\n            month = pad(month);\n            hours = pad(hours);\n            minutes = pad(minutes);\n            seconds = pad(seconds);\n\n            switch (format) {\n            case \"mm/dd/yyyy\":\n                nd = month + \"/\" + day + \"/\" + year;\n                break;\n            case \"mm-dd-yyyy\":\n                nd = month + \"-\" + day + \"-\" + year;\n                break;\n            case \"mm-dd-yyyy hh:mm:ss\":\n                nd = month + \"-\" + day + \"-\" + year + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"dd/mm/yyyy\":\n                nd = day + \"/\" + month + \"/\" + year;\n                break;\n            case \"dd/mm/yyyy hh:mm:ss\":\n                nd = day + \"/\" + month + \"/\" + year + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"dd-mm-yyyy\":\n                nd = day + \"-\" + month + \"-\" + year;\n                break;\n            case \"dd-mm-yyyy hh:mm:ss\":\n                nd = day + \"-\" + month + \"-\" + year + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"iso-short\":\n            case \"yyyy-mm-dd\":\n                nd = year + \"-\" + month + \"-\" + day;\n                break;\n            case \"iso\":\n            case \"yyyy-mm-dd hh:mm:ss\":\n                nd = year + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"system\":\n                nd = year + \"-\" + month + \"-\" + day + \"T\" + hours + \":\" + minutes + \":\" + seconds + \"Z\";\n                break;\n            case \"d M y hh:mm:ss\":\n                nd = this.displayDateString(month, day, year);\n                nd = nd + \" \" + hours + \":\" + minutes + \":\" + seconds;\n                break;\n            case \"d M y\":\n                nd = this.displayDateString(month, day, year);\n                break;\n            default:\n                nd = this.displayDateString(month, day, year);\n                break;\n            }\n            return nd;\n        } else {\n            return \"\";\n        }\n    },\n    \"convertToLocalTime\": function(dateString) {\n        var convertedDate = \"\";\n        if (dateString) { //assuming dateString is UTC date/time\n            var d = new Date(dateString);\n            var newDate = new Date(d.getTime() + d.getTimezoneOffset() * 60 * 1000);\n            var offset = d.getTimezoneOffset() / 60;\n            var hours = d.getHours();\n            newDate.setHours(hours - offset);\n            var options = {year: \"numeric\", day: \"numeric\", month: \"short\", hour: \"numeric\", minute: \"numeric\", second: \"numeric\", hour12: false};\n            convertedDate = newDate.toLocaleString(options);\n        }\n        return convertedDate;\n    },\n    getDateWithTimeZone: function(dObj) {\n        /*\n         * param is a date object - calculating UTC date using Date object's timezoneOffset method\n         * the method return offset in minutes, so need to convert it to miliseconds - adding the resulting offset will be the UTC date/time\n         */\n        var utcDate = new Date(dObj.getTime() + (dObj.getTimezoneOffset()) * 60 * 1000);\n        return this.formatDateString(utcDate, \"yyyy-mm-dd hh:mm:ss\");  //I believe this is a valid python date format, will save it as GMT date/time NOTE, conversion already occurred, so there will be no need for backend to convert it again\n    },\n    getTodayDateObj: function() { //return object containing today's date/time information\n        var today = new Date();\n        var td = today.getDate(), tm = today.getMonth() + 1, ty = today.getFullYear();\n        var th = today.getHours(), tmi = today.getMinutes(), ts = today.getSeconds();\n        var gmtToday = this.getDateWithTimeZone(this.getDateObj(ty, tm, td, th, tmi, ts));\n        var pad = function(n) {n = parseInt(n); return (n < 10) ? \"0\" + n : n;};\n        return {\n            date: today,\n            day: td,\n            month: tm,\n            year: ty,\n            hour: th,\n            minute: tmi,\n            second: ts,\n            displayDay: pad(td),\n            displayMonth: pad(tm),\n            displayYear: pad(ty),\n            displayHour: pad(th),\n            displayMinute: pad(tmi),\n            displaySecond: pad(ts),\n            gmtDate: gmtToday\n        };\n    },\n    dateValidator: function(day, month, year, restrictToPresent) { //parameters: day, month and year values in numeric, boolean value for restrictToPresent, true if the date needs to be before today, false is the default\n        var errorMessage = \"\";\n        if (day && month && year) {\n            var iy = parseInt(year), im = parseInt(month), iid = parseInt(day), date = new Date(iy, im - 1, iid);\n            if (date.getFullYear() === iy && (date.getMonth() + 1) === im && date.getDate() === iid) { // Check to see if this is a real date\n                if (iy < 1900) {\n                    errorMessage = i18next.t(\"Year must be after 1900\");\n                }\n                if (restrictToPresent) { // Only allow if date is before today\n                    var today = new Date();\n                    if (date.setHours(0, 0, 0, 0) > today.setHours(0, 0, 0, 0)) {\n                        errorMessage = i18next.t(\"The date must not be in the future.\");\n                    }\n                }\n            } else {\n                errorMessage = i18next.t(\"Invalid Date. Please enter a valid date.\");\n            }\n        } else {\n            errorMessage = i18next.t(\"Missing value.\");\n        }\n        return errorMessage;\n    }\n};\nexport default tnthDates;\nexport var validateDateInputFields = tnthDates.validateDateInputFields; /* generic validation function for global use */\n\n","export default {\n    \"biopsy\": {\n        code: \"111\",\n        display: \"biopsy\"\n    },\n    \"pca_diag\": {\n        code: \"121\",\n        display: \"PCa diagnosis\"\n    },\n    \"pca_localized\": {\n        code: \"141\",\n        display: \"PCa localized diagnosis\"\n    }\n};\n\n","import Utility from \"./Utility.js\";\nimport tnthDates from \"./TnthDate.js\";\nimport SYSTEM_IDENTIFIER_ENUM from \"./SYSTEM_IDENTIFIER_ENUM.js\";\nimport CLINICAL_CODE_ENUM from \"./CLINICAL_CODE_ENUM.js\";\nexport default { /*global $ */\n    \"beforeSend\": function() {\n        $.ajaxSetup({\n            beforeSend: function(xhr, settings) {\n                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {\n                    xhr.setRequestHeader(\"X-CSRFToken\", $(\"#__CRSF_TOKEN\").val());\n                }\n            }\n        });\n    },\n    \"sendRequest\": function(url, method, userId, params, callback) {\n        if (!url) { return false; }\n        var defaultParams = {type: method ? method : \"GET\", url: url, attempts: 0, max_attempts: 3, contentType: \"application/json; charset=utf-8\", dataType: \"json\", sync: false, timeout: 5000, data: null, useWorker: false, async: true};\n        params = params || defaultParams;\n        params = $.extend({}, defaultParams, params);\n        params.async = params.sync ? false: params.async;\n        var self = this;\n        var fieldHelper = this.FieldLoaderHelper, targetField = params.targetField || null;\n        callback = callback || function() {};\n        params.attempts++;\n        fieldHelper.showLoader(targetField);\n        if (params.useWorker && window.Worker && !Utility.isTouchDevice()) { /*global isTouchDevice()*/\n            Utility.initWorker(url, params, function(result) { /*global initWorker*/\n                var data;\n                try {\n                    data = JSON.parse(result);\n                } catch(e) {\n                    callback({error: \"Error occurred parsing data for \" + url});\n                    return false;\n                }\n                if (!data) {\n                    callback({\"error\": true, \"data\": \"no data returned\"});\n                    fieldHelper.showError(targetField);\n                } else if (data.error) {\n                    callback({\"error\": true, \"data\": data});\n                    self.sendError(data, url, userId, params);\n                    fieldHelper.showError(targetField);\n                } else {\n                    callback(data);\n                    fieldHelper.showUpdate(targetField);\n                }\n            });\n            return true;\n        }\n        if (!params.cache) {\n            params.headers = {\n                \"cache-control\": \"no-cache\",\n                \"expires\": \"-1\",\n                \"pragma\": \"no-cache\"\n            };\n        }\n        $.ajax(params).done(function(data) {\n            params.attempts = 0;\n            if (data) {\n                fieldHelper.showUpdate(targetField);\n                callback(data);\n            } else {\n                fieldHelper.showError(targetField);\n                callback({\"error\": true, \"data\": \"no data returned\"});\n            }\n        }).fail(function(xhr) {\n            if (params.attempts < params.max_attempts) {\n                (function(self, url, method, userId, params, callback) {\n                    setTimeout(function() {\n                        self.sendRequest(url, method, userId, params, callback);\n                    }, 3000); //retry after 3 seconds\n                })(self, url, method, userId, params, callback);\n            } else {\n                params.attempts = 0;\n                fieldHelper.showError(targetField);\n                callback({\"error\": true, \"data\": xhr});\n                self.sendError(xhr, url, userId, params);\n            }\n        });\n    },\n    \"sendError\": function(xhr, url, userId, params) {\n        if (!xhr) { return false; }\n        var errorMessage = \"[Error occurred processing request]  status - \" + (parseInt(xhr.status) === 0 ? \"request timed out/network error\" : xhr.status) + \", response text - \" + (xhr.responseText ? xhr.responseText : \"no response text returned from server\");\n        if (params) {\n            try {\n                errorMessage += \" [data sent]: \" + JSON.stringify(params); //error can happen if for some reason the params are malformed\n            } catch(e) {\n                errorMessage += \" Error occurred transforming sent data: \" + e.message;\n            }\n        }\n        this.reportError(userId ? userId : \"Not available\", url, errorMessage, true);\n    },\n    \"reportError\": function(userId, page_url, message, sync) {\n        //params need to contain the following: subject_id: User on which action is being attempted message: Details of the error event page_url: The page requested resulting in the error\n        var params = {};\n        page_url = page_url || window.location.href;\n        params.subject_id = userId || 0;\n        params.page_url = page_url;\n        params.message = \"Error generated in JS - \" + (message ? message.replace(/[\"']/g, \"\") : \"no detail available\"); //don't think we want to translate message sent back to the server here\n        console.log(\"Errors occurred.....\"); /*eslint no-console: off */\n        console.log(params); /*global console*/\n        $.ajax({\n            type: \"GET\",\n            url: \"/report-error\",\n            contentType: \"application/json; charset=utf-8\",\n            cache: false,\n            async: (sync ? false : true),\n            data: params\n        }).done(function() {}).fail(function() {});\n    },\n    \"FieldLoaderHelper\": {\n        delayDuration: 300,\n        showLoader: function(targetField) {\n            if (!targetField || targetField.length === 0) { return false; }\n            var el = $(\"#\" + (targetField.attr(\"data-save-container-id\") || targetField.attr(\"id\")) + \"_load\");\n            el.css(\"opacity\", 1);\n            el.addClass(\"loading\");\n        },\n        showUpdate: function(targetField) {\n            var __timeout = this.delayDuration;\n            if (!targetField || targetField.length === 0) { return false; }\n            setTimeout(function() {\n                (function(targetField) {\n                    var containerId = targetField.attr(\"data-save-container-id\") || targetField.attr(\"id\");\n                    var errorField = $(\"#\" + containerId + \"_error\");\n                    var successField = $(\"#\" + containerId + \"_success\");\n                    var loadingField = $(\"#\" + containerId + \"_load\");\n                    loadingField.removeClass(\"loading\");\n                    errorField.text(\"\").css(\"opacity\", 0);\n                    successField.text(i18next.t(\"success\"));\n                    loadingField.animate({\"opacity\": 0}, __timeout, function() {\n                        successField.animate({\"opacity\": 1}, __timeout, function() {\n                            setTimeout(function() {\n                                successField.animate({\"opacity\": 0}, __timeout * 2);\n                            }, __timeout * 2);\n                        });\n                    });\n                })(targetField);\n            }, __timeout);\n        },\n        showError: function(targetField) {\n            targetField = targetField || $(targetField);\n            var __timeout = this.delayDuration;\n            if (!targetField || targetField.length === 0) { return false; }\n            setTimeout(function() {\n                (function(targetField) {\n                    var containerId = targetField.attr(\"data-save-container-id\") || targetField.attr(\"id\");\n                    var errorField = $(\"#\" + containerId + \"_error\");\n                    var successField = $(\"#\" + containerId + \"_success\");\n                    var loadingField = $(\"#\" + containerId + \"_load\");\n                    loadingField.removeClass(\"loading\");\n                    errorField.text(i18next.t(\"Unable to update. System/Server Error.\"));\n                    successField.text(\"\").css(\"opacity\", 0);\n                    loadingField.animate({\"opacity\": 0}, __timeout, function() {\n                        errorField.animate({\"opacity\": 1}, __timeout, function() {\n                            setTimeout(function() {\n                                errorField.animate({\"opacity\": 0}, __timeout * 2);\n                            }, __timeout * 2);\n                        });\n                    });\n                })(targetField);\n            }, __timeout);\n        }\n    },\n    \"getCurrentUser\": function(callback, params) {\n        callback = callback||function() {};\n        if (sessionStorage.currentUser) {\n            callback(JSON.parse(sessionStorage.currentUser));\n        } else {\n            this.sendRequest(\"/api/me\", \"GET\", \"\", params, function(data) {\n                if (data && data.id) { //make sure the necessary data is there before setting session\n                    sessionStorage.setItem(\"currentUser\", JSON.stringify(data));\n                }\n                callback(data);\n            });\n        }\n    },\n    \"getStillNeededCoreData\": function(userId, sync, callback, entry_method) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User Id is required\")});\n            return false;\n        }\n        var __url = \"/api/coredata/user/\" + userId + \"/still_needed\" + (entry_method ? \"?entry_method=\" + (entry_method).replace(/\\_/g, \" \") : \"\");\n        this.sendRequest(__url, \"GET\", userId, {sync: sync,cache: true}, function(data) {\n            if (!data) {\n                callback({\"error\": i18next.t(\"no data returned\")});\n                return false;\n            }\n            if (data.error) {\n                callback({\"error\": i18next.t(\"unable to get needed core data\")});\n                return false;\n            }\n            callback(data);\n        });\n    },\n    \"getRequiredCoreData\": function(userId, sync, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User Id is required\")});\n            return false;\n        }\n        this.sendRequest(\"/api/coredata/user/\" + userId + \"/required\", \"GET\", userId, {sync: sync,cache: true}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    if (data.required) {\n                        callback(data.required);\n                    } else {\n                        callback({\"error\": i18next.t(\"no data returned\")});\n                    }\n                } else {\n                    callback({\"error\": i18next.t(\"unable to get required core data\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"getOptionalCoreData\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User Id is required\")});\n            return false;\n        }\n        var __url = \"/api/coredata/user/\" + userId + \"/optional\", sessionStorageKey = \"optionalCoreData_\" + userId;\n        if (sessionStorage.getItem(sessionStorageKey)) {\n            callback(JSON.parse(sessionStorage.getItem(sessionStorageKey)));\n        } else {\n            this.sendRequest(__url, \"GET\", userId, params, function(data) {\n                if (data) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"no data found\")});\n                }\n            });\n        }\n    },\n    \"getPortalFooter\": function(userId, sync, containerId, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback(\"<div class='error-message'>\" + i18next.t(\"User Id is required\") + \"</div>\");\n            return false;\n        }\n        this.sendRequest(\"/api/portal-footer-html/\", \"GET\", userId, {sync: sync,cache: true,\"dataType\": \"html\"}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    if (containerId) {\n                        $(\"#\" + containerId).html(data);\n                    }\n                    callback(data);\n                } else {\n                    callback(\"<div class='error-message'>\" + i18next.t(\"Unable to retrieve portal footer html\") + \"</div>\");\n                }\n            } else {\n                callback(\"<div class='error-message'>\" + i18next.t(\"No data found\") + \"</div>\");\n            }\n        });\n    },\n    \"getOrgs\": function(userId, params, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/organization\", \"GET\", userId, params, function(data) {\n            if (sessionStorage.demoOrgsData) {\n                callback(JSON.parse(sessionStorage.demoOrgsData));\n                return true;\n            }\n            if (!data.error) {\n                $(\".get-orgs-error\").html(\"\");\n                sessionStorage.setItem(\"demoOrgsData\", JSON.stringify(data));\n                callback(data);\n            } else {\n                var errorMessage = i18next.t(\"Server error occurred retrieving organization/clinic information.\");\n                $(\".get-orgs-error\").html(errorMessage);\n                callback({\"error\": errorMessage});\n            }\n        });\n    },\n    \"getConsent\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/consent\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    $(\".get-consent-error\").html(\"\");\n                    callback(data);\n                    return true;\n                } else {\n                    var errorMessage = i18next.t(\"Server error occurred retrieving consent information.\");\n                    callback({\"error\": errorMessage});\n                    $(\".get-consent-error\").html(errorMessage);\n                    return false;\n                }\n            }\n        });\n    },\n    \"setConsent\": function(userId, params, status, sync, callback) {\n        callback = callback || function() {};\n        if (!userId && !params) {\n            callback({\"error\": i18next.t(\"User id and parameters are required\")});\n            return false;\n        }\n        var consented = this.hasConsent(userId, params.org, status);\n        var __url = \"/api/user/\" + userId + \"/consent\";\n        if (consented && !params.testPatient) {\n            callback({\"error\": false});\n            return;\n        }\n        var data = {};\n        data.user_id = userId;\n        data.organization_id = params.org;\n        data.agreement_url = params.agreementUrl;\n        data.staff_editable = (String(params.staff_editable) !== \"null\"  && String(params.staff_editable) !== \"undefined\" ? params.staff_editable : false);\n        data.include_in_reports = (String(params.include_in_reports) !== \"null\" && String(params.include_in_reports) !== \"undefined\" ? params.include_in_reports : false);\n        data.send_reminders = (String(params.send_reminders) !== \"null\" &&  String(params.send_reminders) !== \"undefined\"? params.send_reminders : false);\n        if (params.acceptance_date) {\n            data.acceptance_date = params.acceptance_date;\n        }\n        this.sendRequest(__url, \"POST\", userId, {sync: sync, data: JSON.stringify(data)}, function(data) {\n            if (!data.error) {\n                $(\".set-consent-error\").html(\"\");\n                callback(data);\n            } else {\n                var errorMessage = i18next.t(\"Server error occurred setting consent status.\");\n                callback({\"error\": errorMessage});\n                $(\".set-consent-error\").html(errorMessage);\n            }\n        });\n    },\n    deleteConsent: function(userId, params) {\n        if (!userId) {\n            return false;\n        }\n        params = params || {};\n        var consented = this.getAllValidConsent(userId, params.org);\n        if (!consented) {\n            return false;\n        }\n        var arrExcludedOrgIds = params.exclude ? params.exclude.split(\",\"): [];\n        var arrConsents = $.grep(consented, function(orgId) {\n            var inArray = $.grep(arrExcludedOrgIds, function(eOrg) {\n                return String(eOrg) === String(orgId);\n            });\n            return !(inArray.length); //filter out org Id(s) that are in the array of org Ids to be excluded;\n        });\n        var self = this;\n        arrConsents.forEach(function(orgId) { //delete all consents for the org\n            self.sendRequest(\"/api/user/\" + userId + \"/consent\", \"DELETE\", userId, {data: JSON.stringify({\"organization_id\": parseInt(orgId)})}, function(data) {\n                if (!data) {\n                    return false;\n                }\n                if (!data.error) {\n                    $(\".delete-consent-error\").html(\"\");\n                } else {\n                    $(\".delete-consent-error\").html(i18next.t(\"Server error occurred removing consent.\"));\n                }\n            });\n        });\n    },\n    withdrawConsent: function(userId, orgId, params, callback) {\n        callback = callback || function() {};\n        params = params || {};\n        if (!userId || !orgId) {\n            callback({\"error\": i18next.t(\"User id and organization id are required.\")});\n            return false;\n        }\n        var self = this, arrConsent = [];\n        this.sendRequest(\"/api/user/\" + userId + \"/consent\", \"GET\", userId, params, function(data) {\n            if (data && data.consent_agreements && data.consent_agreements.length) {\n                arrConsent = $.grep(data.consent_agreements, function(item) {\n                    var expired = tnthDates.getDateDiff(String(item.expires)); /*global tnthDates */\n                    return (String(orgId) === String(item.organization_id)) && !item.deleted && !(expired > 0) && String(item.status) === \"suspended\";\n                });\n            }\n            if (arrConsent.length) { //don't send request if suspended consent already existed\n                callback({\"data\": \"success\"});\n                return false;\n            }\n            self.sendRequest(\"/api/user/\" + userId + \"/consent/withdraw\",\n                \"POST\",\n                userId, {sync: params.sync,data: JSON.stringify({organization_id: orgId})},\n                function(data) {\n                    if (data.error) {\n                        callback({\"error\": i18next.t(\"Error occurred setting suspended consent status.\")});\n                        return false;\n                    }\n                    callback(data);\n                });\n        });\n    },\n    getAllValidConsent: function(userId, orgId) {\n        if (!userId || !orgId) { return false; }\n        var consentedOrgIds = [];\n        this.sendRequest(\"/api/user/\" + userId + \"/consent\", \"GET\", userId, {sync: true}, function(data) {\n            if (!data || data.error || !data.consent_agreements || !data.consent_agreements.length) {\n                return consentedOrgIds;\n            }\n            consentedOrgIds = $.grep(data.consent_agreements, function(item) {\n                var expired = tnthDates.getDateDiff(String(item.expires));\n                return !item.deleted && !(expired > 0) && (String(orgId).toLowerCase() === \"all\" || String(orgId) === String(item.organization_id));\n            });\n            consentedOrgIds = (consentedOrgIds).map(function(item) {\n                return item.organization_id;\n            });\n            return consentedOrgIds;\n        });\n        return consentedOrgIds;\n    },\n    hasConsent: function(userId, orgId, filterStatus) {  /****** NOTE - this will return the latest updated consent entry *******/\n        if (!userId || !orgId || String(filterStatus) === \"default\") { return false; }\n        var consentedOrgIds = [];\n        var __url = \"/api/user/\" + userId + \"/consent\", self = this;\n        self.sendRequest(__url, \"GET\", userId, {sync: true}, function(data) {\n            if (!data || data.error || (data.consent_agreements && data.consent_agreements.length === 0)) {\n                return false;\n            }\n            consentedOrgIds = $.grep(data.consent_agreements, function(item) {\n                var expired = item.expires ? tnthDates.getDateDiff(String(item.expires)) : 0; /*global tnthDates */\n                return (String(orgId) === String(item.organization_id)) && !item.deleted && !(expired > 0) && item.staff_editable && item.send_reminders && item.include_in_reports;\n            });\n        });\n        return consentedOrgIds.length;\n    },\n    \"getDemo\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User id is required.\")});\n            return false;\n        }\n        params = params || {};\n        var demoDataKey = \"demoData_\"+userId;\n        if (sessionStorage.getItem(demoDataKey)) {\n            callback(JSON.parse(sessionStorage.getItem(demoDataKey)));\n            return;\n        }\n        this.sendRequest(\"/api/demographics/\" + userId, \"GET\", userId, params, function(data) {\n            var errorMessage = \"\";\n            if (data.error) {\n                errorMessage = i18next.t(\"Server error occurred retrieving demographics information.\");\n                $(\".get-demo-error\").html(errorMessage);\n                callback({\"error\": errorMessage});\n                return false;\n            }\n            $(\".get-demo-error\").html(errorMessage);\n            sessionStorage.setItem(demoDataKey, JSON.stringify(data));\n            callback(data);\n        });\n    },\n    \"clearDemoSessionData\": function(userId) {\n        sessionStorage.removeItem(\"demoData_\"+userId);\n    },\n    \"putDemo\": function(userId, toSend, targetField, sync, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User Id is required\")});\n            return false;\n        }\n        this.clearDemoSessionData(userId);\n        this.sendRequest(\"/api/demographics/\" + userId, \"PUT\", userId, {sync: sync, data: JSON.stringify(toSend),targetField: targetField}, function(data) {\n            if (!data.error) {\n                $(\".put-demo-error\").html(\"\");\n            } else {\n                $(\".put-demo-error\").html(i18next.t(\"Server error occurred setting demographics information.\"));\n            }\n            callback(data);\n        });\n    },\n    \"getLocale\": function(userId) {\n        this.sendRequest(\"/api/demographics/\" + userId, \"GET\", userId, null, function(data) {\n            if (data) {\n                if (!data.error) {\n                    if (data.communication) {\n                        $(\"#profileLocaleTimezoneContainer .get-locale-error\").html(\"\");\n                    }\n                } else {\n                    $(\"#profileLocaleTimezoneContainer .get-locale-error\").html(i18next.t(\"Server error occurred retrieving locale information.\"));\n                }\n            }\n        });\n    },\n    \"hasTreatment\": function(data) {\n        if (!data || !data.entry || data.entry.length === 0) {\n            return false;\n        }\n        var sortedArray = data.entry.sort(function(a, b) { // sort from newest to oldest based on lsat updated date\n            return new Date(b.resource.meta.lastUpdated) - new Date(a.resource.meta.lastUpdated);\n        });\n        var found = false;\n        sortedArray.forEach(function(item) {\n            if (found) { return true; }\n            var resourceItemCode = String(item.resource.code.coding[0].code);\n            var system = String(item.resource.code.coding[0].system);\n            var procId = item.resource.id;\n            if ((resourceItemCode === SYSTEM_IDENTIFIER_ENUM.CANCER_TREATMENT_CODE && (system === SYSTEM_IDENTIFIER_ENUM.SNOMED_SYS_URL)) || (resourceItemCode === SYSTEM_IDENTIFIER_ENUM.NONE_TREATMENT_CODE && (system === SYSTEM_IDENTIFIER_ENUM.CLINICAL_SYS_URL))) {\n                found = {\"code\": resourceItemCode,\"id\": procId};\n            }\n        });\n        return found;\n    },\n    \"getTreatment\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required\")});\n            return false;\n        }\n        this.sendRequest(\"/api/patient/\" + userId + \"/procedure\", \"GET\", userId, params, function(data) {\n            if (data.error) {\n                $(\"#userProcedures\").html(\"<span class='error-message'>\" + i18next.t(\"Error retrieving data from server\") + \"</span>\");\n            }\n            callback(data);\n        });\n    },\n    \"postTreatment\": function(userId, started, treatmentDate, targetField) {\n        if (!userId) { return false;}\n        this.deleteTreatment(userId, targetField);\n        var code = SYSTEM_IDENTIFIER_ENUM.NONE_TREATMENT_CODE, display = \"None\", system = SYSTEM_IDENTIFIER_ENUM.CLINICAL_SYS_URL;\n        if (started) {\n            code = SYSTEM_IDENTIFIER_ENUM.CANCER_TREATMENT_CODE;\n            display = \"Procedure on prostate\";\n            system = SYSTEM_IDENTIFIER_ENUM.SNOMED_SYS_URL;\n        }\n        if (!treatmentDate) {\n            var date = new Date();\n            treatmentDate = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate();  //in yyyy-mm-dd format\n        }\n        var procID = [{\"code\": code,\"display\": display,\"system\": system}];\n        var procArray = {};\n        procArray.resourceType = \"Procedure\";\n        procArray.subject = {\"reference\": \"Patient/\" + userId};\n        procArray.code = {\"coding\": procID};\n        procArray.performedDateTime = treatmentDate ? treatmentDate : \"\";\n        this.postProc(userId, procArray, targetField);\n    },\n    deleteTreatment: function(userId, targetField) {\n        var self = this;\n        this.sendRequest(\"/api/patient/\" + userId + \"/procedure\", \"GET\", userId, {sync: true}, function(data) {\n            if (!data || data.error) { return false; }\n            var treatmentData = self.hasTreatment(data);\n            if (!treatmentData) { return false; }\n            if (String(treatmentData.code) === String(SYSTEM_IDENTIFIER_ENUM.CANCER_TREATMENT_CODE)){\n                self.deleteProc(treatmentData.id, targetField, true);\n                return true;\n            }\n            self.deleteProc(treatmentData.id, targetField, true);\n        });\n    },\n    \"getProc\": function(userId, newEntry, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/patient/\" + userId + \"/procedure\", \"GET\", userId, null, function(data) {\n            callback(data);\n        });\n    },\n    \"postProc\": function(userId, toSend, targetField, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/procedure\", \"POST\", userId, {data: JSON.stringify(toSend),targetField: targetField}, function(data) {\n            if (!data) {\n                callback({\"error\": i18next.t(\"no data returned\")});\n                return false;\n            }\n            if (data.error) {\n                var errorMessage = i18next.t(\"Server error occurred saving procedure/treatment information.\");\n                $(\"#userProcuedures .get-procs-error\").html(errorMessage);\n                callback({error: errorMessage});\n                return false;\n            }\n            $(\".get-procs-error\").html(\"\");\n            callback(data);\n        });\n    },\n    \"deleteProc\": function(procedureId, targetField, sync) {\n        this.sendRequest(\"/api/procedure/\" + procedureId, \"DELETE\", null, {sync: sync,targetField: targetField}, function(data) {\n            if (!data.error) {\n                $(\".del-procs-error\").html(\"\");\n            } else {\n                $(\".del-procs-error\").html(i18next.t(\"Server error occurred removing procedure/treatment information.\"));\n            }\n        });\n    },\n    \"getRoleList\": function(params, callback) {\n        this.sendRequest(\"/api/roles\", \"GET\", null, params, function(data) {\n            callback = callback || function() {};\n            if (!data.error) {\n                callback(data);\n            } else {\n                var errorMessage = i18next.t(\"Server error occurred retrieving roles information.\");\n                $(\".get-roles-error\").html(errorMessage);\n                callback({\"error\": errorMessage});\n            }\n        });\n    },\n    \"getRoles\": function(userId, callback, params) {\n        callback = callback || function() {};\n        var sessionStorageKey = \"userRole_\" + userId;\n        if (sessionStorage.getItem(sessionStorageKey)) {\n            var data = JSON.parse(sessionStorage.getItem(sessionStorageKey));\n            callback(data);\n        } else {\n            this.sendRequest(\"/api/user/\" + userId + \"/roles\", \"GET\", userId, params, function(data) {\n                if (data) {\n                    if (!data.error) {\n                        $(\".get-roles-error\").html(\"\");\n                        sessionStorage.setItem(sessionStorageKey, JSON.stringify(data));\n                        callback(data);\n                    } else {\n                        var errorMessage = i18next.t(\"Server error occurred retrieving user role information.\");\n                        $(\".get-roles-error\").html(errorMessage);\n                        callback({\"error\": errorMessage});\n                    }\n                }\n            });\n        }\n    },\n    \"removeCachedRoles\": function(userId) {\n        sessionStorage.removeItem(\"userRole_\"+userId);\n    },\n    \"putRoles\": function(userId, toSend, targetField, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User Id is required.\")});\n            return false;\n        }\n        this.removeCachedRoles(userId);\n        this.sendRequest(\"/api/user/\" + userId + \"/roles\", \"PUT\", userId, {data: JSON.stringify(toSend),targetField: targetField}, function(data) {\n            if (!data || data.error) {\n                var errorMessage = i18next.t(\"Server error occurred setting user role information.\");\n                $(\".put-roles-error\").html(errorMessage);\n                callback({error: errorMessage});\n                return;\n            }\n            $(\".put-roles-error\").html(\"\");\n            sessionStorage.setItem(\"userRole_\" + userId, \"\");\n            callback(data);\n        });\n    },\n    \"deleteRoles\": function(userId, toSend) {\n        if (!userId) {\n            return false;\n        }\n        this.removeCachedRoles(userId);\n        this.sendRequest(\"/api/user/\" + userId, \"GET\", userId, {data: JSON.stringify(toSend)}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    $(\".delete-roles-error\").html(\"\");\n                } else {\n                    $(\".delete-roles-error\").html(i18next.t(\"Server error occurred deleting user role.\"));\n                }\n            }\n        });\n    },\n    \"getClinical\": function(userId, params, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/patient/\" + userId + \"/clinical\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    $(\".get-clinical-error\").html(\"\");\n                    callback(data);\n                } else {\n                    var errorMessage = i18next.t(\"Server error occurred retrieving clinical data.\");\n                    $(\".get-clinical-error\").html(errorMessage);\n                    callback({\"error\": errorMessage});\n                }\n            }\n        });\n    },\n    \"getObservationId\": function(userId, code) {\n        if (!userId) { return false; }\n        var obId = \"\",_code = \"\";\n        this.sendRequest(\"/api/patient/\" + userId + \"/clinical\", \"GET\", userId, {sync: true}, function(data) {\n            if (!data || data.error || !data.entry) {\n                return obId;\n            }\n            (data.entry).forEach(function(item) {\n                if (!obId) {\n                    _code = item.content.code.coding[0].code;\n                    if (String(_code) === String(code)) {\n                        obId = item.content.id;\n                    }\n                }\n            });\n\n        });\n        return obId;\n    },\n    \"postClinical\": function(userId, toCall, toSend, status, targetField, params, callback) {\n        if (!userId) { return false; }\n        params = params || {};\n        var code = \"\", display = \"\";\n        if (CLINICAL_CODE_ENUM.hasOwnProperty(String(toCall).toLowerCase())) {\n            var match = CLINICAL_CODE_ENUM[toCall];\n            code = match.code;\n            display = match.display;\n        }\n        if (!code) {\n            return false;\n        }\n        var self = this;\n        var system = SYSTEM_IDENTIFIER_ENUM.CLINICAL_SYS_URL;\n        var method = \"POST\";\n        var url = \"/api/patient/\" + userId + \"/clinical\";\n        var obsCode = [{\"code\": code,\"display\": display,\"system\": system}];\n        var obsArray = {};\n        obsArray.resourceType = \"Observation\";\n        obsArray.code = {\"coding\": obsCode};\n        obsArray.issued = params.issuedDate ? params.issuedDate : \"\";\n        obsArray.status = status ? status : \"\";\n        obsArray.valueQuantity = {\"units\": \"boolean\",\"value\": toSend};\n        if (params.performer) {\n            obsArray.performer = params.performer;\n        }\n        var obsId = self.getObservationId(userId, code);\n        if (obsId) {\n            method = \"PUT\";\n            url = url + \"/\" + obsId;\n        }\n        callback = callback || function() {};\n        this.sendRequest(url, method, userId, {data: JSON.stringify(obsArray),targetField: targetField}, function(data) {\n            if (!data || data.error) {\n                var errorMessage = i18next.t(\"Server error occurred updating clinical data.\");\n                $(\".post-clinical-error\").html(errorMessage).show();\n                callback({error: errorMessage});\n                return;\n            }\n            $(\".post-clinical-error\").html(\"\").hide();\n            callback(data);\n        });\n    },\n    \"getTermsUrl\": function(sync, callback) { /*global i18next */\n        callback = callback || function() {};\n        this.sendRequest(\"/api/tou\", \"GET\", null, {sync: sync}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    $(\".get-tou-error\").html(\"\");\n                    if (data.url) {\n                        $(\"#termsURL\").attr(\"data-url\", data.url);\n                        $(\"#termsCheckbox_default .terms-url\").attr(\"href\", data.url);\n                        callback({\"url\": data.url});\n                    } else {\n                        callback({\"error\": i18next.t(\"no url returned\")});\n                    }\n                } else {\n                    $(\".get-tou-error\").html(i18next.t(\"Server error occurred retrieving tou url.\"));\n                    callback({\"error\": i18next.t(\"Server error\")});\n                }\n            }\n        });\n    },\n    \"getInstrumentsList\": function(sync, callback) { //return instruments list by organization(s)\n        callback = callback || function() {};\n        this.sendRequest(\"api/questionnaire_bank\", \"GET\", null, {\n            sync: sync\n        }, function(data) {\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"error retrieving instruments list\")});\n                return;\n            }\n            if (!data.entry || !data.entry.length) {\n                callback({\"error\": i18next.t(\"no data returned\")});\n                return;\n            }\n            var qList = {};\n            (data.entry).forEach(function(item) {\n                if (item.organization) {\n                    var orgID = (item.organization.reference).split(\"/\")[2];\n                    if (!qList[orgID]) {\n                        qList[orgID] = []; //don't assign orgID to object if it was already present\n                    }\n                    if (item.questionnaires) {\n                        (item.questionnaires).forEach(function(q) {\n                            /*\n                             * add instrument name to instruments array for the org - will not add if it is already in the array\n                             * NOTE: inArray returns -1 if the item is NOT in the array\n                             */\n                            if ($.inArray(q.questionnaire.display, qList[orgID]) === -1) {\n                                qList[orgID].push(q.questionnaire.display);\n                            }\n                        });\n                    }\n                }\n            });\n            callback(qList);\n\n        });\n    },\n    \"getTerms\": function(userId, type, sync, callback, params) {\n        callback = callback || function() {};\n        params = params || {};\n        var url = \"/api/user/{userId}/tou{type}{all}\".replace(\"{userId}\", userId)\n            .replace(\"{type}\", type ? (\"/\" + type) : \"\")\n            .replace(\"{all}\", (params.hasOwnProperty(\"all\") ? \"?all=true\" : \"\"));\n        this.sendRequest(url, \"GET\", userId, {sync: sync}, function(data) {\n            if (!data || data.error) {\n                var errorMessage = i18next.t(\"Server error occurred retrieving tou data.\");\n                $(\".get-tou-error\").html(errorMessage);\n                callback({\"error\": errorMessage});\n                return;\n            }\n            $(\".get-tou-error\").html(\"\");\n            callback(data);\n        });\n    },\n    \"postTermsByUser\": function(userId, toSend, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/user/\" + userId + \"/tou/accepted\", \"POST\", userId, {data: JSON.stringify(toSend)}, function(data) {\n            if (!data || data.error) {\n                $(\".post-tou-error\").html(i18next.t(\"Server error occurred saving terms of use information.\"));\n                callback(data);\n                return;\n            }\n            $(\".post-tou-error\").html(\"\");\n            callback(data);\n        });\n    },\n    \"postTerms\": function(toSend, targetField, callback) {\n        callback = callback || function() {};\n        this.sendRequest(\"/api/tou/accepted\", \"POST\", null, {data: JSON.stringify(toSend), targetField: targetField}, function(data) {\n            if (!data || data.error) {\n                var errorMessage = i18next.t(\"Server error occurred saving terms of use information.\");\n                $(\".post-tou-error\").html(errorMessage);\n                callback({error: errorMessage});\n                return;\n            }\n            $(\".post-tou-error\").html(\"\");\n            callback(data);\n        });\n    },\n    \"accessUrl\": function(userId, sync, callback) {\n        callback = callback || function() {};\n        if (!userId) { callback({\"error\": i18next.t(\"User id is required.\")}); return false; }\n        this.sendRequest(\"/api/user/\" + userId + \"/access_url\", \"GET\", userId, {sync: sync}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback({url: data.access_url});\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving access url.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"invite\": function(userId, data, callback) {\n        callback = callback || function() {};\n        if (!data) { callback({\"error\": i18next.t(\"Invite data are required.\")}); return false; }\n        this.sendRequest(\"/invite\", \"POST\", userId, {\n            \"contentType\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n            \"data\": data,\n            \"dataType\": \"html\"\n        }, function(data) {\n            if (data) {\n                callback(data);\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"passwordReset\": function(userId, callback) {\n        callback = callback || function() {};\n        if (!userId) { callback({\"error\": i18next.t(\"User id is required.\")}); return false; }\n        this.sendRequest(\"/api/user/\" + userId + \"/password_reset\", \"POST\", userId, {\"contentType\": \"application/x-www-form-urlencoded; charset=UTF-8\"}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred sending password reset request.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"assessmentStatus\": function(userId, callback) {\n        callback = callback || function() {};\n        if (!userId) { callback({\"error\": i18next.t(\"User id is required.\")}); return false; }\n        this.sendRequest(\"/api/patient/\" + userId + \"/assessment-status\", \"GET\", userId, null, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving assessment status.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"updateAssessment\": function(userId, data, callback) {\n        callback = callback || function() {};\n        if (!userId) { callback({\"error\": i18next.t(\"User id is required.\")}); return false; }\n        if (!data) { callback({\"error\": i18next.t(\"Questionnaire response data is required.\")}); return false;}\n        this.sendRequest(\"/api/patient/\" + userId + \"/assessment\", \"PUT\", userId, {data: JSON.stringify(data)}, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving assessment list.\")});\n                }\n\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"assessmentList\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/patient/\" + userId + \"/assessment\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving assessment list.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"assessmentReport\": function(userId, instrumentId, callback) {\n        callback = callback || function() {};\n        if (!userId || !instrumentId) {\n            callback({error: i18next.t(\"User id and instrument Id are required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/patient/\" + userId + \"/assessment/\" + instrumentId, \"GET\", userId, null, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving assessment report.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"getCurrentQB\": function(userId, completionDate, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        params = params || {};\n        this.sendRequest(\"/api/user/\" + userId + \"/questionnaire_bank\", \"GET\", userId, {data: {as_of_date: completionDate}, sync: params.sync}, function(data) {\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"Error occurred retrieving current questionnaire bank for user.\")});\n                return false;\n            }\n            callback(data);\n        });\n    },\n    \"patientReport\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/user_documents?document_type=PatientReport\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving patient report.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"setTablePreference\": function(userId, tableName, params, callback) {\n        callback = callback || function() {};\n        params = params || {};\n        if (!userId || !tableName) {\n            callback({error: \"User Id and table name is required for setting preference.\"});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/table_preferences/\" + tableName, \"PUT\", userId, {\"data\": params.data,\"sync\": params.sync}, function(data) {\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"Error occurred setting table preference.\")});\n                return false;\n            }\n            callback(data);\n        });\n    },\n    \"getTablePreference\": function(userId, tableName, params, callback) {\n        params = params || function() {};\n        callback = callback || function(){};\n        if (!userId) {\n            callback({error: \"User Id is required for setting preference.\"});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/table_preferences/\" + tableName, \"GET\", userId, params, function(data) {\n            if (data && data.error) {\n                callback({\"error\": i18next.t(\"Error occurred setting table preference.\")});\n                return;\n            }\n            callback(data);\n        });\n    },\n    \"emailLog\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/messages\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving email audit entries.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"auditLog\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/audit\", \"GET\", userId, params, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving audit log.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"setting\": function(key, userId, params, callback) {\n        callback = callback || function() {};\n        if (!key) {\n            callback({\"error\": i18next.t(\"configuration key is required.\")});\n            return false;\n        }\n        params = params || {};\n        this.sendRequest(\"/api/settings/\" + key, \"GET\", userId, {\n            \"sync\": params.sync\n        }, function(data) {\n            if (data) {\n                if (!data.error) {\n                    callback(data);\n                } else {\n                    callback({\"error\": i18next.t(\"Error occurred retrieving content for configuration key.\")});\n                }\n            } else {\n                callback({\"error\": i18next.t(\"no data returned\")});\n            }\n        });\n    },\n    \"deactivateUser\": function(userId, params, callback) {\n        callback = callback||function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User id is required\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId, \"DELETE\", userId, (params || {}), function(data) {\n            callback = callback||function() {};\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"Error occurred deactivating user.\")});\n                return;\n            }\n            callback(data);\n        });\n    },\n    \"reactivateUser\": function(userId, params, callback) {\n        callback = callback||function() {};\n        if (!userId) {\n            callback({\"error\": i18next.t(\"User id is required\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/reactivate\", \"POST\", userId, (params || {}), function(data) {\n            if (!data || data.error) {\n                callback({\"error\": i18next.t(\"Error occurred reactivating user.\")});\n                return;\n            }\n            callback(data);\n        });\n    },\n    \"getConfigurationByKey\": function(configVar, params, callback) {\n        callback = callback || function() {};\n        if (!configVar) {\n            callback({\"error\": i18next.t(\"configuration variable name is required.\")});\n            return false;\n        }\n        var sessionConfigKey = \"config_\" + configVar;\n        if (sessionStorage.getItem(sessionConfigKey)) {\n            var data = JSON.parse(sessionStorage.getItem(sessionConfigKey));\n            callback(data);\n            return true;\n        }\n        this.sendRequest(\"/api/settings/\" + configVar, \"GET\", null, (params || {}), function(data) {\n            if (!data) {\n                callback({\"error\": i18next.t(\"no data returned\")});\n                return;\n            }\n            callback(data);\n            sessionStorage.setItem(sessionConfigKey, JSON.stringify(data));\n        });\n    },\n    \"getConfiguration\": function(userId, params, callback) {\n        callback = callback || function() {};\n        var sessionConfigKey = \"settings_\" + userId;\n        if (sessionStorage.getItem(sessionConfigKey)) {\n            var data = JSON.parse(sessionStorage.getItem(sessionConfigKey));\n            callback(data);\n            return;\n        }\n        this.sendRequest(\"/api/settings\", \"GET\", userId, (params || {}), function(data) {\n            if (data) {\n                callback(data);\n                sessionStorage.setItem(sessionConfigKey, JSON.stringify(data));\n            } else {\n                callback({\n                    \"error\": i18next.t(\"no data returned\")\n                });\n            }\n        });\n\n    },\n    \"getEmailReady\": function(userId, params, callback) {\n        callback = callback || function() {};\n        if (!userId) {\n            callback({error: i18next.t(\"User id is required.\")});\n            return false;\n        }\n        this.sendRequest(\"/api/user/\" + userId + \"/email_ready\", \"GET\", userId, params, function(data) {\n            callback(data);\n        });\n    }\n};\n","import SYSTEM_IDENTIFIER_ENUM from \"./SYSTEM_IDENTIFIER_ENUM.js\";\nimport tnthAjax from \"./TnthAjax.js\";\nexport default (function() { /*global i18next $ */\n    var OrgObj = function(orgId, orgName, parentOrg) {\n        this.id = orgId;\n        this.name = orgName;\n        this.children = [];\n        this.parentOrgId = parentOrg;\n        this.isTopLevel = false;\n        this.language = null;\n        this.extension = [];\n    };\n\n    var OrgTool = function() {\n        this.TOP_LEVEL_ORGS = [];\n        this.orgsList = {};\n        this.initialized = false;\n    };\n\n    OrgTool.prototype.init = function(callback) {\n        var self = this;\n        callback = callback || function() {};\n        if (sessionStorage.orgsData) {\n            var orgsData = JSON.parse(sessionStorage.orgsData);\n            self.populateOrgsList(orgsData);\n            callback(orgsData);\n        } else {\n            $.ajax({\n                type: \"GET\",\n                url: \"/api/organization\",\n                async: false\n            }).done(function(data) {\n                if (data && data.entry) {\n                    self.populateOrgsList(data.entry);\n                    sessionStorage.setItem(\"orgsData\", JSON.stringify(data.entry));\n                    callback(data.entry);\n                }\n            }).fail(function(xhr) {\n                callback({\"error\": xhr.responseText});\n                tnthAjax.sendError(xhr, \"/api/organization\");\n            });\n        }\n    };\n    OrgTool.prototype.onLoaded = function(userId, doPopulateUI) {\n        if (userId) { this.setUserId(userId); }\n        if (doPopulateUI) { this.populateUI(); }\n        $(\"#userOrgs input[name='organization']\").each(function() {\n            $(this).prop(\"checked\", false);\n        });\n        $(\"#clinics\").attr(\"loaded\", true);\n    };\n    OrgTool.prototype.setUserId = function(userId) {\n        $(\"#fillOrgs\").attr(\"userId\", userId);\n    };\n    OrgTool.prototype.getUserId = function() {\n        return $(\"#fillOrgs\").attr(\"userId\");\n    };\n    OrgTool.prototype.inArray = function(n, array){\n        if (!n || !array || !Array.isArray(array)) { return false; }\n        var found = false;\n        for (var index = 0; !found && index < array.length; index++) {\n            found = String(array[index]) === String(n);\n        }\n        return found;\n    };\n    OrgTool.prototype.getElementParentOrg = function(o){\n        var parentOrg;\n        if (!o) {\n            return false;\n        }\n        parentOrg = $(o).attr(\"data-parent-id\");\n        if (!parentOrg) {\n            parentOrg = $(o).closest(\".org-container[data-parent-id]\").attr(\"data-parent-id\");\n        }\n        return parentOrg;\n    };\n    OrgTool.prototype.getTopLevelOrgs = function() {\n        var ml = this.getOrgsList(), orgList = [];\n        for (var org in ml) {\n            if (ml[org].isTopLevel) {\n                orgList.push(org);\n            }\n        }\n        return orgList;\n    };\n    OrgTool.prototype.getOrgsList = function(){\n        return this.orgsList;\n    };\n    OrgTool.prototype.getOrgName = function(orgId){\n        var orgsList = this.getOrgsList();\n        if (orgId && orgsList.hasOwnProperty(orgId)) {\n            return orgsList[orgId].name;\n        }\n        return \"\";\n    };\n    OrgTool.prototype.filterOrgs = function(leafOrgs) {\n        leafOrgs = leafOrgs || [];\n        if (leafOrgs.length === 0) { return false; }\n        var self = this;\n        $(\"#fillOrgs input[name='organization']\").each(function() {\n            if (!self.inArray($(this).val(), leafOrgs)) {\n                $(this).hide();\n                if (self.orgsList[$(this).val()]) {\n                    var l = $(this).closest(\"label\");\n                    if (self.orgsList[$(this).val()].children.length === 0) {\n                        l.hide();\n                    } else {\n                        l.addClass(\"data-display-only\");\n                    }\n                }\n            }\n        });\n\n        var topList = self.getTopLevelOrgs();\n        topList.forEach(function(orgId) {\n            var allChildrenHidden = true;\n            $(\"#fillOrgs .org-container[data-parent-id='\" + orgId + \"']\").each(function() {\n                var subOrgs = $(this).find(\".org-container\");\n                if (subOrgs.length > 0) {\n                    var allSubOrgsHidden = true;\n                    subOrgs.each(function() {\n                        var isVisible = false;\n                        $(this).find(\"input[name='organization']\").each(function() {\n                            if ($(this).is(\":visible\") || String($(this).css(\"display\")) !== \"none\") {\n                                isVisible = true;\n                                allChildrenHidden = false;\n                            }\n                        });\n                        if (!isVisible) {\n                            $(this).hide();\n                        } else {\n                            allSubOrgsHidden = false;\n                        }\n                    });\n                    if (allSubOrgsHidden) {\n                        $(this).children(\"label\").hide();\n                    }\n                } else {\n                    var ip = $(this).find(\"input[name='organization']\");\n                    if (ip.length > 0) {\n                        ip.each(function() {\n                            if ($(this).is(\":visible\") || String($(this).css(\"display\")) !== \"none\") {\n                                allChildrenHidden = false;\n                            }\n                        });\n                    }\n                }\n            });\n            if (allChildrenHidden) {\n                $(\"#fillOrgs\").find(\"legend[orgid='\" + orgId + \"']\").hide();\n            }\n        });\n    };\n    OrgTool.prototype.findOrg = function(entry, orgId){\n        var org;\n        if (!entry || !orgId) {\n            return false;\n        }\n        entry.forEach(function(item) {\n            if (!org) {\n                if (parseInt(item.id) === parseInt(orgId)) {\n                    org = item;\n                }\n            }\n        });\n        return org;\n    };\n    OrgTool.prototype.getOrgName = function(orgId){\n        var org = this.orgsList[orgId];\n        if (!org) {\n            return \"\";\n        }\n        return org.name;\n    };\n    OrgTool.prototype.populateOrgsList = function(items) {\n        if (Object.keys(this.orgsList).length > 0) {\n            return this.orgsList;\n        }\n        var entry = items, self = this, parentId, orgsList = {};\n        if (!items) { return false; }\n        items.forEach(function(item) {\n            if (item.partOf) {\n                parentId = item.partOf.reference.split(\"/\").pop();\n                if (!orgsList[parentId]) {\n                    var o = self.findOrg(entry, parentId);\n                    orgsList[parentId] = new OrgObj(o.id, o.name);\n                }\n                orgsList[parentId].children.push(new OrgObj(item.id, item.name, parentId));\n                if (orgsList[item.id]) {\n                    orgsList[item.id].parentOrgId = parentId;\n                }\n                else {\n                    orgsList[item.id] = new OrgObj(item.id, item.name, parentId);\n                }\n            } else {\n                if (!orgsList[item.id]) {\n                    orgsList[item.id] = new OrgObj(item.id, item.name);\n                }\n                if (parseInt(item.id) !== 0) {\n                    orgsList[item.id].isTopLevel = true;\n                    self.TOP_LEVEL_ORGS.push(item.id);\n                }\n            }\n            if (item.extension) {\n                orgsList[item.id].extension = item.extension;\n            }\n            if (item.language) {\n                orgsList[item.id].language = item.language;\n            }\n            if (item.identifier) {\n                orgsList[item.id].identifier = item.identifier;\n                (item.identifier).forEach(function(identifier) {\n                    if (identifier.system === SYSTEM_IDENTIFIER_ENUM.shortname) {\n                        orgsList[item.id].shortname = identifier.value;\n                    }\n                });\n            }\n\n        });\n        items.forEach(function(item) {\n            if (item.partOf) {\n                parentId = item.partOf.reference.split(\"/\").pop();\n                if (orgsList[item.id]) {\n                    orgsList[item.id].parentOrgId = parentId;\n                }\n            }\n        });\n        if (items.length > 0) { this.initialized = true; }\n        this.orgsList = orgsList;\n        return orgsList;\n    };\n    OrgTool.prototype.getShortName = function(orgId) {\n        var shortName = \"\";\n        if (!orgId) { return shortName; }\n        var orgsList = this.getOrgsList();\n        var orgItem = orgsList.hasOwnProperty(orgId) ? orgsList[orgId]: {};\n        if (orgItem.shortname) {\n            shortName = orgItem.shortname;\n        }\n        return shortName;\n    };\n    OrgTool.prototype.populateUI = function(){\n        if (sessionStorage.orgsHTML) {\n            $(\"#fillOrgs\").html(sessionStorage.orgsHTML);\n            return true;\n        }\n        var self = this, container = $(\"#fillOrgs\"), orgsList = this.orgsList, parentContent = \"\";\n        var getState = (item) => {\n            if (!item.identifier) {\n                return \"\";\n            }\n            var s = \"\", found = false;\n            (item.identifier).forEach(function(i) {\n                if (!found && (i.system === SYSTEM_IDENTIFIER_ENUM.practice_region && i.value)) {\n                    s = (i.value).split(\":\")[1];\n                    found = true;\n                }\n            });\n            return s;\n        };\n        var keys = Object.keys(orgsList), parentOrgsArray = [];\n        keys = keys.sort();\n        keys.forEach(function(org) { //draw parent orgs first\n            if (orgsList[org].isTopLevel) {\n                parentOrgsArray.push(org);\n            }\n        });\n        parentOrgsArray = parentOrgsArray.sort(function(a, b) { //sort parent orgs by name\n            var orgA = orgsList[a], orgB = orgsList[b];\n            if (orgA.name < orgB.name) { return -1; }\n            if (orgA.name > orgB.name) { return 1; }\n            return 0;\n        });\n        var parentFragment = document.createDocumentFragment(), parentDiv;\n        parentOrgsArray.forEach(function(org) {\n            parentDiv = document.createElement(\"div\");\n            parentDiv.setAttribute(\"id\", org+\"_container\");\n            let parentOrgItem = orgsList[org];\n            let orgShortName = parentOrgItem.shortname || parentOrgItem.name;\n            let parentState = getState(parentOrgItem);\n            let parentOrgName = parentOrgItem.name;\n            if (parentOrgItem.children.length) {\n                if ($(\"#userOrgs legend[orgId='\" + org + \"']\").length === 0) {\n                    parentDiv.classList.add(\"parent-org-container\");\n                    parentContent = `<legend orgId=\"${org}\">${parentOrgName}</legend>\n                        <input class=\"tnth-hide\" type=\"checkbox\" name=\"organization\" parent_org=\"true\" data-org-name=\"${parentOrgName}\" data-short-name=\"${orgShortName}\" id=\"${org}_org\" state=\"${parentState}\" value=\"${org}\" /></div>`;\n                }\n            } else {\n                if ($(\"#userOrgs label[id='org-label-\" + org + \"']\").length === 0) {\n                    parentDiv.classList.add(\"parent-org-container\", \"parent-singleton\");\n                    parentContent = `<label id=\"org-label-${org}\" class=\"org-label\">\n                        <input class=\"clinic\" type=\"checkbox\" name=\"organization\" parent_org=\"true\" id=\"${org}_org\" state=\"${parentState}\" value=\"${org}\"\n                        data-parent-id=\"${org}\"  data-org-name=\"${parentOrgName}\" data-short-name=\"${orgShortName}\" data-parent-name=\"${parentOrgName}\"/><span>${parentOrgName}</span></label></div>`;\n                }\n            }\n            parentDiv.innerHTML = parentContent;\n            parentFragment.appendChild(parentDiv);\n        });\n        container.get(0).appendChild(parentFragment);\n        keys.forEach(function(org) { //draw child orgs\n            if (orgsList[org].children.length > 0) { // Fill in each child clinic\n                var childClinic = \"\";\n                var items = orgsList[org].children.sort(function(a, b) { // sort child clinic in alphabetical order\n                    if (a.name < b.name) { return -1; }\n                    if (a.name > b.name) { return 1; }\n                    return 0;\n                });\n                items.forEach(function(item) {\n                    var _parentOrgId = item.parentOrgId, _parentOrg = orgsList[_parentOrgId];\n                    var _isTopLevel = _parentOrg ? _parentOrg.isTopLevel : false;\n                    var state = getState(orgsList[_parentOrgId]);\n                    var topLevelOrgId = self.getTopLevelParentOrg(item.id);\n\n                    if ($(\"#fillOrgs input[name='organization'][value='\" + item.id + \"']\").length > 0) {\n                        return true;\n                    }\n                    var attrObj = {dataAttributes:(' data-parent-id=\"' + topLevelOrgId + '\"  data-parent-name=\"' + orgsList[topLevelOrgId].name + '\" '), containerClass: \"\", textClass: \"\"};\n                    if (_isTopLevel) {\n                        attrObj.dataAttributes = (' data-parent-id=\"' + _parentOrgId + '\"  data-parent-name=\"' + _parentOrg.name + '\" ');\n                    }\n                    if (orgsList[item.id].children.length > 0) {\n                        if (_isTopLevel) {\n                            attrObj.containerClass = \"sub-org-container\";\n                            attrObj.textClass = \"text-muted\";\n                        } else {\n                            attrObj.textClass = \"text-muter\";\n                        }\n                    } else {\n                        if (_isTopLevel) {\n                            attrObj.textClass = \"text-muted singleton\";\n                        }\n                    }\n                    childClinic = `<div id=\"${item.id}_container\" ${attrObj.dataAttributes} class=\"indent org-container ${attrObj.containerClass}\">\n                        <label id=\"org-label-${item.id}\" class=\"org-label ${attrObj.textClass}\">\n                        <input class=\"clinic\" type=\"checkbox\" name=\"organization\" id=\"${item.id}_org\" data-org-name=\"${item.name}\" data-short-name=\"${item.shortname || item.name}\" state=\"${state ? state : ''}\" value=\"${item.id}\" ${attrObj.dataAttributes} />\n                        <span>${item.name}</span></label></div>`;\n                    var parentOrgContainer = $(\"#\" + _parentOrgId + \"_container\");\n                    if (parentOrgContainer.length > 0) {\n                        parentOrgContainer.append(childClinic);\n                    } else {\n                        container.append(childClinic);\n                    }\n                });\n            }\n        });\n        sessionStorage.setItem(\"orgsHTML\", container.html());\n        if (!container.text()) {\n            container.html(i18next.t(\"No organizations available\"));\n        }\n    };\n    OrgTool.prototype.getSelectedOrgTopLevelParentOrg = function(){\n        return this.getTopLevelParentOrg(this.getSelectedOrg().val());\n    };\n    OrgTool.prototype.getSelectedOrg = function() {\n        return $(\"#userOrgs input[name='organization']:checked\");\n    };\n    OrgTool.prototype.getUserTopLevelParentOrgs = function(uo) {\n        var parentList = [], self = this;\n        if (!uo) {\n            return false;\n        }\n        if (uo.parentList) { return uo.parentList; }\n        uo.forEach(function(o) {\n            var p = self.getTopLevelParentOrg(o);\n            if (p && !self.inArray(p, parentList)) {\n                parentList.push(p);\n            }\n        });\n        uo.parentList = parentList;\n        return parentList;\n    };\n    OrgTool.prototype.getTopLevelParentOrg = function(currentOrg) {\n        var ml = this.getOrgsList(), currentOrgItem = ml[currentOrg], self = this;\n        if (!currentOrgItem) { return false; }\n        if (currentOrgItem.isTopLevel) {\n            return currentOrg;\n        }\n        if (currentOrgItem.parentOrgId) {\n            return self.getTopLevelParentOrg(currentOrgItem.parentOrgId);\n        }\n        return currentOrg;\n    };\n    OrgTool.prototype.getChildOrgs = function(orgs, orgList) {\n        orgList = orgList || [];\n        if (!orgs || !orgs.length) {\n            return orgList;\n        }\n        var mainOrgsList = this.getOrgsList(), childOrgs = [];\n        orgs.forEach(function(org) {\n            var o = mainOrgsList[org.id];\n            if (!o) {\n                return true;\n            }\n            orgList.push(org.id);\n            var c = o.children ? o.children : null;\n            if (c && c.length) {\n                c.forEach(function(i) {\n                    childOrgs.push(i);\n                });\n            }\n        });\n        return this.getChildOrgs(childOrgs, orgList);\n    };\n    OrgTool.prototype.getHereBelowOrgs = function(userOrgs) {\n        var mainOrgsList = this.getOrgsList(), self = this, here_below_orgs = [];\n        if (!userOrgs) {\n            var selectedOrg = this.getSelectedOrg();\n            if (selectedOrg.length > 0) {\n                userOrgs = [];\n                selectedOrg.each(function() {\n                    userOrgs.push($(this).val());\n                });\n            }\n        }\n        userOrgs = userOrgs || [];\n        userOrgs.forEach(function(orgId) {\n            here_below_orgs.push(orgId);\n            var co = mainOrgsList[orgId], cOrgs = self.getChildOrgs((co && co.children ? co.children : []));\n            if (cOrgs.length) {\n                here_below_orgs = here_below_orgs.concat(cOrgs);\n            }\n        });\n        return here_below_orgs;\n    };\n    OrgTool.prototype.morphPatientOrgs = function() {\n        var checkedOrgs = {}, orgs = $(\"#userOrgs input[name='organization']\");\n        orgs.each(function() {\n            $(this).closest(\"label\").addClass(\"radio-label\");\n            if ($(this).prop(\"checked\")) {\n                checkedOrgs[$(this).val()] = true;\n            }\n            $(this).attr(\"type\", \"radio\");\n            if (checkedOrgs[$(this).val()]) {\n                $(this).prop(\"checked\", true);\n            }\n        });\n        $(\"#userOrgs .noOrg-container\").hide();\n    };\n    return OrgTool;\n})();\n","import tnthAjax from \"./modules/TnthAjax.js\";\nimport tnthDates from \"./modules/TnthDate.js\";\nimport Utility from \"./modules/Utility.js\";\nimport OrgTool from \"./modules/OrgTool.js\";\n\n(function () { /*global Vue DELAY_LOADING i18next $ */\n    var DELAY_LOADING = true; //a workaround for hiding of loading indicator upon completion of loading of portal wrapper - loading indicator needs to continue displaying until patients list has finished loading\n    $.ajaxSetup({\n        contentType: \"application/json; charset=utf-8\"\n    });\n    var AdminObj = window.AdminObj = new Vue({\n        el: \"#adminTableContainer\",\n        errorCaptured: function (Error, Component, info) {\n            console.error(\"Error: \", Error, \" Component: \", Component, \" Message: \", info); /* console global */\n            return false;\n        },\n        errorHandler: function (err, vm) {\n            this.dataError = true;\n            var errorElement = document.getElementById(\"admin-table-error-message\");\n            if (errorElement) {\n                errorElement.innerHTML = \"Error occurred initializing Admin Vue instance.\";\n            }\n            console.warn(\"Admin Vue instance threw an error: \", vm, this);\n            console.error(\"Error thrown: \", err);\n        },\n        created: function () {\n            this.injectDependencies();\n            this.getOrgTool();\n        },\n        mounted: function () {\n            var self = this;\n            Utility.VueErrorHandling(); /* global VueErrorHandling */\n            this.preConfig(function () {\n                if ($(\"#adminTable\").length > 0) {\n                    self.rowLinkEvent();\n                    self.setColumnSelections();\n                    self.setTableFilters(self.userId); //set user's preference for filter(s)\n                    self.initTableEvents();\n                    self.initOrgsList();\n                    self.handleDisableFields();\n                    self.handleDeletedUsersVis();\n                    self.setRowItemEvent();\n                    self.handleAffiliatedUIVis();\n                    self.addFilterPlaceHolders();\n                } else {\n                    self.initOrgsList();\n                    self.handleDownloadModal();\n                }\n                setTimeout(function () {\n                    self.fadeLoader();\n                }, 350);\n            });\n        },\n        data: {\n            dataError: false,\n            configured: false,\n            initIntervalId: 0,\n            sortFilterEnabled: false,\n            showDeletedUsers: false,\n            isAdmin: false,\n            userId: null,\n            userRoles: [],\n            userOrgs: [],\n            topLevelOrgs: [],\n            orgTool: null,\n            orgsSelector: {\n                selectAll: false,\n                clearAll: false,\n                close: false\n            },\n            ROW_ID_PREFIX: \"data_row_\",\n            tableIdentifier: \"adminList\",\n            popoverEventInitiated: false,\n            dependencies: {},\n            tableConfig: {\n                formatShowingRows: function (pageFrom, pageTo, totalRows) {\n                    var rowInfo;\n                    setTimeout(function () {\n                        rowInfo = i18next.t(\"Showing {pageFrom} to {pageTo} of {totalRows} users\").replace(\"{pageFrom}\", pageFrom).replace(\"{pageTo}\", pageTo).replace(\"{totalRows}\", totalRows);\n                        $(\".pagination-detail .pagination-info\").html(rowInfo);\n                    }, 10);\n                    return rowInfo;\n                },\n                formatRecordsPerPage: function (pageNumber) {\n                    return i18next.t(\"{pageNumber} records per page\").replace(\"{pageNumber}\", pageNumber);\n                },\n                formatToggle: function () {\n                    return i18next.t(\"Toggle\");\n                },\n                formatColumns: function () {\n                    return i18next.t(\"Columns\");\n                },\n                formatAllRows: function () {\n                    return i18next.t(\"All rows\");\n                },\n                formatSearch: function () {\n                    return i18next.t(\"Search\");\n                },\n                formatNoMatches: function () {\n                    return i18next.t(\"No matching records found\");\n                },\n                formatExport: function () {\n                    return i18next.t(\"Export data\");\n                }\n            },\n            currentTablePreference: null,\n            errorCollection: {\n                orgs: \"\",\n                demo: \"\"\n            },\n            instruments: {\n                list: [],\n                dataType: \"csv\",\n                selected: \"\",\n                message: \"\"\n            },\n            patientReports: {\n                data: [],\n                message: \"\",\n                loading: false\n            }\n        },\n        methods: {\n            injectDependencies: function () {\n                var self = this;\n                window.portalModules = window.portalModules || {}; /*eslint security/detect-object-injection: off */\n                window.portalModules[\"tnthAjax\"] = tnthAjax;\n                window.portalModules[\"tnthDates\"] = tnthDates;\n                window.portalModules[\"OrgTool\"] = OrgTool;\n                for (var key in window.portalModules) {\n                    if ({}.hasOwnProperty.call(window.portalModules, key)) {\n                        self.dependencies[key] = window.portalModules[key];\n                    }\n                }\n            },\n            getDependency: function (key) {\n                if (key && this.dependencies.hasOwnProperty(key)) {\n                    return this.dependencies[key];\n                } else {\n                    throw Error(\"Dependency \" + key + \" not found.\"); //throw error ? should be visible in console\n                }\n            },\n            showMain: function () {\n                $(\"#mainHolder\").css({\n                    \"visibility\": \"visible\",\n                    \"-ms-filter\": \"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\",\n                    \"filter\": \"alpha(opacity=100)\",\n                    \"-moz-opacity\": 1,\n                    \"-khtml-opacity\": 1,\n                    \"opacity\": 1\n                });\n            },\n            setOrgsMenuHeight: function (padding) {\n                padding = padding || 85;\n                var h = parseInt($(\"#fillOrgs\").height());\n                if (h > 0) {\n                    var adminTable = $(\"div.admin-table\"),\n                        orgMenu = $(\"#org-menu\");\n                    var calculatedHeight = h + padding;\n                    $(\"#org-menu\").height(calculatedHeight);\n                    if (adminTable.height() < orgMenu.height()) {\n                        setTimeout(function () {\n                            adminTable.height(orgMenu.height() + calculatedHeight);\n                        }, 0);\n                    }\n                }\n            },\n            clearFilterButtons: function () {\n                this.setOrgsSelector({\n                    selectAll: false,\n                    clearAll: false,\n                    close: false\n                });\n            },\n            fadeLoader: function () {\n                DELAY_LOADING = false;\n                var self = this;\n                setTimeout(function () {\n                    self.showMain();\n                }, 250);\n                setTimeout(function () {\n                    $(\"#loadingIndicator\").fadeOut();\n                }, 300);\n            },\n            showLoader: function () {\n                $(\"#loadingIndicator\").show();\n            },\n            preConfig: function (callback) {\n                var self = this,\n                    tnthAjax = this.getDependency(\"tnthAjax\");\n                callback = callback || function () {};\n                tnthAjax.getCurrentUser(function (data) {\n                    if (data) {\n                        self.userId = data.id;\n                        self.setIdentifier();\n                        self.setSortFilterProp();\n                        self.configTable();\n                        self.configured = true;\n                        setTimeout(function () {\n                            callback();\n                        }, 50);\n                    } else {\n                        alert(i18next.t(\"User Id is required\")); /* global i18next */\n                        self.configured = true;\n                        return false;\n                    }\n                }, {\n                    sync: true\n                });\n            },\n            setIdentifier: function () {\n                var adminTableContainer = $(\"#adminTableContainer\");\n                if (adminTableContainer.hasClass(\"patient-view\")) {\n                    this.tableIdentifier = \"patientList\";\n                }\n                if (adminTableContainer.hasClass(\"staff-view\")) {\n                    this.tableIdentifier = \"staffList\";\n                }\n            },\n            setOrgsSelector: function (obj) {\n                if (!obj) {\n                    return false;\n                }\n                var self = this;\n                for (var prop in obj) {\n                    if (self.orgsSelector.hasOwnProperty(prop)) {\n                        self.orgsSelector[prop] = obj[prop];\n                    }\n                }\n            },\n            setSortFilterProp: function () {\n                this.sortFilterEnabled = this.tableIdentifier === \"patientList\";\n            },\n            configTable: function () {\n                var options = {};\n                var sortObj = this.getTablePreference(this.userId, this.tableIdentifier);\n                sortObj = sortObj || this.getDefaultTablePreference();\n                options.sortName = sortObj.sort_field;\n                options.sortOrder = sortObj.sort_order;\n                options.filterBy = sortObj;\n                options.exportOptions = { /* global  Utility getExportFileName*/\n                    fileName: Utility.getExportFileName($(\"#adminTableContainer\").attr(\"data-export-prefix\"))\n                };\n                $(\"#adminTable\").bootstrapTable(this.getTableConfigOptions(options));\n            },\n            getTableConfigOptions: function (options) {\n                if (!options) {\n                    return this.tableConfig;\n                }\n                return $.extend({}, this.tableConfig, options);\n            },\n            initTableEvents: function () {\n                var self = this;\n                $(\"#adminTable\").on(\"reset-view.bs.table\", function () {\n                    self.addFilterPlaceHolders();\n                    self.resetRowVisByActivationStatus();\n                    self.setRowItemEvent();\n                });\n                $(\"#adminTable\").on(\"search.bs.table\", function () {\n                    self.resetRowVisByActivationStatus();\n                    self.setRowItemEvent();\n                });\n                $(\"#adminTable\").on(\"page-change.bs.table\", function () {\n                    if (!$(\"#patientList .tnth-headline\").isOnScreen()) { /*global isOnScreen */\n                        $(\"html, body\").animate({\n                            scrollTop: $(\".fixed-table-toolbar\").offset().top\n                        }, 2000);\n                    }\n                });\n                $(window).bind(\"scroll mousedown mousewheel keyup\", function () {\n                    if ($(\"html, body\").is(\":animated\")) {\n                        $(\"html, body\").stop(true, true);\n                    }\n                });\n                $(\"#chkDeletedUsersFilter\").on(\"click\", function () {\n                    self.handleDeletedUsersVis();\n                });\n                if (this.sortFilterEnabled) {\n                    $(\"#adminTable\").on(\"sort.bs.table\", function (e, name, order) {\n                        setTimeout(function () {\n                            self.setTablePreference(self.userId, self.tableIdentifier, name, order);\n                        }, 10);\n                    }).on(\"column-search.bs.table\", function () {\n                        setTimeout(function () {\n                            self.setTablePreference(self.userId);\n                        }, 10);\n                    }).on(\"column-switch.bs.table\", function () {\n                        setTimeout(function () {\n                            self.setTablePreference(self.userId);\n                        }, 10);\n                    });\n                }\n                $(\"#adminTableToolbar .orgs-filter-warning\").popover();\n            },\n            setShowDeletedUsersFlag: function () {\n                if (!$(\"#chkDeletedUsersFilter\").length) {\n                    return;\n                }\n                this.showDeletedUsers = $(\"#chkDeletedUsersFilter\").is(\":checked\");\n            },\n            handleDeletedUsersVis: function () {\n                this.setShowDeletedUsersFlag();\n                if (this.showDeletedUsers) {\n                    $(\"#adminTable\").bootstrapTable(\"filterBy\", {\n                        activationstatus: \"deactivated\"\n                    });\n                } else {\n                    $(\"#adminTable\").bootstrapTable(\"filterBy\", {\n                        activationstatus: \"activated\"\n                    });\n                }\n            },\n            handleAffiliatedUIVis: function () {\n                $(\"#adminTableContainer input[data-field='id']:checkbox, #adminTableContainer input[data-field='deactivate']:checkbox, #adminTableContainer input[data-field='activationstatus']:checkbox\").closest(\"label\").hide(); //hide checkbox for hidden id field and deactivate account field from side menu\n                $(\"#patientReportModal\").modal({\n                    \"show\": false\n                });\n            },\n            setRowItemEvent: function () {\n                var self = this;\n                $(\"#adminTableContainer .btn-report\").off(\"click\").on(\"click\", function (e) {\n                    e.stopPropagation();\n                    if ($(this).closest(\".deleted-user-row\").length) { //prevent viewing of report for deleted users\n                        return false;\n                    }\n                    self.getReportModal($(this).attr(\"data-patient-id\"), {\n                        documentDataType: $(this).attr(\"data-document-type\")\n                    });\n                });\n                $(\"#adminTableContainer [name='chkRole']\").each(function() {\n                    $(this).off(\"click\").on(\"click\", function(e) {\n                        e.stopPropagation();\n                        var userId = $(this).attr(\"data-user-id\");\n                        if (!userId) {\n                            return false;\n                        }\n                        var role = $(this).attr(\"data-role\"), checked = $(this).is(\":checked\"), tnthAjax = self.getDependency(\"tnthAjax\");\n                        $(\"#loadingIndicator_\"+userId).show();\n                        $(\"#\" + self.ROW_ID_PREFIX + userId).addClass(\"loading\");\n                        tnthAjax.getRoles(userId, function(data) {\n                            if (!data || data.error) {\n                                $(\"#loadingIndicator_\"+userId).hide();\n                                $(\"#\" + self.ROW_ID_PREFIX + userId).removeClass(\"loading\");\n                                alert(i18next.t(\"Error occurred retrieving roles for user\"));\n                                return false;\n                            }\n                            var arrRoles = data.roles;\n                            arrRoles = $.grep(arrRoles, function(item) {\n                                return String(item.name).toLowerCase() !== String(role).toLowerCase();\n                            });\n                            if (checked) {\n                                arrRoles = arrRoles.concat([{name: role}]);\n                            }\n                            tnthAjax.putRoles(userId, {roles:arrRoles}, \"\", function(data) {\n                                $(\"#loadingIndicator_\"+userId).hide();\n                                $(\"#\" + self.ROW_ID_PREFIX + userId).removeClass(\"loading\");\n                                if (data.error) {\n                                    alert(i18next.t(\"Error occurred updating user roles\"));\n                                    return false;\n                                }\n                            });\n                        });\n                    });\n                });\n                $(\"#adminTableContainer .btn-delete-user\").each(function () {\n                    $(this).popover({\n                        container: \"#adminTable\",\n                        html: true,\n                        content: [\"<div>{title}</div>\",\n                            \"<div class='buttons-container'>\",\n                            \"<button class='btn btn-small btn-default popover-btn-deactivate' data-user-id='{userid}'>{yes}</button>&nbsp;\",\n                            \"<button class='btn btn-small btn-default popover-btn-cancel'>{no}</button>\",\n                            \"</div>\"\n                        ]\n                            .join(\"\")\n                            .replace(\"{title}\", i18next.t(\"Are you sure you want to deactivate this account?\"))\n                            .replace(/\\{userid\\}/g, $(this).attr(\"data-user-id\"))\n                            .replace(\"{yes}\", i18next.t(\"Yes\"))\n                            .replace(\"{no}\", i18next.t(\"No\")),\n                        placement: \"top\"\n                    });\n                    $(this).off(\"click\").on(\"click\", function (e) {\n                        e.stopPropagation();\n                        $(this).popover(\"show\");\n                        var userId = $(this).attr(\"data-user-id\");\n                        if (!($(\"#data-delete-loader-\" + userId).length)) {\n                            $(this).parent().append(\"<i id=\\\"data-delete-loader-{userid}\\\" class=\\\"fa fa-spinner tnth-hide\\\"></i>\".replace(\"{userid}\", userId));\n                        }\n                    });\n                });\n                $(document).undelegate(\".popover-btn-deactivate\", \"click\").on(\"click\", \".popover-btn-deactivate\", function (e) {\n                    e.stopPropagation();\n                    var userId = $(this).attr(\"data-user-id\");\n                    var loader = $(\"#data-delete-loader-\" + userId);\n                    loader.show();\n                    $(\"#btnDeleted\" + userId).hide();\n                    $(this).closest(\".popover\").popover(\"hide\");\n                    setTimeout(function () {\n                        self.deactivateUser(userId, !self.showDeletedUsers, function () {\n                            loader.hide();\n                            $(\"#btnDeleted\" + userId).show();\n                        });\n                    }, 150);\n                });\n                $(\"#adminTable .reactivate-icon\").off(\"click\").on(\"click\", function (e) {\n                    e.stopPropagation();\n                    self.reactivateUser($(this).attr(\"data-user-id\"));\n                });\n\n                $(document).undelegate(\".popover-btn-cancel\", \"click\").on(\"click\", \".popover-btn-cancel\", function (e) {\n                    e.stopPropagation();\n                    $(this).closest(\".popover\").popover(\"hide\");\n                });\n                $(document).on(\"click\", function () {\n                    $(\"#adminTable .popover\").popover(\"hide\");\n                });\n            },\n            addFilterPlaceHolders: function () {\n                $(\"#adminTable .filterControl input\").attr(\"placeholder\", i18next.t(\"Enter Text\"));\n                $(\"#adminTable .filterControl select option[value='']\").text(i18next.t(\"Select\"));\n            },\n            handleMedidataRave: function (params) {\n                if (!$(\"#adminTableContainer\").hasClass(\"patient-view\")) { //check if this is a patients list\n                    return false;\n                }\n                var self = this,\n                    tnthAjax = this.getDependency(\"tnthAjax\");\n                params = params || {};\n                tnthAjax.sendRequest(\"/api/settings\", \"GET\", this.userId, params, function (data) {\n                    if (!data || data.error || !data.MEDIDATA_RAVE_ORG) {\n                        return false;\n                    }\n                    var match = $.grep(self.topLevelOrgs, function (org) {\n                        return data.MEDIDATA_RAVE_ORG === org;\n                    });\n                    if (match.length === 0) {\n                        return false;\n                    }\n                    self.setCreateAccountVis(true);\n                    self.checkAdmin();\n                });\n            },\n            setCreateAccountVis: function (hide) {\n                var createAccountElements = $(\"#patientListOptions .or, #createUserLink\");\n                if (hide) {\n                    createAccountElements.css(\"display\", \"none\");\n                    return;\n                }\n                createAccountElements.css(\"display\", \"block\");\n            },\n            getUserRoles: function (callback) {\n                callback = callback || function () {};\n                if (this.userRoles.length > 0) {\n                    callback(this.userRoles);\n                    return;\n                }\n                this.setUserRoles(callback);\n            },\n            setUserRoles: function (callback) {\n                callback = callback || function () {};\n                var self = this,\n                    tnthAjax = this.getDependency(\"tnthAjax\");\n                tnthAjax.getRoles(this.userId, function (data) {\n                    if (!data || data.error) {\n                        callback({\n                            \"error\": i18next.t(\"Error occurred setting user roles\")\n                        });\n                        return false;\n                    }\n                    self.userRoles = data.roles.map(function (item) {\n                        return item.name;\n                    });\n                    self.isAdmin = self.userRoles.indexOf(\"admin\") !== -1;\n                    callback();\n                });\n            },\n            checkAdmin: function () {\n                var self = this;\n                this.getUserRoles(function () {\n                    if (self.isAdmin) {\n                        self.setCreateAccountVis(); //allow admin user to create account\n                    }\n                });\n            },\n            handleDisableFields: function () {\n                this.handleMedidataRave(); //a function specifically created to handle MedidataRave related stuff\n                //can do other things related to disabling fields here if need be\n            },\n            setUserOrgs: function () {\n                if (!this.userId) {\n                    return false;\n                }\n                var self = this;\n                $.ajax({\n                    type: \"GET\",\n                    async: false,\n                    url: \"/api/demographics/\" + this.userId\n                }).done(function (data) {\n                    if (data && data.careProvider) {\n                        self.userOrgs = (data.careProvider).map(function (val) {\n                            var orgID = val.reference.split(\"/\").pop();\n                            if (parseInt(orgID) === 0) {\n                                $(\"#createUserLink\").attr(\"disabled\", true);\n                            }\n                            return orgID;\n                        });\n                        if (self.userOrgs.length === 0) {\n                            $(\"#createUserLink\").attr(\"disabled\", true);\n                        }\n                    }\n                }).fail(function () {\n                    alert(i18next.t(\"Error occurred setting user organizations\"));\n                });\n            },\n            getUserOrgs: function () {\n                if (this.userOrgs.length === 0) {\n                    this.setUserOrgs(this.userId);\n                }\n                return this.userOrgs;\n            },\n            getOrgTool: function () {\n                if (!this.orgTool) {\n                    this.orgTool = new(this.getDependency(\"OrgTool\"))();\n                }\n                return this.orgTool;\n            },\n            setTopLevelOrgs: function () {\n                var self = this;\n                this.topLevelOrgs = (this.userOrgs).map(function (orgId) {\n                    return self.orgTool.getOrgName(self.orgTool.getTopLevelParentOrg(orgId));\n                });\n            },\n            initOrgsList: function () {\n                if ($(\"#orglistSelector\").length === 0) {\n                    return false;\n                }\n                var self = this;\n                this.setUserOrgs();\n                this.orgTool.init(function (data) {\n                    if (data.error) {\n                        self.errorCollection.orgs = i18next.t(\"Error occurred retrieving data from server.\");\n                        self.fadeLoader();\n                        return false;\n                    } else {\n                        self.errorCollection.orgs = \"\";\n                    }\n                    self.setTopLevelOrgs();\n                    self.orgTool.populateUI(); //populate orgs dropdown UI\n                    var hbOrgs = self.orgTool.getHereBelowOrgs(self.getUserOrgs()); //filter orgs UI based on user's orgs\n                    self.orgTool.filterOrgs(hbOrgs);\n                    self.initOrgsFilter();\n                    self.initOrgsEvent();\n                    self.fadeLoader();\n                });\n            },\n            siteFilterApplied: function () {\n                return this.currentTablePreference &&\n                    this.currentTablePreference.filters &&\n                    this.currentTablePreference.filters.orgs_filter_control &&\n                    this.currentTablePreference.filters.orgs_filter_control.length;\n            },\n            initOrgsFilter: function () {\n                var orgFields = $(\"#userOrgs input[name='organization']\");\n                var fi = this.currentTablePreference ? this.currentTablePreference.filters : {};\n                var fa = fi && fi.orgs_filter_control ? fi.orgs_filter_control.split(\",\") : null;\n                orgFields.each(function () {\n                    $(this).prop(\"checked\", false);\n                    if (!fa) {\n                        return true;\n                    }\n                    var oself = $(this),\n                        val = oself.val();\n                    fa = fa.map(function (item) {\n                        return String(item);\n                    });\n                    oself.prop(\"checked\", fa.indexOf(String(val)) !== -1);\n                });\n                if (this.orgTool.getHereBelowOrgs(this.getUserOrgs()).length === 1) {\n                    orgFields.prop(\"checked\", true);\n                }\n            },\n            initOrgsEvent: function () {\n                var ofields = $(\"#userOrgs input[name='organization']\");\n                if (ofields.length === 0) {\n                    return false;\n                }\n                var self = this;\n\n                $(\"#orglistSelector .orgs-filter-warning\").popover();\n\n                $(\"body\").on(\"click\", function (e) {\n                    if ($(e.target).closest(\"#orglistSelector\").length === 0) {\n                        $(\"#orglistSelector\").removeClass(\"open\");\n                    }\n                });\n\n                $(\"#orglist-dropdown\").on(\"click touchstart\", function () {\n                    $(this).find(\".glyphicon-menu-up, .glyphicon-menu-down\").toggleClass(\"tnth-hide\"); //toggle menu up/down button\n                    setTimeout(function () {\n                        self.setOrgsMenuHeight(95);\n                        self.clearFilterButtons();\n                    }, 100);\n                });\n                /* attach orgs related events to UI components */\n                ofields.each(function () {\n                    $(this).on(\"click touchstart\", function (e) {\n                        e.stopPropagation();\n                        var isChecked = $(this).is(\":checked\");\n                        var childOrgs = self.orgTool.getHereBelowOrgs([$(this).val()]);\n                        if (childOrgs && childOrgs.length) {\n                            childOrgs.forEach(function (org) {\n                                $(\"#userOrgs input[name='organization'][value='\" + org + \"']\").prop(\"checked\", isChecked);\n                            });\n                        }\n                        self.setOrgsSelector({\n                            selectAll: false,\n                            clearAll: false,\n                            close: false\n                        });\n                        self.setTablePreference(self.userId, self.tableIdentifier);\n                        setTimeout(function () {\n                            self.showLoader();\n                            location.reload();\n                        }, 150);\n                    });\n                });\n                $(\"#orglist-selectall-ckbox\").on(\"click touchstart\", function (e) {\n                    e.stopPropagation();\n                    var orgsList = [];\n                    self.setOrgsSelector({\n                        selectAll: true,\n                        clearAll: false,\n                        close: false\n                    });\n                    $(\"#userOrgs input[name='organization']\").filter(\":visible\").each(function () {\n                        if ($(this).css(\"display\") !== \"none\") {\n                            $(this).prop(\"checked\", true);\n                            orgsList.push($(this).val());\n                        }\n                    });\n                    self.setTablePreference(self.userId, self.tableIdentifier); //pre-set user preference for filtering\n                    if (orgsList.length > 0) {\n                        setTimeout(function () {\n                            self.showLoader();\n                            location.reload();\n                        }, 150);\n                    }\n                });\n                $(\"#orglist-clearall-ckbox\").on(\"click touchstart\", function (e) {\n                    e.stopPropagation();\n                    self.clearOrgsSelection();\n                    self.setOrgsSelector({\n                        selectAll: false,\n                        clearAll: true,\n                        close: false\n                    });\n                    self.setTablePreference(self.userId, self.tableIdentifier);\n                    setTimeout(function () {\n                        self.showLoader();\n                        location.reload();\n                    }, 150);\n                });\n                $(\"#orglist-close-ckbox\").on(\"click touchstart\", function (e) {\n                    e.stopPropagation();\n                    self.setOrgsSelector({\n                        selectAll: false,\n                        clearAll: false,\n                        close: true\n                    });\n                    $(\"#orglistSelector\").trigger(\"click\");\n                    return false;\n                });\n            },\n            getInstrumentList: function (callback) {\n                var self = this;\n                callback = callback || function() {};\n                tnthAjax.getInstrumentsList(true, function (data) {\n                    if (!data || data.error) {\n                        callback({error: true});\n                        return false;\n                    }\n                    var instrumentList = data;\n                    var parentOrgList = self.orgTool.getUserTopLevelParentOrgs(self.getUserOrgs());\n                    if (instrumentList && parentOrgList && parentOrgList.length > 0) {\n                        var instrumentItems = [];\n                        parentOrgList.forEach(function (o) {\n                            if (instrumentList.hasOwnProperty(o)) {\n                                instrumentList[o].forEach(function (n) {\n                                    instrumentItems.push(n);\n                                });\n                            }\n                        });\n                        self.instruments.data = instrumentItems;\n                        if (instrumentItems.length > 0) {\n                            $(\".instrument-container\").hide();\n                            var found = false;\n                            instrumentItems.forEach(function (item) {\n                                var instrumentContainer = $(\"#\" + item + \"_container\");\n                                found = instrumentContainer.length > 0;\n                                if (found) {\n                                    instrumentContainer.show();\n                                }\n                            });\n                            if (!found) {\n                                $(\".instrument-container\").show();\n                            }\n                        }\n                    }\n                    callback();\n                });\n            },\n            setInstruments: function (event) {\n                if (event.target.value && $(event.target).is(\":checked\")) {\n                    this.instruments.selected = this.instruments.selected + (this.instruments.selected !== \"\" ? \"&\" : \"\") + \"instrument_id=\" + event.target.value;\n                    return;\n                }\n                if ($(\"input[name=instrument]:checked\").length === 0) {\n                    this.instruments.selected = \"\";\n                }\n            },\n            setDataType: function (event) {\n                this.instruments.showMessage = false;\n                this.instruments.dataType = event.target.value;\n            },\n            hasInstrumentsSelection: function () {\n                return this.instruments.selected !== \"\" && this.instruments.dataType !== \"\";\n            },\n            handleDownloadModal: function () {\n                if ($(\"#dataDownloadModal\").length === 0) {\n                    return false;\n                }\n                var self = this;\n                this.getInstrumentList(function() {\n                    $(\"#dataDownloadModal\").on(\"shown.bs.modal\", function () { //populate instruments list based on user's parent org\n                        self.instruments.selected = \"\";\n                        self.instruments.dataType = \"csv\";\n                        $(\"#patientsInstrumentList\").addClass(\"ready\");\n                        $(this).find(\"[name='instrument']\").prop(\"checked\", false);\n                    });\n                });\n            },\n            clearOrgsSelection: function () {\n                $(\"#userOrgs input[name='organization']\").prop(\"checked\", false);\n                this.clearFilterButtons();\n            },\n            getDefaultTablePreference: function () {\n                return {\n                    sort_field: \"id\",\n                    sort_order: \"desc\"\n                };\n            },\n            getTablePreference: function (userId, tableName, setFilter, setColumnSelections) {\n                if (this.currentTablePreference) {\n                    return this.currentTablePreference;\n                }\n                var prefData = null,\n                    self = this,\n                    uid = userId || self.userId;\n                var tableIdentifier = tableName || self.tableIdentifier;\n                var tnthAjax = self.getDependency(\"tnthAjax\");\n\n                tnthAjax.getTablePreference(uid, tableIdentifier, {\n                    \"sync\": true\n                }, function (data) {\n                    if (!data || data.error) {\n                        return false;\n                    }\n                    prefData = data || self.getDefaultTablePreference();\n                    self.currentTablePreference = prefData;\n\n                    if (setFilter) { //set filter values\n                        self.setTableFilters(uid);\n                    }\n                    if (setColumnSelections) { //set column selection(s)\n                        self.setColumnSelections();\n                    }\n                });\n                return prefData;\n            },\n            setColumnSelections: function () {\n                if (!this.sortFilterEnabled) {\n                    return false;\n                }\n                var prefData = this.getTablePreference(this.userId, this.tableIdentifier);\n                var hasColumnSelections = prefData && prefData.filters && prefData.filters.column_selections;\n                if (!hasColumnSelections) {\n                    return false;\n                }\n                var visibleColumns = $(\"#adminTable\").bootstrapTable(\"getVisibleColumns\");\n                visibleColumns.forEach(function (c) { //hide visible columns\n                    if (String(c.class).toLowerCase() === \"always-visible\") {\n                        return true;\n                    }\n                    $(\"#adminTable\").bootstrapTable(\"hideColumn\", c.field);\n                });\n                prefData.filters.column_selections.forEach(function (column) { //show column(s) based on preference\n                    $(\".fixed-table-toolbar input[type='checkbox'][data-field='\" + column + \"']\").prop(\"checked\", true);\n                    $(\"#adminTable\").bootstrapTable(\"showColumn\", column);\n                });\n            },\n            setTableFilters: function (userId) {\n                var prefData = this.currentTablePreference,\n                    tnthAjax = this.getDependency(\"tnthAjax\");\n                if (!prefData) {\n                    tnthAjax.getTablePreference(userId || this.userId, this.tableIdentifier, {\n                        \"sync\": true\n                    }, function (data) {\n                        if (!data || data.error) {\n                            return false;\n                        }\n                        prefData = data;\n                    });\n                }\n                if (prefData && prefData.filters) { //set filter values\n                    var fname = \"\";\n                    for (var item in prefData.filters) {\n                        fname = \"#adminTable .bootstrap-table-filter-control-\" + item;\n                        if ($(fname).length === 0) {\n                            continue;\n                        }\n                        //note this is based on the trigger event for filtering specify in the plugin\n                        $(fname).val(prefData.filters[item]);\n                        $(fname).trigger($(fname).get(0).tagName === \"INPUT\" ? \"keyup\" : \"change\");\n                    }\n                }\n            },\n            setTablePreference: function (userId, tableName, sortField, sortOrder, filters) {\n                var tnthAjax = this.getDependency(\"tnthAjax\");\n                tableName = tableName || this.tableIdentifier;\n                if (!tableName) {\n                    return false;\n                }\n                userId = userId || this.userId;\n                var data = this.getDefaultTablePreference();\n                if (sortField && sortOrder) {\n                    data[\"sort_field\"] = sortField;\n                    data[\"sort_order\"] = sortOrder;\n                } else {\n                    //get selected sorted field information on UI\n                    var sortedField = $(\"#adminTable th[data-field]\").has(\".sortable.desc, .sortable.asc\");\n                    if (sortedField.length > 0) {\n                        data[\"sort_field\"] = sortedField.attr(\"data-field\");\n                        var sortedOrder = \"desc\";\n                        sortedField.find(\".sortable\").each(function () {\n                            if ($(this).hasClass(\"desc\")) {\n                                sortedOrder = \"desc\";\n                            } else if ($(this).hasClass(\"asc\")) {\n                                sortedOrder = \"asc\";\n                            }\n                        });\n                        data[\"sort_order\"] = sortedOrder;\n                    }\n                }\n                var __filters = filters || {};\n\n                //get fields\n                if (Object.keys(__filters).length === 0) {\n                    $(\"#adminTable .filterControl select, #adminTable .filterControl input\").each(function () {\n                        if ($(this).val()) {\n                            var field = $(this).closest(\"th\").attr(\"data-field\");\n                            __filters[field] = $(this).get(0).nodeName.toLowerCase() === \"select\" ? $(this).find(\"option:selected\").text() : $(this).val();\n                        }\n                    });\n                }\n                //get selected orgs from the filter list by site control\n                var selectedOrgs = \"\";\n                $(\"#userOrgs input[name='organization']\").each(function () {\n                    if ($(this).is(\":checked\") && ($(this).css(\"display\") !== \"none\")) {\n                        selectedOrgs += (selectedOrgs ? \",\" : \"\") + $(this).val();\n                    }\n                });\n                __filters[\"orgs_filter_control\"] = selectedOrgs;\n                //get column selections\n                __filters[\"column_selections\"] = [];\n                $(\".fixed-table-toolbar input[type='checkbox'][data-field]:checked\").each(function () {\n                    __filters[\"column_selections\"].push($(this).attr(\"data-field\"));\n                });\n                data[\"filters\"] = __filters;\n                if (Object.keys(data).length > 0) {\n                    tnthAjax.setTablePreference(userId, this.tableIdentifier, {\n                        \"data\": JSON.stringify(data)\n                    });\n                    this.currentTablePreference = data;\n                }\n            },\n            getReportModal: function (patientId, options) {\n                $(\"#patientReportModal\").modal(\"show\");\n                this.patientReports.loading = true;\n                var self = this,\n                    tnthDates = self.getDependency(\"tnthDates\"),\n                    tnthAjax = self.getDependency(\"tnthAjax\");\n                options = options || {};\n                tnthAjax.patientReport(patientId, options, function (data) {\n                    self.patientReports.data = [];\n                    if (!data || data.error) {\n                        self.patientReports.message = i18next.t(\"Error occurred retrieving patient report\");\n                        return false;\n                    }\n                    if (data[\"user_documents\"] && data[\"user_documents\"].length > 0) {\n                        var existingItems = {},\n                            count = 0;\n                        var documents = data[\"user_documents\"].sort(function (a, b) { //sort to get the latest first\n                            return new Date(b.uploaded_at) - new Date(a.uploaded_at);\n                        });\n                        documents.forEach(function (item) {\n                            var c = item[\"contributor\"];\n                            if (c && !existingItems[c]) { //only draw the most recent, same report won't be displayed\n                                if (options.documentDataType && String(options.documentDataType).toLowerCase() !== String(c).toLowerCase()) {\n                                    return false;\n                                }\n                                self.patientReports.data.push({\n                                    contributor: item.contributor,\n                                    fileName: item.filename,\n                                    date: tnthDates.formatDateString(item.uploaded_at, \"iso\"),\n                                    download: \"<a title='\" + i18next.t(\"Download\") + \"' href='\" + \"/api/user/\" + item[\"user_id\"] + \"/user_documents/\" + item[\"id\"] + \"'><i class='fa fa-download'></i></a>\"\n                                });\n                                existingItems[c] = true;\n                                count++;\n                            }\n                        });\n                        if (count > 1) {\n                            $(\"#patientReportModal .modal-title\").text(i18next.t(\"Patient Reports\"));\n                        } else {\n                            $(\"#patientReportModal .modal-title\").text(i18next.t(\"Patient Report\"));\n                        }\n                        self.patientReports.message = \"\";\n                        $(\"#patientReportContent .btn-all\").attr(\"href\", \"patient_profile/\" + patientId + \"#profilePatientReportTable\");\n\n                    } else {\n                        self.patientReports.message = i18next.t(\"No report data found.\");\n                    }\n                    setTimeout(function () {\n                        self.patientReports.loading = false;\n                    }, 550);\n                });\n            },\n            rowLinkEvent: function () {\n                $(\"#admin-table-body.data-link\").delegate(\"tr\", \"click\", function (e) {\n                    if (e.target && (e.target.tagName.toLowerCase() !== \"td\")) {\n                        if (e.target.tagName.toLowerCase() === \"a\" && e.target.click) {\n                            return;\n                        }\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                    var row = $(this).closest(\"tr\");\n                    if (row.hasClass(\"deleted-user-row\") || row.hasClass(\"loading\")) {\n                        return false;\n                    }\n                    if (!row.hasClass(\"no-records-found\")) {\n                        $(\"#adminTable .popover\").popover(\"hide\");\n                        document.location = $(this).closest(\"tr\").attr(\"data-link\");\n                    }\n                });\n            },\n            deactivationEnabled: function () {\n                return $(\"#chkDeletedUsersFilter\").length > 0;\n            },\n            reactivateUser: function (userId) {\n                var tnthAjax = this.getDependency(\"tnthAjax\"),\n                    self = this;\n                if (!this.isDeactivatedRow(userId)) {\n                    return false;\n                }\n                $(\"#\" + self.ROW_ID_PREFIX + userId).addClass(\"loading\");\n                tnthAjax.reactivateUser(userId, {\n                    \"async\": true\n                }, function (data) {\n                    $(\"#\" + self.ROW_ID_PREFIX + userId).removeClass(\"loading\");\n                    if (data.error) {\n                        alert(data.error);\n                        return;\n                    }\n                    self.handleReactivatedRow(userId);\n                    setTimeout(function() {\n                        self.handleDeletedUsersVis(); //reset rows displayed\n                    }, 150);\n                });\n            },\n            deactivateUser: function (userId, hideRow, callback) {\n                callback = callback || function () {};\n                if (!userId) {\n                    callback({\n                        error: i18next.t(\"User id is required.\")\n                    });\n                    return false;\n                }\n                if (this.isDeactivatedRow(userId)) {\n                    callback();\n                    return false;\n                }\n                var tnthAjax = this.getDependency(\"tnthAjax\"),\n                    self = this;\n                $(\"#\" + self.ROW_ID_PREFIX + userId).addClass(\"loading\");\n                tnthAjax.deactivateUser(userId, {\n                    \"async\": true\n                }, function (data) {\n                    $(\"#\" + self.ROW_ID_PREFIX + userId).removeClass(\"loading\");\n                    if (data.error) {\n                        callback({\n                            error: data.error\n                        });\n                        alert(data.error);\n                        return;\n                    }\n                    callback();\n                    if (hideRow) {\n                        $(\"#\" + self.ROW_ID_PREFIX + userId).fadeOut();\n                    }\n                    self.handleDeactivatedRow(userId);\n                    setTimeout(function() {\n                        self.handleDeletedUsersVis(); //reset rows displayed\n                    }, 150);\n                });\n            },\n            getRowData: function (userId) {\n                if (!userId) {\n                    return false;\n                }\n                return $(\"#adminTable\").bootstrapTable(\"getRowByUniqueId\", userId);\n            },\n            isDeactivatedRow: function (userId) {\n                var rowData = this.getRowData(userId);\n                return rowData && String(rowData.activationstatus).toLowerCase() === \"deactivated\";\n            },\n            resetRowVisByActivationStatus: function () {\n                var self = this;\n                $(\"#adminTable [data-index]\").each(function () {\n                    var userId = $(this).attr(\"data-uniqueid\");\n                    if (self.isDeactivatedRow(userId)) {\n                        self.handleDeactivatedRowVis(userId);\n                    } else {\n                        self.handleReactivatedRowVis(userId);\n                    }\n                });\n            },\n            updateFieldData: function (userId, data) {\n                if (!userId || !data) {\n                    return false;\n                }\n                $(\"#adminTable\").bootstrapTable(\"updateCell\", data);\n            },\n            getRowIndex: function (userId) {\n                if (!userId) {\n                    return false;\n                }\n                return $(\"#\" + this.ROW_ID_PREFIX + userId).attr(\"data-index\");\n            },\n            handleDeactivatedRow: function (userId) {\n                this.updateFieldData(userId, {\n                    index: this.getRowIndex(userId),\n                    field: \"activationstatus\",\n                    value: \"deactivated\",\n                    reinit: true\n                });\n                this.handleDeactivatedRowVis(userId);\n            },\n            handleDeactivatedRowVis: function (userId) {\n                if (!userId) {\n                    return false;\n                }\n                var allowReactivate = $(\"#adminTable\").attr(\"data-allow-reactivate\");\n                $(\"#\" + this.ROW_ID_PREFIX + userId).addClass(\"deleted-user-row\").addClass(\"rowlink-skip\").find(\".deleted-button-cell\").html('<span class=\"text-display\">{inactivetext}</span><i data-user-id=\"{userid}\" aria-hidden=\"true\" title=\"Reactivate account\" class=\"fa fa-undo reactivate-icon {class}\"></i>'.replace(\"{class}\", allowReactivate?\"\":\"tnth-hide\").replace(\"{userid}\", userId).replace(\"{inactivetext}\", i18next.t(\"Inactive\"))).find(\"a.profile-link\").remove();\n                if (!this.showDeletedUsers) {\n                    $(\"#\" + this.ROW_ID_PREFIX + userId).hide();\n                }\n            },\n            handleReactivatedRow: function (userId) {\n                if (!userId) {\n                    return false;\n                }\n                this.updateFieldData(userId, {\n                    index: this.getRowIndex(userId),\n                    field: \"activationstatus\",\n                    value: \"activated\",\n                    reinit: true\n                });\n                this.handleReactivatedRowVis(userId);\n            },\n            handleReactivatedRowVis: function (userId) {\n                if (!userId) {\n                    return false;\n                }\n                $(\"#data_row_\" + userId).removeClass(\"deleted-user-row\").removeClass(\"rowlink-skip\").find(\".deleted-button-cell\").html('<button id=\"btnDeleted{userid}\" data-user-id=\"{userid}\" type=\"button\" class=\"btn btn-default btn-delete-user\" data-original-title=\"\" title=\"\"><em>{buttontext}</em></button>'.replace(/\\{userid\\}/g, userId).replace(\"{buttontext}\", i18next.t(\"Deactivate\"))).append(\"<a class='profile-link'></a>\");\n                if (this.showDeletedUsers) {\n                    $(\"#\" + this.ROW_ID_PREFIX + userId).hide();\n                }\n            }\n        }\n    });\n})();\n"],"sourceRoot":""}