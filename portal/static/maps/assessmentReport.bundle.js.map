{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./static/js/src/assessmentReport.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","AssessmentReportObj","Vue","el","data","userId","$","val","reportDate","instrumentId","errorMessage","caption","methods","hasValue","String","getData","self","this","ajax","type","url","done","sessionAuthoredDate","error","i18next","entry","length","entries","grep","item","authored","title","questionnaire","display","lastUpdatedDateObj","Date","lastUpdated","toUTCString","slice","toLocaleDateString","day","month","year","hour","minute","second","timezone","group","question","forEach","q","text","replace","a","answer","arrValueStrings","valueString","map","join","linkId","arrValueCoding","valueCoding","code","push","fail","window","DocumentTouch","document","tooltip"],"mappings":"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","file":"assessmentReport.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","(function() {\n    var AssessmentReportObj = new Vue({ /*global Vue i18next $*/\n        el: \"#userSessionReportMainContainer\",\n        data: {\n            userId: $(\"#_report_user_id\").val(),\n            reportDate: $(\"#_report_authored_date\").val(),\n            instrumentId: $(\"#_report_instrument_id\").val(),\n            errorMessage: \"\",\n            data: [],\n            caption: {}\n        },\n        methods: {\n            hasValue: function(s) {\n                return String(s) !== \"\" && String(s) !== \"undefined\" && s !== null;\n            },\n            getData: function() {\n                var self = this;\n                $.ajax({\n                    type: \"GET\",\n                    url: \"/api/patient/\" + this.userId + \"/assessment/\" + this.instrumentId\n                }).done(function(data) {\n                    var sessionAuthoredDate = $(\"#_report_authored_date\").val();\n                    self.errorMessage = \"\";\n                    if (data.error) {\n                        self.errorMessage = i18next.t(\"Server Error occurred retrieving report data\");\n                    } else {\n                        if (data.entry && data.entry.length > 0) {\n                            var entries = data.entry;\n                            var entry;\n                            entry = $.grep(entries, function(item) {\n                                return String(item.authored) === String(sessionAuthoredDate);\n                            });\n                            entry = entry[0] || entries[0];\n                            self.caption.title = i18next.t(entries[0].questionnaire.display);\n                            var lastUpdatedDateObj = new Date(sessionAuthoredDate);\n                            self.caption.lastUpdated = new Date(lastUpdatedDateObj.toUTCString().slice(0, -4));\n                            self.caption.lastUpdated = self.caption.lastUpdated.toLocaleDateString(\"en-GB\", { //use native date function\n                                day: \"numeric\",\n                                month: \"short\",\n                                year: \"numeric\",\n                                hour: \"2-digit\",\n                                minute: \"2-digit\",\n                                second: \"2-digit\"\n                            });\n                            self.caption.timezone = i18next.t(\"GMT, Y-M-D\");\n                            (entry.group.question).forEach(function(entry) {\n                                var q = (entry.text ? entry.text.replace(/^[\\d\\w]{1,3}\\./, \"\") : \"\"), a = \"\";\n                                entry.answer = entry.answer || [];\n                                var arrValueStrings = $.grep(entry.answer, function(item) {\n                                    return self.hasValue(item.valueString);\n                                });\n                                arrValueStrings = arrValueStrings.map(function(item) {\n                                    return item.valueString;\n                                });\n                                a = arrValueStrings.join(\"<br/>\");\n                                /*\n                                 * using valueCoding.code for answer and linkId for question if BOTH question and answer are empty strings\n                                 */\n                                if (!q && !a) {\n                                    q = entry.linkId;\n                                    var arrValueCoding = $.grep(entry.answer, function(item) {\n                                        return item.valueCoding && item.valueCoding.code;\n                                    });\n                                    arrValueCoding = arrValueCoding.map(function(item) {\n                                        return item.valueCoding.code;\n                                    });\n                                    a = arrValueCoding.join(\"<br/>\");\n                                }\n                                q = !self.hasValue(q)? \"--\": q;\n                                a = !self.hasValue(a)? \"--\": a;\n                                self.data.push({ q: q, a: a});\n                            });\n                        }\n                    }\n                }).fail(function() {\n                    self.errorMessage = i18next.t(\"Unable to load report data\");\n                });\n            }\n        }\n    });\n    $(function() {\n        AssessmentReportObj.getData();\n        if (!(\"ontouchstart\" in window || window.DocumentTouch && document instanceof window.DocumentTouch)) { /*global DocumentTouch*/\n            $(\"#userSessionReportDetailHeader [data-toggle='tooltip']\").tooltip();\n        }\n    });\n})();\n"],"sourceRoot":""}