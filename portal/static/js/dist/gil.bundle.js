/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./static/js/src/gil.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./static/js/src/gil.js":
/*!******************************!*\
  !*** ./static/js/src/gil.js ***!
  \******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_Utility_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/Utility.js */ \"./static/js/src/modules/Utility.js\");\n/* harmony import */ var _modules_I18nextConfig_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/I18nextConfig.js */ \"./static/js/src/modules/I18nextConfig.js\");\nvar require;var require;\n\n$.ajaxSetup({\n  beforeSend: function beforeSend(xhr, settings) {\n    if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {\n      xhr.setRequestHeader(\"X-CSRFToken\", $(\"#csrfToken\").val());\n    }\n  }\n});\n\n_modules_I18nextConfig_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].init({\n  \"debug\": false,\n  \"initImmediate\": false\n});\n\nvar RETURN_KEY_CODE = 13;\n\n(function e(t, n, r) {\n  function s(o, u) {\n    if (!n[o]) {\n      if (!t[o]) {\n        var a = typeof require == \"function\" && require;\n        if (!u && a) return require(o, !0);\n        if (i) return i(o, !0);\n        throw new Error(\"Cannot find module '\" + o + \"'\");\n      }\n\n      var f = n[o] = {\n        exports: {}\n      };\n      t[o][0].call(f.exports, function (e) {\n        var n = t[o][1][e];\n        return s(n ? n : e);\n      }, f, f.exports, e, t, n, r);\n    }\n\n    return n[o].exports;\n  }\n\n  var i = typeof require == \"function\" && require;\n\n  for (var o = 0; o < r.length; o++) {\n    s(r[o]);\n  }\n\n  return s;\n})({\n  1: [function (require, module, exports) {\n    module.exports = {\n      fx: {\n        easing: \"easeOutExpo\",\n        speed: {\n          slow: 1500,\n          mid: 1000,\n          fast: 1000\n        }\n      }\n    };\n  }, {}],\n  2: [function (require, module, exports) {\n    var UpperBanner = require(\"./modules/upper-banner\");\n\n    var WindowScroll = require(\"./modules/window-scroll\");\n\n    var WindowResize = require(\"./modules/window-resize\");\n\n    var NavToggle = require(\"./modules/nav-toggle\");\n\n    var Global = require(\"./modules/global\");\n\n    var Admin = require(\"./modules/admin\");\n\n    var Video = require(\"./modules/video\");\n\n    var VisObj = require(\"./modules/visobj\");\n\n    var MenuObj = require(\"./modules/menuObj\");\n\n    var InterventionSessionObj = require(\"./modules/interventionSessionObj\");\n\n    var OrgTool = require(\"./modules/orgTool\");\n\n    var AccessCodeObj = require(\"./modules/accessCodeObj\");\n\n    var UtilObj = require(\"./modules/utilObj\");\n\n    $(function () {\n      if (window.app == null) {\n        window.app = {};\n      }\n\n      window.app.global = new Global();\n      window.app.upperBanner = new UpperBanner();\n      window.app.windowScroll = new WindowScroll();\n      window.app.windowResize = new WindowResize();\n      window.app.navToggle = new NavToggle();\n      window.app.admin = new Admin();\n      window.app.visObj = new VisObj();\n      window.app.interventionSessionObj = new InterventionSessionObj();\n      window.app.orgTool = new OrgTool();\n      window.app.menuObj = new MenuObj();\n      window.app.video = new Video();\n      window.app.accessCodeObj = new AccessCodeObj();\n      window.app.utilObj = new UtilObj();\n    });\n  }, {\n    \"./modules/admin\": 3,\n    \"./modules/global\": 4,\n    \"./modules/nav-toggle\": 5,\n    \"./modules/upper-banner\": 6,\n    \"./modules/video\": 7,\n    \"./modules/window-resize\": 8,\n    \"./modules/window-scroll\": 9,\n    \"./modules/visobj\": 10,\n    \"./modules/interventionSessionObj\": 11,\n    \"./modules/orgTool\": 12,\n    \"./modules/menuObj\": 13,\n    \"./modules/accessCodeObj\": 14,\n    \"./modules/utilObj\": 15\n  }],\n  3: [function (require, module, exports) {\n    var Admin, loggedInAdminClass, loggedInClass, upperBannerClosedClass;\n    loggedInAdminClass = \"is-showing-logged-in\";\n    loggedInClass = \"is-logged-in\";\n    upperBannerClosedClass = \"is-upper-banner-closed\";\n\n    module.exports = Admin = function () {\n      function Admin() {\n        this.build();\n      }\n\n      Admin.prototype.build = function () {\n        return $(\".js-mock-submit\").on(\"submit\", function (e) {\n          e.preventDefault();\n          return $(this).addClass(\"is-submitted\");\n        });\n      };\n\n      return Admin;\n    }();\n  }, {}],\n  4: [function (require, module, exports) {\n    var Global, config;\n    config = require(\"../config\");\n\n    module.exports = Global = function () {\n      function Global() {\n        this.addFX();\n        this.addPlugins();\n        this.bindEvents();\n        this.setRoles();\n      }\n\n      Global.prototype.addFX = function () {\n        return $.extend($.easing, window.easing);\n      };\n\n      Global.prototype.addPlugins = function () {\n        $(\".modal\").on(\"show.bs.modal\", function (e) {\n          return $(this).addClass(\"is-modal-active\");\n        });\n        return $(\".modal\").on(\"hide.bs.modal\", function (e) {\n          var $this;\n          $this = $(this);\n          return setTimeout(function () {\n            return $this.removeClass(\"is-modal-active\");\n          }, 200);\n        });\n      };\n\n      Global.prototype.bindEvents = function () {\n        return $(\".js-scroll-down\").on(\"click\", function (e) {\n          var $target, position;\n          e.preventDefault();\n          $target = $($(this).attr(\"data-target\"));\n          position = $target.offset().top + $target.outerHeight() - 92;\n          return $(\"html,body\").animate({\n            scrollTop: position\n          }, config.fx.speed.mid, config.fx.easing);\n        });\n      };\n\n      Global.prototype.setRoles = function () {\n        var userId = $(\"#currentUserId\").val();\n\n        if (userId) {\n          $.ajax({\n            type: \"GET\",\n            url: \"/api/user/\" + userId + \"/roles\",\n            contentType: \"application/json; charset=utf-8\",\n            cache: false,\n            async: false,\n            dataType: \"json\"\n          }).done(function (data) {\n            if (data && data.roles) {\n              var roles = [];\n              data.roles.forEach(function (role) {\n                roles.push(role.name);\n              });\n              localStorage.setItem(\"userRoles\", JSON.stringify(roles));\n            }\n          }).fail(function (xhr) {});\n        }\n      };\n\n      Global.prototype.getRoles = function () {\n        return localStorage.getItem(\"userRoles\") ? JSON.parse(localStorage.getItem(\"userRoles\")) : null;\n      };\n\n      Global.prototype.checkRole = function (roleName) {\n        if (roleName) {\n          var roles = this.getRoles();\n\n          if (roles) {\n            return roles.indexOf(roleName) !== -1;\n          } else {\n            return false;\n          }\n        } else {\n          return false;\n        }\n      };\n\n      Global.prototype.reportError = function (userId, page_url, message, sync) {\n        //params need to contain the following:\n        //:subject_id: User on which action is being attempted\n        //:message: Details of the error event\n        //:page_url: The page requested resulting in the error\n        var params = {};\n        userId = userId || $(\"#currentUserId\").val();\n        params.subject_id = userId ? userId : 0;\n        params.page_url = page_url ? page_url : window.location.href; //don't think we want to translate message sent back to the server here\n\n        params.message = \"Error generated in JS - \" + (message ? message : \"no detail available\");\n        $.ajax({\n          type: \"GET\",\n          url: \"/report-error\",\n          contentType: \"application/json; charset=utf-8\",\n          cache: false,\n          async: sync ? false : true,\n          data: params\n        }).done(function (data) {}).fail(function () {});\n      };\n\n      return Global;\n    }();\n  }, {\n    \"../config\": 1\n  }],\n  5: [function (require, module, exports) {\n    var NavToggle, navExpandedClass;\n    navExpandedClass = \"is-nav-expanded\";\n\n    module.exports = NavToggle = function () {\n      function NavToggle() {\n        this.build();\n      }\n\n      NavToggle.prototype.build = function () {\n        $(\".js-nav-menu-toggle\").on(\"click\", function (e) {\n          e.preventDefault();\n          return $(\"html\").toggleClass(navExpandedClass, !$(\"html\").hasClass(navExpandedClass));\n        });\n        $(\"figure.nav-overlay, .js-close-nav\").on(\"click\", function (e) {\n          if ($(\"html\").hasClass(navExpandedClass)) {\n            return $(\"html\").removeClass(navExpandedClass);\n          }\n        });\n        $(\".side-nav a\").not(\"[data-toggle=modal]\").on(\"click touchend\", function (e) {\n          var href;\n          e.preventDefault();\n          href = $(this).attr(\"href\");\n          $(\"html\").removeClass(navExpandedClass);\n          window.app.utilObj.setVis(true);\n          return setTimeout(function () {\n            return window.location = href;\n          }, 500);\n        });\n        $(window).on(\"unload\", function () {\n          setTimeout(function () {\n            window.app.utilObj.setVis();\n          }, 500);\n        });\n        return $(\".side-nav a[data-toggle=modal]\").on(\"click touchend\", function (e) {\n          var target;\n          e.preventDefault();\n          target = $(this).attr(\"data-target\");\n          $(\"html\").removeClass(navExpandedClass);\n          return setTimeout(function () {\n            return $(target).modal(\"show\");\n          }, 500);\n        });\n      };\n\n      return NavToggle;\n    }();\n  }, {}],\n  6: [function (require, module, exports) {\n    var UpperBanner;\n\n    module.exports = UpperBanner = function () {\n      function UpperBanner() {\n        this.build();\n      }\n\n      UpperBanner.prototype.build = function () {\n        return $(\".js-close-upper-banner\").on(\"click touchstart\", function (e) {\n          e.preventDefault();\n          return $(\"html\").addClass(\"is-upper-banner-closed\");\n        });\n      };\n\n      UpperBanner.prototype.handleAccess = function () {\n        if (typeof sessionStorage !== \"undefined\") {\n          var data = sessionStorage.getItem('bannerAccessed');\n\n          if (String(data) === \"yes\") {\n            $(\".js-close-upper-banner\").trigger(\"click\");\n          }\n\n          $(\"a.js-close-upper-banner\").on(\"click\", function () {\n            sessionStorage.setItem(\"bannerAccessed\", \"yes\");\n          });\n        }\n      };\n\n      UpperBanner.prototype.handleWatermark = function () {\n        var __env = $(\"#env\").val();\n\n        if (__env !== \"\" && __env.toLowerCase() !== \"production\" && $(\".watermark\").length === 0) {\n          $(\"<div class='watermark'>TRUE<sup>NTH</sup> - \" + __env + \" version - Not for study or clinical use</div>\").appendTo(\"body\");\n        }\n      };\n\n      return UpperBanner;\n    }();\n  }, {}],\n  7: [function (require, module, exports) {\n    var Video, navExpandedClass;\n    navExpandedClass = \"is-nav-expanded\";\n\n    module.exports = Video = function () {\n      function Video() {\n        this.build();\n      }\n\n      Video.prototype.build = function () {\n        $(\".js-video-toggle a\").on(\"click\", function (e) {\n          return e.preventDefault();\n        });\n        return $(\".js-video-toggle\").on(\"click\", function (e) {\n          var $div, src;\n          e.preventDefault();\n          $(\"html\").addClass(\"is-video-active\");\n          $div = $(this);\n          src = $div.data(\"iframe-src\");\n          return $div.append(\"<iframe src='\" + src + \"' allowfullscreen frameborder='0' />\").addClass(\"is-js-video-active\");\n        });\n      };\n\n      return Video;\n    }();\n  }, {}],\n  8: [function (require, module, exports) {\n    var Resize;\n\n    module.exports = Resize = function () {\n      function Resize() {\n        var $intro;\n        $intro = $(\".intro\");\n        $intro.imagesLoaded(function () {\n          return $(window).on(\"resize.setElements\", _.debounce(function (e) {\n            var imgHeight;\n\n            if ($(window).width() <= 767) {\n              imgHeight = $intro.find(\"img.intro__img--mobile\").height();\n            } else {\n              imgHeight = $intro.find(\"img.intro__img--desktop\").height();\n            }\n\n            return $intro.css(\"height\", imgHeight);\n          }, 50)).trigger(\"resize.setElements\");\n        });\n      }\n\n      return Resize;\n    }();\n  }, {}],\n  9: [function (require, module, exports) {\n    var WindowScroll;\n\n    module.exports = WindowScroll = function () {\n      function WindowScroll() {\n        this.bindScroll();\n      }\n\n      WindowScroll.prototype.bindScroll = function () {\n        var checkScroll;\n        checkScroll = _.debounce(function () {\n          var offset;\n\n          if ($(\".upper-banner\").outerHeight() > 0) {\n            offset = $(\".upper-banner\").outerHeight();\n          } else {\n            offset = 0;\n          }\n\n          if ($(window).scrollTop() <= offset) {\n            return $(\"html\").removeClass(\"is-scrolled\");\n          } else {\n            return $(\"html\").addClass(\"is-scrolled\");\n          }\n        }, 0);\n        return $(window).on(\"scroll.checkScroll\", checkScroll).trigger(\"scroll.checkScroll\");\n      };\n\n      return WindowScroll;\n    }();\n  }, {}],\n  10: [function (require, module, exports) {\n    var VisObj;\n\n    module.exports = VisObj = function () {\n      return function () {\n        this.HAS_REDIRECT = false;\n\n        this.hideMain = function () {\n          $(\"#mainHolder\").hide();\n          $(\"#mainHolder\").css({\n            \"visibility\": \"hidden\",\n            \"-ms-filter\": \"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\",\n            \"filter\": \"alpha(opacity=0)\",\n            \"-moz-opacity\": 0,\n            \"-khtml-opacity\": 0,\n            \"opacity\": 0\n          });\n        };\n\n        this.showMain = function () {\n          if (!this.HAS_REDIRECT) {\n            if ($(\".watermark\").length > 0) {\n              $(\"header.no-banner \").css(\"padding-top\", \"35px\");\n            }\n\n            $(\"#mainHolder\").css({\n              \"visibility\": \"visible\",\n              \"-ms-filter\": \"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\",\n              \"filter\": \"alpha(opacity=100)\",\n              \"-moz-opacity\": 1,\n              \"-khtml-opacity\": 1,\n              \"opacity\": 1\n            });\n            this.hideLoader();\n          }\n\n          ;\n        };\n\n        this.showLoader = function () {\n          if (!$(\"#loadingIndicator\").is(\":visible\")) {\n            $(\"#loadingIndicator\").show();\n          }\n        };\n\n        this.hideLoader = function () {\n          $(\"#loadingIndicator\").hide();\n        };\n\n        this.setRedirect = function () {\n          this.HAS_REDIRECT = true;\n          this.showLoader();\n          this.hideMain();\n        };\n      };\n    }();\n  }, {}],\n  11: [function (require, module, exports) {\n    var InterventionSessionObj;\n\n    module.exports = InterventionSessionObj = function () {\n      return function () {\n        this.setInterventionSession = function () {\n          var dataSectionId = $(\"main\").attr(\"data-link-identifier\");\n\n          if (dataSectionId) {\n            if (typeof sessionStorage !== \"undefined\") {\n              sessionStorage.setItem(dataSectionId + \"InSession\", \"true\");\n            }\n          }\n        };\n\n        this.getSession = function (id) {\n          if (!id) {\n            return false;\n          } else {\n            return typeof sessionStorage !== \"undefined\" && sessionStorage.getItem(id + \"InSession\");\n          }\n        };\n\n        this.clearSession = function (id) {\n          if (this.getSession(id)) {\n            sessionStorage.removeItem(id + \"InSession\");\n          }\n        };\n      };\n    }();\n  }, {}],\n  12: [function (require, module, exports) {\n    var OrgTool;\n\n    module.exports = OrgTool = function () {\n      return function () {\n        var OrgObj = function OrgObj(orgId, orgName, parentOrg) {\n          this.id = orgId;\n          this.name = orgName;\n          this.children = [];\n          this.parentOrgId = parentOrg;\n          this.isTopLevel = false;\n        };\n\n        var CONSENT_ENUM = {\n          \"consented\": {\n            \"staff_editable\": true,\n            \"include_in_reports\": true,\n            \"send_reminders\": true\n          },\n          \"suspended\": {\n            \"staff_editable\": true,\n            \"include_in_reports\": true,\n            \"send_reminders\": false\n          },\n          \"purged\": {\n            \"staff_editable\": false,\n            \"include_in_reports\": false,\n            \"send_reminders\": false\n          }\n        };\n        var TOP_LEVEL_ORGS = [];\n        var orgsList = {};\n\n        this.inArray = function (val, array) {\n          if (val && array) {\n            for (var i = 0; i < array.length; i++) {\n              if (array[i] === val) {\n                return true;\n              }\n            }\n\n            ;\n          }\n\n          ;\n          return false;\n        };\n\n        this.getTopLevelOrgs = function () {\n          return TOP_LEVEL_ORGS;\n        };\n\n        this.getOrgsList = function () {\n          return orgsList;\n        };\n\n        this.setDefaultConsent = function (userId, orgId) {\n          if (!userId && !orgId) {\n            return false;\n          }\n\n          var stockConsentUrl = $(\"#stock_consent_url\").val();\n          var agreementUrl = \"\";\n\n          if (stockConsentUrl) {\n            agreementUrl = stockConsentUrl.replace(\"placeholder\", $(\"#\" + orgId + \"_org\").attr(\"data-parent-name\"));\n          }\n\n          ;\n\n          if (agreementUrl) {\n            var params = CONSENT_ENUM[\"consented\"];\n            params.org = orgId;\n            params.agreementUrl = encodeURIComponent(agreementUrl);\n            this.setConsent(userId, params, \"default\", true);\n          }\n\n          ;\n        };\n\n        this.setConsent = function (userId, params, status, sync) {\n          var hasValue = window.app.utilObj.hasValue;\n\n          if (userId && params) {\n            var consented = this.hasConsent(userId, params[\"org\"], status);\n\n            if (!consented) {\n              $.ajax({\n                type: \"POST\",\n                url: \"/api/user/\" + userId + \"/consent\",\n                contentType: \"application/json; charset=utf-8\",\n                cache: false,\n                dataType: \"json\",\n                async: sync ? false : true,\n                data: JSON.stringify({\n                  \"user_id\": userId,\n                  \"organization_id\": params[\"org\"],\n                  \"agreement_url\": params[\"agreementUrl\"],\n                  \"staff_editable\": hasValue(params[\"staff_editable\"]) ? params[\"staff_editable\"] : false,\n                  \"include_in_reports\": hasValue(params[\"include_in_reports\"]) ? params[\"include_in_reports\"] : false,\n                  \"send_reminders\": hasValue(params[\"send_reminders\"]) ? params[\"send_reminders\"] : false\n                })\n              }).done(function (data) {}).fail(function (xhr) {\n                window.app.global.reportError(userId, \"/api/user/\" + userId + \"/consent\", xhr.responseText);\n              });\n            }\n\n            ;\n          }\n\n          ;\n        };\n        /****** NOTE - this will return the latest updated consent entry *******/\n\n\n        this.hasConsent = function (userId, orgId, filterStatus) {\n          if (!userId) {\n            return false;\n          }\n\n          if (!orgId) {\n            return false;\n          }\n\n          var consentedOrgIds = [],\n              expired = 0,\n              found = false,\n              suspended = false;\n          var self = this;\n          $.ajax({\n            type: \"GET\",\n            url: \"/api/user/\" + userId + \"/consent\",\n            async: false,\n            cache: false\n          }).done(function (data) {\n            if (data.consent_agreements) {\n              var d = data[\"consent_agreements\"];\n\n              if (d.length > 0) {\n                d = d.sort(function (a, b) {\n                  return new Date(b.signed) - new Date(a.signed); //latest comes first\n                });\n                var item = d[0];\n                expired = self.getDateDiff(item.expires);\n\n                if (item.deleted) {\n                  found = true;\n                }\n\n                if (expired > 0) {\n                  found = true;\n                }\n\n                if (item.staff_editable && item.include_in_reports && !item.send_reminders) {\n                  suspended = true;\n                }\n\n                if (!found) {\n                  if (String(orgId) === String(item.organization_id)) {\n                    switch (filterStatus) {\n                      case \"suspended\":\n                        if (suspended) {\n                          found = true;\n                        }\n\n                        break;\n\n                      case \"purged\":\n                        found = true;\n                        break;\n\n                      case \"consented\":\n                        if (!suspended) {\n                          if (item.staff_editable && item.send_reminders && item.include_in_reports) {\n                            found = true;\n                          }\n                        }\n\n                        ;\n                        break;\n\n                      default:\n                        found = true;\n                      //default is to return both suspended and consented entries\n                    }\n\n                    ;\n\n                    if (found) {\n                      consentedOrgIds.push(orgId);\n                    }\n                  }\n                }\n              }\n            }\n          }).fail(function () {\n            return false;\n          });\n          return consentedOrgIds.length > 0 ? consentedOrgIds : null;\n        };\n\n        this.getDateDiff = function (startDate, dateToCalc) {\n          var a = startDate.split(/[^0-9]/);\n          var dateTime = new Date(a[0], a[1] - 1, a[2]).getTime();\n          var d;\n\n          if (dateToCalc) {\n            var c = dateToCalc.split(/[^0-9]/);\n            d = new Date(c[0], c[1] - 1, c[2]).getTime();\n          } else {\n            // If no baseDate, then use today to find the number of days between dateToCalc and today\n            d = new Date().getTime();\n          } // Round down to floor so we don't add an extra day if session is 12+ hours into the day\n\n\n          return Math.floor((d - dateTime) / (1000 * 60 * 60 * 24));\n        };\n\n        this.validateIdentifier = function (sync, callback) {\n          if (this.identifiers) {\n            return this.identifiers;\n          }\n\n          var self = this;\n          $.ajax({\n            type: \"GET\",\n            url: \"/gil-shortcut-alias-validation/\" + $(\"#shortcut_alias\").val().toLowerCase(),\n            async: sync ? false : true\n          }).done(function (data) {\n            if (callback) {\n              callback(data);\n            }\n          }).fail(function () {\n            if (callback) {\n              callback({\n                error: \"failed request\"\n              });\n            }\n          });\n        };\n\n        this.getOrgs = function (userId, sync, callback) {\n          var self = this;\n          $.ajax({\n            type: \"GET\",\n            url: \"/api/organization\",\n            async: sync ? false : true\n          }).done(function (data) {\n            $(\"#fillOrgs\").attr(\"userId\", userId);\n            self.populateOrgsList.apply(self, [data.entry]);\n            self.populateUI();\n\n            if (callback) {\n              callback();\n            }\n\n            $(\"#modal-org\").on(\"hide.bs.modal\", function (e) {\n              if (typeof sessionStorage !== \"undefined\") {\n                sessionStorage.setItem(\"noOrgModalViewed\", \"true\");\n              } else {\n                alert(i18next.t(\"Unable to set session variable for organization modal viewed.\"));\n              }\n\n              setTimeout(function () {\n                location.reload();\n              }, 0);\n            });\n            $(\"#submit-orgs\").on(\"click\", function () {\n              var os = $(\"#userOrgs input[name='organization']:checked\");\n\n              if (os.length > 0) {\n                os.each(function () {\n                  if ($(this).attr(\"id\") !== \"noOrgs\") {\n                    var parentOrg = $(this).attr(\"data-parent-id\");\n\n                    if (!parentOrg) {\n                      parentOrg = $(this).closest(\".org-container[data-parent-id]\").attr(\"data-parent-id\");\n                    }\n\n                    ;\n                    var agreementUrl = $(\"#\" + parentOrg + \"_agreement_url\").val();\n\n                    if (agreementUrl && String(agreementUrl) !== \"\") {\n                      var params = CONSENT_ENUM[\"consented\"];\n                      params.org = parentOrg;\n                      params.agreementUrl = agreementUrl;\n                      setTimeout(function () {\n                        self.setConsent($(\"#currentUserId\").val(), params, \"all\", true);\n                      }, 0);\n                    } else {\n                      self.setDefaultConsent($(\"#currentUserId\").val(), parentOrg);\n                    }\n\n                    ;\n                  }\n\n                  ;\n                });\n                self.updateOrg($(\"#currentUserId\").val(), self.updateOrgCallback);\n              }\n\n              ;\n            });\n            $(\"#userOrgs input[name='organization']\").each(function () {\n              $(this).on(\"click\", function () {\n                var userId = $(\"#fillOrgs\").attr(\"userId\");\n                var parentOrg = $(this).attr(\"data-parent-id\");\n\n                if ($(this).prop(\"checked\")) {\n                  if ($(this).attr(\"id\") !== \"noOrgs\") {\n                    $(\"#noOrgs\").prop(\"checked\", false);\n                  } else {\n                    $(\"#userOrgs input[name='organization']\").each(function () {\n                      if ($(this).attr(\"id\") !== \"noOrgs\") {\n                        $(this).prop(\"checked\", false);\n                      }\n\n                      ;\n                    });\n                  }\n\n                  ;\n                }\n\n                ;\n              });\n            });\n          }).fail(function (xhr) {\n            window.app.global.reportError(userId, \"/api/organization\", xhr.responseText);\n\n            if (callback) {\n              callback();\n            }\n          });\n        }, this.updateOrg = function (userId, callback) {\n          var demoArray = {},\n              errorMessage = \"\",\n              hasValue = window.app.utilObj.hasValue;\n          $.ajax({\n            type: \"GET\",\n            url: \"/api/demographics/\" + userId,\n            async: false\n          }).done(function (data) {\n            demoArray = data;\n          }).fail(function () {\n            errorMessage = i18next.t(\"Error retrieving demographics information for user.\");\n          });\n          var orgIDs = $(\"#userOrgs input[name='organization']:checked\").map(function () {\n            return {\n              reference: \"api/organization/\" + $(this).val()\n            };\n          }).get();\n\n          if (!hasValue(errorMessage)) {\n            if (typeof orgIDs === \"undefined\") {\n              orgIDs = [0]; // special value for `none of the above`\n            }\n\n            demoArray[\"careProvider\"] = orgIDs;\n            $.ajax({\n              type: \"PUT\",\n              url: \"/api/demographics/\" + userId,\n              contentType: \"application/json; charset=utf-8\",\n              dataType: \"json\",\n              async: true,\n              data: JSON.stringify(demoArray)\n            }).done(function (data) {\n              if (callback) {\n                callback(errorMessage);\n              }\n            }).fail(function () {\n              errorMessage += (hasValue(errorMessage) ? \"<br/>\" : \"\") + i18next.t(\"Error occurred updating user organization.\");\n\n              if (callback) {\n                callback(errorMessage);\n              }\n            });\n          } else {\n            if (typeof callback !== \"undefined\") {\n              callback(errorMessage);\n            }\n          }\n\n          ;\n        }, this.filterOrgs = function (leafOrgs) {\n          if (!leafOrgs) {\n            return false;\n          }\n\n          var self = this;\n          $(\"input[name='organization']:checkbox\").each(function () {\n            if (!self.inArray($(this).val(), leafOrgs)) {\n              $(this).hide();\n\n              if (orgsList[$(this).val()] && orgsList[$(this).val()].children.length === 0) {\n                $(this).closest(\"label\").hide();\n              }\n            }\n\n            ;\n          });\n          var topList = self.getTopLevelOrgs();\n          topList.forEach(function (orgId) {\n            var allChildrenHidden = true;\n            $(\".org-container[data-parent-id='\" + orgId + \"']\").each(function () {\n              var subOrgs = $(this).find(\".org-container\");\n\n              if (subOrgs.length > 0) {\n                var allSubOrgsHidden = true;\n                subOrgs.each(function () {\n                  var isVisible = false;\n                  $(this).find(\"input[name='organization']\").each(function () {\n                    if ($(this).is(\":visible\")) {\n                      isVisible = true;\n                      allChildrenHidden = false;\n                    }\n                  });\n\n                  if (!isVisible) {\n                    $(this).hide();\n                  } else {\n                    allSubOrgsHidden = false;\n                  }\n                });\n\n                if (allSubOrgsHidden) {\n                  $(this).children(\"label\").hide();\n                }\n              } else {\n                var ip = $(this).find(\"input[name='organization']\");\n\n                if (ip.length > 0) {\n                  ip.each(function () {\n                    if ($(this).is(\":visible\")) {\n                      allChildrenHidden = false;\n                    }\n                  });\n                }\n              }\n            });\n\n            if (allChildrenHidden) {\n              $(\"#fillOrgs\").find(\"legend[orgid='\" + orgId + \"']\").hide();\n            }\n          });\n        };\n\n        this.findOrg = function (entry, orgId) {\n          var org;\n\n          if (entry && orgId) {\n            entry.forEach(function (item) {\n              if (!org) {\n                if (String(item.id) === String(orgId)) {\n                  org = item;\n                }\n              }\n            });\n          }\n\n          return org;\n        };\n\n        this.getTopLevelOrgs = function () {\n          if (TOP_LEVEL_ORGS.length === 0) {\n            var topOrgs = $(\"#fillOrgs\").find('input[name=\"organization\"][parent_org=\"true\"]');\n\n            if (topOrgs.length > 0) {\n              topOrgs.each(function () {\n                TOP_LEVEL_ORGS.push[$(this).val()];\n              });\n            }\n          }\n\n          ;\n          return TOP_LEVEL_ORGS;\n        };\n\n        this.populateOrgsList = function (items) {\n          if (!items) {\n            return false;\n          }\n\n          var entry = items,\n              self = this,\n              parentId;\n          items.forEach(function (item) {\n            if (item.partOf) {\n              parentId = item.partOf.reference.split(\"/\").pop();\n\n              if (!orgsList[parentId]) {\n                var o = self.findOrg(entry, parentId);\n                orgsList[parentId] = new OrgObj(o.id, o.name);\n              }\n\n              ;\n              orgsList[parentId].children.push(new OrgObj(item.id, item.name, parentId));\n\n              if (orgsList[item.id]) {\n                orgsList[item.id].parentOrgId = parentId;\n              } else {\n                orgsList[item.id] = new OrgObj(item.id, item.name, parentId);\n              }\n            } else {\n              if (!orgsList[item.id]) {\n                orgsList[item.id] = new OrgObj(item.id, item.name);\n              }\n\n              if (parseInt(item.id) !== 0) {\n                orgsList[item.id].isTopLevel = true;\n                TOP_LEVEL_ORGS.push(item.id);\n              }\n\n              ;\n            }\n\n            ;\n          });\n          items.forEach(function (item) {\n            if (item.partOf) {\n              parentId = item.partOf.reference.split(\"/\").pop();\n\n              if (orgsList[item.id]) {\n                orgsList[item.id].parentOrgId = parentId;\n              }\n            }\n\n            ;\n          });\n          return orgsList;\n        };\n\n        this.populateUI = function () {\n          var parentOrgsCt = 0,\n              topLevelOrgs = this.getTopLevelOrgs();\n\n          for (var org in orgsList) {\n            if (orgsList[org].isTopLevel) {\n              if (orgsList[org].children.length > 0) {\n                $(\"#fillOrgs\").append(\"<legend orgId='\" + org + \"'>\" + i18next.t(orgsList[org].name) + \"</legend><input class='tnth-hide' type='radio' name='organization' parent_org=\\\"true\\\" org_name=\\\"\" + orgsList[org].name + \"\\\" id='\" + orgsList[org].id + \"_org' value='\" + orgsList[org].id + \"' />\");\n              } else {\n                $(\"#fillOrgs\").append('<div id=\"' + orgsList[org].id + '_container\" data-parent-id=\"' + orgsList[org].name + '\"  data-parent-name=\"' + orgsList[org].name + '\" class=\"org-container\"><label id=\"org-label-' + orgsList[org].id + '\" class=\"org-label\"><input class=\"clinic\" type=\"radio\" name=\"organization\" parent_org=\"true\" id=\"' + orgsList[org].id + '_org\" value=\"' + orgsList[org].id + '\"  data-parent-id=\"' + orgsList[org].id + '\"  data-parent-name=\"' + orgsList[org].name + '\"/><span>' + i18next.t(orgsList[org].name) + '</span></label></div>');\n              }\n\n              parentOrgsCt++;\n            }\n\n            ; // Fill in each child clinic\n\n            if (orgsList[org].children.length > 0) {\n              var childClinic = \"\";\n              orgsList[org].children.forEach(function (item, index) {\n                var _parentOrgId = item.parentOrgId;\n                var _parentOrg = orgsList[_parentOrgId];\n\n                var _isTopLevel = _parentOrg ? _parentOrg.isTopLevel : false;\n\n                childClinic = '<div id=\"' + item.id + '_container\" ' + (_isTopLevel ? ' data-parent-id=\"' + _parentOrgId + '\"  data-parent-name=\"' + _parentOrg.name + '\" ' : \"\") + ' class=\"indent org-container\">';\n\n                if (orgsList[item.id].children.length > 0) {\n                  childClinic += '<label class=\"org-label ' + (orgsList[item.parentOrgId].isTopLevel ? \"text-muted\" : \"text-muter\") + '\">' + '<input class=\"clinic\" type=\"radio\" name=\"organization\" id=\"' + item.id + '_org\" value=\"' + item.id + '\"  ' + (_isTopLevel ? ' data-parent-id=\"' + _parentOrgId + '\"  data-parent-name=\"' + _parentOrg.name + '\" ' : \"\") + '/><span>' + i18next.t(item.name) + '</span></label>';\n                } else {\n                  childClinic += '<label class=\"org-label\">' + '<input class=\"clinic\" type=\"radio\" name=\"organization\" id=\"' + item.id + '_org\" value=\"' + item.id + '\"  ' + (_isTopLevel ? ' data-parent-id=\"' + _parentOrgId + '\"  data-parent-name=\"' + _parentOrg.name + '\" ' : \"\") + '/><span>' + i18next.t(item.name) + '</span></label>';\n                }\n\n                childClinic += '</div>';\n                if ($(\"#\" + _parentOrgId + \"_container\").length > 0) $(\"#\" + _parentOrgId + \"_container\").append(childClinic);else {\n                  $(\"#fillOrgs\").append(childClinic);\n                }\n              });\n            }\n\n            ;\n\n            if (parentOrgsCt > 0 && orgsList[org].isTopLevel) {\n              $(\"#fillOrgs\").append(\"<span class='divider'>&nbsp;</span>\");\n            }\n          }\n\n          ;\n        };\n\n        this.handleNoOrgs = function (userId) {\n          $(\".intervention-link, a.decision-support-link\").each(function () {\n            var dm = /decision\\s?support/gi;\n\n            if (dm.test($(this).text()) || $(this).hasClass(\"decision-support-link\")) {\n              var hasSet = typeof sessionStorage != \"undefined\" && sessionStorage.getItem(\"noOrgModalViewed\"); //allow modal to show once once action has been taken\n\n              if (hasSet) {\n                return false;\n              }\n\n              var self = this;\n              $.ajax({\n                type: \"GET\",\n                url: \"/api/demographics/\" + userId,\n                async: false\n              }).done(function (data) {\n                if (data && data.careProvider) {\n                  $.each(data.careProvider, function (i, val) {\n                    var orgID = val.reference.split(\"/\").pop();\n\n                    if (parseInt(orgID) === 0) {\n                      $(self).removeAttr(\"href\");\n                      $(self).on(\"click\", function () {\n                        $(\"figure.js-close-nav\").trigger(\"click\");\n                        setTimeout(function () {\n                          $(\"#modal-org\").modal(\"show\");\n                        }, 0);\n                      });\n                      window.app.interventionSessionObj.clearSession(\"decision-support\");\n                    }\n\n                    ;\n                  });\n                }\n\n                ;\n              }).fail(function (xhr) {\n                window.app.global.reportError(userId, \"/api/demographics/\" + userId, xhr.responseText);\n              });\n            }\n\n            ;\n          });\n        };\n\n        this.updateOrgCallback = function (errorMessage) {\n          if (!errorMessage) {\n            $(\"#modal-org a.box-modal__close\").trigger(\"click\");\n            window.app.utilObj.setVis(true);\n            setTimeout(function () {\n              location.reload();\n            }, 1000);\n\n            if (typeof sessionStorage !== \"undefined\") {\n              sessionStorage.setItem(\"noOrgModalViewed\", \"true\");\n            }\n          } else {\n            $(\"#modal-org-error\").html(i18next.t(\"Error updating organization\"));\n          }\n        };\n      };\n    }();\n  }, {}],\n  13: [function (require, module, exports) {\n    var menuObj;\n\n    module.exports = menuObj = function () {\n      return function () {\n        this.init = function (currentUserId) {\n          if (window.app.global.checkRole(\"patient\") || window.app.global.checkRole(\"partner\")) {\n            this.filterMenu(currentUserId);\n          } else {\n            window.app.visObj.hideLoader();\n          }\n\n          this.setSelectedNavItem($(\".side-nav-items__item--\" + $(\"main\").attr(\"data-section\")));\n          this.handleDisabledLinks();\n          $(\"footer a[href='/\" + $(\"main\").attr(\"data-link-identifier\") + \"']\").hide();\n\n          if ($(\"main\").attr(\"data-section\") === \"about\") {\n            $(\"#repoVersion\").show();\n          }\n        };\n\n        this.handleDisabledLinks = function () {\n          if (window.app.utilObj.getUrlParameter(\"disableLinks\")) {\n            $(\"nav.side-nav li.side-nav-items__item, footer .nav-list__item\").each(function () {\n              if (!$(this).hasClass(\"side-nav-items__item--home\") && !$(this).hasClass(\"side-nav-items__item--logout\") && !$(this).hasClass(\"nav-list__item--home\")) {\n                $(this).children(\"a\").each(function () {\n                  $(this).addClass(\"disabled\");\n                  $(this).prop(\"onclick\", null).off(\"click\");\n                  $(this).on(\"click\", function (e) {\n                    e.preventDefault();\n                    return false;\n                  });\n                });\n              }\n            });\n          }\n        };\n\n        this.setSelectedNavItem = function (obj) {\n          $(obj).addClass(\"side-nave-items__item--selected\");\n          $(\"li.side-nave-items__item--selected\").find(\"a\").attr(\"href\", \"#\");\n          $(obj).on(\"click\", function (event) {\n            event.preventDefault();\n            window.app.utilObj.setVis(false);\n            $(\".side-nav__close\").trigger(\"click\");\n            return;\n          });\n        };\n\n        this.handleItemRedirect = function (userId, itemName, enable) {\n          var visObj = window.app.visObj;\n\n          if (!enable) {\n            $(\".\" + itemName + \"-link\").each(function () {\n              $(this).removeAttr(\"href\");\n              $(this).addClass(\"icon-box__button--disabled\");\n            });\n            $(\".icon-box-\" + itemName).addClass(\"icon-box--theme-inactive\");\n            window.app.interventionSessionObj.clearSession(itemName);\n          } else {\n            window.app.orgTool.handleNoOrgs(userId);\n\n            if (window.app.interventionSessionObj.getSession(itemName)) {\n              var l = $(\"#intervention_item_\" + itemName + \" a\");\n              var la = l.attr(\"href\");\n\n              if (l.length > 0 && window.app.utilObj.validateUrl(la)) {\n                window.app.interventionSessionObj.clearSession(itemName);\n                visObj.setRedirect();\n                setTimeout(function () {\n                  location.replace(l.attr(\"href\"));\n                }, 0);\n                return true;\n              }\n\n              ;\n            }\n\n            ;\n          }\n\n          ;\n        };\n\n        this.setItemVis = function (item, itemLink, vis) {\n          if (item) {\n            switch (vis) {\n              case \"disabled\":\n                item.removeAttr(\"href\");\n                item.addClass(\"icon-box__button--disabled\");\n                break;\n\n              default:\n                item.attr(\"href\", itemLink);\n                item.removeClass(\"icon-box__button--disabled\");\n            }\n          }\n        };\n\n        this.handleInterventionItemLinks = function (interventionItem, customName) {\n          var self = this;\n\n          if (interventionItem) {\n            var link = interventionItem.link_url;\n            var disabled = String(link) === \"disabled\";\n            var itemName = customName || interventionItem.name;\n            var linkItems = $(\".\" + itemName + \"-link\");\n            var menuItem = $(\"#intervention_item_\" + itemName);\n\n            if (!disabled && menuItem.length === 0) {\n              //only draw this when there isn't already one\n              $(\".side-nav-items__item--dashboard\").after('<li id=\"intervention_item_' + itemName + '\" class=\"side-nav-items__item side-nav-items__item--has-icon side-nav-items__item--accentuated\"><a href=\"' + link + '\" class=\"capitalize intervention-link\">' + interventionItem.description + '</a></li>');\n            }\n\n            if (linkItems.length > 0) {\n              if (!disabled) {\n                linkItems.each(function () {\n                  self.setItemVis($(this), link);\n                });\n                $(\".icon-box-\" + itemName).removeClass(\"icon-box--theme-inactive\");\n              } else {\n                linkItems.each(function () {\n                  self.setItemVis($(this), link, \"disabled\");\n                });\n                $(\".icon-box-\" + itemName).addClass(\"icon-box--theme-inactive\");\n              }\n            }\n          }\n        };\n\n        this.filterMenu = function (userId) {\n          if (!userId) {\n            return false;\n          }\n\n          var self = this;\n\n          var __PORTAL = $(\"#portalURI\").val();\n\n          $.ajax({\n            url: __PORTAL + \"/gil-interventions-items/\" + userId,\n            context: document.body,\n            async: false,\n            cache: false\n          }).done(function (data) {\n            var found_decision_support = false,\n                found_symptom_tracker = false;\n\n            if (data.interventions) {\n              if (data.interventions.length > 0) {\n                var db = $(\".side-nav-items__item--dashboard\");\n\n                if (db.length === 0) {\n                  $(\".side-nav-items\").prepend('<li class=\"side-nav-items__item side-nav-items__item--dashboard\"><a href=\"' + __PORTAL + '/home\">' + i18next.t(\"My Dashboard\") + '</a></li>');\n\n                  if ($(\"#portalMain\").length > 0) {\n                    self.setSelectedNavItem($(\".side-nav-items__item--dashboard\"));\n                  }\n                }\n\n                $(\".side-nav-items__item--home\").hide();\n              }\n\n              data.interventions.forEach(function (item) {\n                var itemDescription = item.description;\n                var itemLink = item.link_url;\n                var itemName = item.name.replace(/\\_/g, \" \");\n                var disabled = item.link_url == \"disabled\";\n                var dm = /decision\\s?support/gi;\n                var sm = /symptom\\s?tracker/gi;\n                var sm2 = /self[_\\s]?management/gi;\n\n                if (dm.test(itemDescription) || dm.test(itemName)) {\n                  if (!disabled) {\n                    found_decision_support = true;\n                  }\n\n                  self.handleInterventionItemLinks(item, \"decision-support\");\n                } else if (sm.test(itemDescription) || sm2.test(itemName)) {\n                  if (!disabled) {\n                    found_symptom_tracker = true;\n                  }\n\n                  self.handleInterventionItemLinks(item, \"symptom-tracker\");\n                } else if ($.trim(itemDescription) !== \"\") {\n                  self.handleInterventionItemLinks(item);\n                }\n\n                ;\n              });\n              self.handleItemRedirect(userId, \"decision-support\", found_decision_support);\n              self.handleItemRedirect(userId, \"symptom-tracker\", found_symptom_tracker);\n            }\n\n            ;\n            window.app.utilObj.setVis(false);\n          }).fail(function () {\n            window.app.utilObj.setVis(false);\n          });\n        };\n      };\n    }();\n  }, {}],\n  14: [function (require, module, exports) {\n    var accessCodeObj;\n\n    module.exports = accessCodeObj = function () {\n      return function () {\n        this.handleAccessCode = function () {\n          if ($(\"#shortcut_alias\").val() !== \"\" && $(\"#access_code_error\").text() === \"\") {\n            $(\"#access_code_info\").show();\n            $(\"#accessCodeLink\").addClass(\"icon-box__button--disabled\");\n            $(\"#btnCreateAccount\").removeAttr(\"href\").addClass(\"icon-box__button--disabled\");\n            $(\"#shortcut_alias\").attr(\"disabled\", true);\n            window.app.interventionSessionObj.setInterventionSession();\n            setTimeout(function () {\n              location.replace(\"/go/\" + $(\"#shortcut_alias\").val().toLowerCase());\n            }, 4000);\n          } else {\n            if ($(\"#access_code_error\").text() !== \"\") {\n              $(\"#access_code_error\").show();\n            }\n          }\n        };\n\n        this.handleEvents = function () {\n          var self = this;\n          $(\"#shortcut_alias\").on(\"keyup paste\", function (e) {\n            if ($(this).val() !== \"\") {\n              window.app.orgTool.validateIdentifier(false, function (data) {\n                if (data) {\n                  if (data.name) {\n                    $(\"#access_code_info\").html(i18next.t(\"Thank you, your access code {shortcut_alias} indicates you are located at the {org_name}. Proceeding to registration ...\").replace(\"{shortcut_alias}\", \"<b>\" + $(\"#shortcut_alias\").val() + \"</b>\").replace(\"{org_name}\", \"<b>\" + data.name + \"</b>\"));\n                    $(\"#access_code_error\").text(\"\");\n                  } else {\n                    if (data.error) {\n                      $(\"#access_code_info\").text(\"\");\n                      $(\"#access_code_error\").text(i18next.t(\"You have entered an invalid access code.  Please try again\"));\n                    }\n                  }\n                } else {\n                  if ($(\"#shortcut_alias\").val() !== \"\") {\n                    $(\"#access_code_info\").text(\"\");\n                    $(\"#access_code_error\").text(i18next.t(\"System was unable to process your request.\"));\n                  }\n                }\n              });\n            } else {\n              $(\"#access_code_info\").text(\"\");\n            }\n          }).on(\"keydown\", function (e) {\n            if (e.keyCode === RETURN_KEY_CODE) {\n              e.preventDefault();\n              self.handleAccessCode();\n            }\n          });\n          $(\"#accessCodeLink\").on(\"click\", function () {\n            self.handleAccessCode();\n          });\n        };\n      };\n    }();\n  }, {}],\n  15: [function (require, module, exports) {\n    var utilObj;\n\n    module.exports = utilObj = function () {\n      return function () {\n        /*********\n         *\n         * general global utilities function\n         *\n         *********/\n        this.handlePostLogout = function () {\n          if ($(\"main[data-section='home']\").length) {\n            _modules_Utility_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].handlePostLogout();\n            /*global Utility handlePostLogout */\n          }\n        };\n\n        this.setVis = function (show) {\n          if (show) {\n            window.app.visObj.showLoader();\n          } else {\n            window.app.visObj.showMain();\n          }\n        };\n\n        this.LRKeyEvent = function () {\n          if ($(\".button--LR\").length > 0) {\n            $(\"html\").on(\"keydown\", function (e) {\n              var LR_INVOKE_KEYCODE = 187; // \"=\" sign\n\n              if (e.keyCode === LR_INVOKE_KEYCODE) {\n                $(\".button--LR\").toggleClass(\"show\");\n              }\n            });\n          }\n        };\n\n        this.appendLREditContainer = function (target, url, show) {\n          if (!url) {\n            return false;\n          }\n\n          if (!target) {\n            target = $(document);\n          }\n\n          target.append(\"<div>\" + '<a href=\"' + url + '\" target=\"_blank\" class=\"menu button button--small button--teal button--LR\">' + i18next.t(\"Edit in Liferay\") + '</a>' + \"</div>\");\n\n          if (show) {\n            $(\".button--LR\").addClass(\"show\");\n          }\n        };\n\n        this.hasValue = function (val) {\n          return val != null && val != \"\" && val != \"undefined\";\n        }; //this test for full URL - \"https://stg-sm.us.truenth.org\" etc.\n\n\n        this.validateUrl = function (val) {\n          return val && $.trim(val) !== \"#\" && /^(https?|ftp)?(:)?(\\/\\/)?([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+\\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\\/($|[a-zA-Z0-9.,?'\\\\+&%$#=~_-]+))*$/.test(val);\n        };\n\n        this.getUrlParameter = function (name) {\n          name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n          var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n          var results = regex.exec(location.search);\n          return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n        };\n\n        this.initSessionMonitor = function () {\n          /*\n           * get portal wrapper nav content\n           * this contains session monitor & piwik setups\n           */\n          $.ajax({\n            url: $(\"#portalURI\").val() + \"/api/portal-wrapper-html/\",\n            type: \"GET\",\n            contentType: \"text/plain\"\n          }, \"html\").done(function (data) {\n            $(\"#portalWrapperNav\") // Embed data returned by AJAX call into container element\n            .html(data);\n          }).fail(function (xhr) {\n            /*\n             * report error\n             */\n            var params = {};\n            params.subject_id = $(\"#currentUserId\").val() ? $(\"#currentUserId\").val() : 0;\n            params.page_url = window.location.href; //don't think we want to translate message sent back to the server here\n\n            params.message = \"In GIL, error loading nav elements from portal - \" + xhr.responseText;\n            $.ajax({\n              type: \"GET\",\n              url: \"/report-error\",\n              contentType: \"application/json; charset=utf-8\",\n              cache: false,\n              async: true,\n              data: params\n            }).done(function (data) {});\n          });\n        };\n\n        this.handleLoginAsUser = function () {\n          var __LOGIN_AS_PATIENT = typeof sessionStorage !== \"undefined\" ? sessionStorage.getItem(\"loginAsPatient\") : null;\n\n          if (__LOGIN_AS_PATIENT) {\n            if (typeof history !== \"undefined\" && history.pushState) {\n              history.pushState(null, null, location.href);\n            }\n\n            window.addEventListener(\"popstate\", function (event) {\n              if (typeof history !== \"undefined\" && history.pushState) {\n                history.pushState(null, null, location.href);\n                setTimeout(function () {\n                  location.reload();\n                }, 0);\n              } else {\n                window.history.forward(1);\n                setTimeout(function () {\n                  location.reload();\n                }, 0);\n              }\n            });\n          }\n        };\n      };\n    }();\n  }, {}]\n}, {}, [2]);\n\n$(document).ready(function () {\n  //note: display system outage message only after i18next has been instantiated - allowing message to be translated\n  _modules_Utility_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].displaySystemOutageMessage();\n  /* global Utility displaySystemOutageMessage */\n\n  var currentUserId = $(\"#currentUserId\").val(); // Configure and start the session timeout monitor\n\n  if (currentUserId !== \"\") {\n    window.app.utilObj.initSessionMonitor();\n    window.app.utilObj.handleLoginAsUser();\n    window.app.orgTool.getOrgs(currentUserId);\n  } else {\n    window.app.utilObj.handlePostLogout();\n  }\n\n  $(\".button--login--register\").on(\"click\", function () {\n    $(\"#modal-login-register\").modal(\"hide\");\n    setTimeout(function () {\n      $(\"#modal-login\").modal(\"show\");\n    }, 400);\n  });\n  $(\"#modal-login\").on(\"show.bs.modal\", function (e) {\n    window.app.utilObj.setVis(false);\n  });\n  $(\"#btnCreateAccount\").on(\"click\", function () {\n    window.app.interventionSessionObj.setInterventionSession();\n  });\n  $(\"a.icon-box__button--disabled, .side-nave-items__item--selected a\").on(\"click\", function (e) {\n    e.preventDefault();\n    window.app.utilObj.setVis(false);\n    return false;\n  });\n  $(\"#password\").on(\"keyup\", function () {\n    if (e.keyCode === RETURN_KEY_CODE) {\n      e.preventDefault();\n\n      if ($(\"input[name='email']\").val() !== \"\") {\n        $(\"#btnLogin\").trigger(\"click\");\n      }\n    }\n  });\n  $(\"input[type='text']\").on(\"blur paste\", function () {\n    $(this).val($.trim($(this).val()));\n  });\n\n  if ($(\"#sessionTimedOut\").val() === \"true\") {\n    $(\"#timeout-modal\").modal(\"show\");\n  }\n\n  if ($(\"main\").attr(\"data-theme\") === \"white\") {\n    $(\"body\").addClass(\"theme--intro-light\");\n  }\n\n  if (String($(\"#showFlashMessageModal\").val()).toLowerCase() === \"true\") {\n    $(\"#alertModal\").modal(\"show\");\n  }\n\n  window.app.upperBanner.handleAccess();\n  window.app.upperBanner.handleWatermark();\n  window.app.accessCodeObj.handleEvents();\n  window.app.menuObj.init(currentUserId);\n  window.app.interventionSessionObj.clearSession($(\"main\").attr(\"data-link-identifier\"));\n  window.app.utilObj.appendLREditContainer($(\"main .LR-content-container\"), $(\"#LREditorURL\").val(), window.app.global.checkRole(\"content_manager\"));\n  setTimeout(function () {\n    window.app.utilObj.setVis(false);\n  }, 0);\n});\n\n//# sourceURL=webpack:///./static/js/src/gil.js?");

/***/ }),

/***/ "./static/js/src/modules/I18nextConfig.js":
/*!************************************************!*\
  !*** ./static/js/src/modules/I18nextConfig.js ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/*** wrapper object to initalize i18next ***/\n/* harmony default export */ __webpack_exports__[\"default\"] = ((function () {\n  function _init(options, callback) {\n    var getQueryString = function (a) {\n      if (String(a) === \"\") {\n        return {};\n      }\n\n      var b = {};\n\n      for (var i = 0; i < a.length; ++i) {\n        var p = a[i].split(\"=\", 2);\n\n        if (p.length === 1) {\n          b[p[0]] = \"\";\n        } else {\n          b[p[0]] = decodeURIComponent(p[1].replace(/\\+/g, \" \"));\n        }\n      }\n\n      return b;\n    }(window.location.search.substr(1).split(\"&\"));\n\n    if (typeof window.localStorage !== \"undefined\") {\n      if (window.localStorage.getItem(\"i18nextLng\")) {\n        window.localStorage.removeItem(\"i18nextLng\");\n      }\n    }\n\n    var source = options.loadPath || \"/static/files/locales/{{lng}}/translation.json\"; //consuming translation json from each corresponding locale\n\n    var defaultOptions = {\n      fallbackLng: \"en-US\",\n      lng: \"en-US\",\n      preload: false,\n      debug: false,\n      defaultNS: \"translation\",\n      initImmediate: false,\n      keySeparator: \"----\",\n      nsSeparator: \"----\",\n      load: \"currentOnly\",\n      returnEmptyString: false,\n      returnNull: false,\n      saveMissing: false,\n      missingKeyHandler: false,\n      parseMissingKeyHandler: function parseMissingKeyHandler(key) {\n        //allow lookup for translated text for missing key\n        var sessionData = sessionStorage.getItem(\"i18nextData_\" + this.lng);\n\n        if (!sessionData) {\n          return key;\n        }\n\n        try {\n          var data = JSON.parse(sessionData);\n\n          if (data && data.hasOwnProperty(key)) {\n            return data[key];\n          }\n        } catch (e) {\n          return key;\n        }\n\n        return key;\n      },\n      backend: {\n        // load from static file\n        language: options.lng,\n        loadPath: source,\n        ajax: function ajax(url, options, callback, data, cache) {\n          /*\n           * default code from i18nextBackend.js, but modify it to allow sync loading of resources and add session storage\n           */\n          callback = callback || function () {};\n\n          var sessionItemKey = \"i18nextData_\" + options.language;\n\n          if (data && (typeof data === \"undefined\" ? \"undefined\" : _typeof(data)) === \"object\") {\n            /*global _typeof */\n            if (!cache) {\n              data[\"_t\"] = new Date();\n            } // URL encoded form data must be in querystring format\n\n\n            data = addQueryString(\"\", data).slice(1);\n            /* global addQueryString */\n          }\n\n          if (options.queryStringParams) {\n            url = addQueryString(url, options.queryStringParams);\n            /* global addQueryString */\n          }\n\n          var x;\n\n          if (XMLHttpRequest) {\n            x = new XMLHttpRequest();\n          } else {\n            x = new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            /*global ActiveXObject */\n          }\n\n          try {\n            //use sync\n            x.open(data ? \"POST\" : \"GET\", url, 0);\n\n            if (!options.crossDomain) {\n              x.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n            }\n\n            x.withCredentials = !!options.withCredentials;\n\n            if (data) {\n              x.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n            }\n\n            if (x.overrideMimeType) {\n              x.overrideMimeType(\"application/json\");\n            }\n\n            var h = options.customHeaders;\n\n            if (h) {\n              for (var i in h) {\n                if (h.hasOwnProperty(i)) {\n                  x.setRequestHeader(i, h[i]);\n                }\n              }\n            }\n\n            x.onreadystatechange = function () {\n              if (x.readyState > 3) {\n                callback(x.responseText, x);\n\n                if (x.responseText && !sessionStorage.getItem(sessionItemKey)) {\n                  sessionStorage.setItem(sessionItemKey, JSON.stringify(x.responseText));\n                }\n              }\n            };\n\n            x.send(data);\n          } catch (e) {\n            if (console) {\n              console.log(e);\n            }\n            /*global console */\n\n          }\n        }\n      }\n    };\n    options = options || defaultOptions;\n\n    if (options.lng) {\n      options.lng = options.lng.replace(\"_\", \"-\");\n    }\n\n    options.debug = options.debug ? options.debug : getQueryString.debugi18next ? true : false;\n    var configOptions = defaultOptions;\n\n    for (var key in options) {\n      if (defaultOptions.hasOwnProperty(key)) {\n        defaultOptions[key] = options[key];\n      }\n    }\n\n    var sessionItemKey = \"i18nextData_\" + options.language;\n\n    callback = callback || function () {};\n\n    if (typeof i18next === \"undefined\") {\n      //i18next js libraries raises runtime error in <= IE8 \n      callback();\n      return false;\n    }\n\n    if (String(options.lng).toLowerCase() === \"en-us\" || sessionStorage.getItem(sessionItemKey)) {\n      //still need to initialize i18next but skip call to backend\n      i18next.init(configOptions, function (err, t) {\n        /* global i18next i18nextXHRBackend */\n        callback(t);\n      });\n    } else {\n      i18next.use(i18nextXHRBackend).init(configOptions, function (err, t) {\n        /* global i18next i18nextXHRBackend */\n        callback(t);\n      });\n    }\n  }\n\n  return {\n    init: function init(options, callback) {\n      callback = callback || function () {};\n\n      try {\n        _init(options, callback);\n      } catch (e) {\n        /*eslint no-console: off */\n        console.log(\"Error initialized i18next \", e.message); //note i18next makes use of session storage/local storage, the access of which creates JS runtime error when cookies are disabled, so we need to catch them\n\n        callback();\n      }\n    }\n  };\n})());\n\n//# sourceURL=webpack:///./static/js/src/modules/I18nextConfig.js?");

/***/ }),

/***/ "./static/js/src/modules/Utility.js":
/*!******************************************!*\
  !*** ./static/js/src/modules/Utility.js ***!
  \******************************************/
/*! exports provided: default, getExportFileName, getUrlParameter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getExportFileName\", function() { return getExportFileName; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUrlParameter\", function() { return getUrlParameter; });\nvar Utility = function () {\n  var UtilityObj = function UtilityObj() {\n    /*global $ */\n    this.requestAttempts = 0;\n  };\n\n  UtilityObj.prototype.hasValue = function (val) {\n    return String(val) !== \"null\" && String(val) !== \"\" && String(val) !== \"undefined\";\n  };\n\n  UtilityObj.prototype.showMain = function () {\n    $(\"#mainHolder\").css({\n      \"visibility\": \"visible\",\n      \"-ms-filter\": \"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\",\n      \"filter\": \"alpha(opacity=100)\",\n      \"-moz-opacity\": 1,\n      \"-khtml-opacity\": 1,\n      \"opacity\": 1\n    });\n  };\n\n  UtilityObj.prototype.hideLoader = function (delay, time) {\n    if (delay) {\n      $(\"#loadingIndicator\").hide();\n      return;\n    }\n\n    setTimeout(function () {\n      $(\"#loadingIndicator\").fadeOut();\n    }, time || 200);\n  };\n\n  UtilityObj.prototype.loader = function (show) {\n    //landing page\n    if (document.getElementById(\"fullSizeContainer\")) {\n      this.hideLoader();\n      this.showMain();\n      return false;\n    }\n\n    if (show) {\n      $(\"#loadingIndicator\").show();\n      return;\n    }\n\n    if (!this.isDelayLoading()) {\n      var self = this;\n      setTimeout(function () {\n        self.showMain();\n      }, 100);\n      this.hideLoader(true, 350);\n    }\n  };\n\n  UtilityObj.prototype.isDelayLoading = function () {\n    /*global DELAY_LOADING*/\n    return typeof DELAY_LOADING !== \"undefined\" && DELAY_LOADING;\n  };\n\n  UtilityObj.prototype.isTouchDevice = function () {\n    return true === (\"ontouchstart\" in window || window.DocumentTouch && document instanceof window.DocumentTouch);\n  };\n\n  UtilityObj.prototype.getIEVersion = function () {\n    var match = navigator.userAgent.match(/(?:MSIE |Trident\\/.*; rv:)(\\d+)/);\n    return match ? parseInt(match[1]) : false;\n  };\n\n  UtilityObj.prototype.newHttpRequest = function (url, params, callBack) {\n    /* note: this function supports older version of IE (version <= 9) - jquery ajax calls errored in older IE version*/\n    this.requestAttempts++;\n    var xmlhttp,\n        self = this;\n\n    callBack = callBack || function () {};\n\n    if (window.XDomainRequest) {\n      /*global XDomainRequest */\n      xmlhttp = new XDomainRequest();\n\n      xmlhttp.onload = function () {\n        callBack(xmlhttp.responseText);\n      };\n    } else if (window.XMLHttpRequest) {\n      xmlhttp = new XMLHttpRequest();\n    } else {\n      xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n      /*global ActiveXObject */\n    }\n\n    xmlhttp.onreadystatechange = function () {\n      if (xmlhttp.readyState === 4) {\n        if (xmlhttp.status === 200) {\n          callBack(xmlhttp.responseText);\n          self.requestAttempts = 0;\n          return;\n        }\n\n        if (self.requestAttempts < 3) {\n          setTimeout(function () {\n            self.newHttpRequest(url, params, callBack);\n          }, 3000);\n        } else {\n          callBack({\n            error: xmlhttp.responseText\n          });\n          self.loader();\n          self.requestAttempts = 0;\n        }\n      }\n    };\n\n    params = params || {};\n    xmlhttp.open(\"GET\", url, true);\n\n    for (var param in params) {\n      if (params.hasOwnProperty(param)) {\n        xmlhttp.setRequestHeader(param, params[param]);\n      }\n    }\n\n    if (!params.cache) {\n      xmlhttp.setRequestHeader(\"cache-control\", \"no-cache\");\n      xmlhttp.setRequestHeader(\"expires\", \"-1\");\n      xmlhttp.setRequestHeader(\"pragma\", \"no-cache\"); //legacy HTTP 1.0 servers and IE support\n    }\n\n    xmlhttp.send();\n  };\n\n  UtilityObj.prototype.ajaxRequest = function (url, params, callback) {\n    callback = callback || function () {};\n\n    if (!url) {\n      callback({\n        error: i18next.t(\"Url is required.\")\n      });\n      return false;\n    }\n\n    var defaults = {\n      url: url,\n      type: \"GET\",\n      contentType: \"text/plain\",\n      timeout: 5000,\n      cache: false\n    };\n    params = params || defaults;\n    params = $.extend({}, defaults, params);\n    this.requestAttempts++;\n    var uself = this;\n    $.ajax(params).done(function (data) {\n      callback(data);\n      uself.requestAttempts = 0;\n    }).fail(function () {\n      if (uself.requestAttempts <= 3) {\n        setTimeout(function () {\n          uself.ajaxRequest(url, params, callback);\n        }, 3000);\n      } else {\n        callback({\n          error: i18next.t(\"Error occurred processing request\")\n        });\n        /*global i18next */\n\n        uself.requestAttempts = 0;\n        uself.loader();\n      }\n    }).always(function () {\n      uself.loader();\n    });\n  };\n\n  UtilityObj.prototype.initWorker = function (url, params, callbackFunc) {\n    var worker = new Worker(\"/static/js/ajaxWorker.js\");\n    var self = this;\n    worker.postMessage({\n      url: url,\n      params: params\n    });\n    worker.addEventListener(\"message\", function (e) {\n      callbackFunc.call(self, e.data);\n      worker.terminate();\n    }, false);\n    worker.addEventListener(\"error\", function (e) {\n      console.log(\"Worker runtime error: Line \", e.lineno, \" in \", e.filename, \": \", e.message);\n      worker.terminate();\n    }, false);\n  };\n\n  UtilityObj.prototype.workerAllowed = function () {\n    return window.Worker && !this.isTouchDevice();\n  };\n\n  UtilityObj.prototype.getRequestMethod = function () {\n    return this.getIEVersion() ? this.newHttpRequest : this.ajaxRequest; //NOTE JQuery ajax request does not work for IE <= 9\n  };\n\n  UtilityObj.prototype.sendRequest = function (url, params, callback) {\n    /*generic function for sending GET ajax request, make use of worker if possible */\n    params = params || {};\n\n    if (params.useWorker && this.workerAllowed()) {\n      this.initWorker(url, params, callback);\n      return true;\n    }\n\n    var useFunc = this.getRequestMethod();\n    useFunc.call(this, url, params, function (data) {\n      callback.call(this, data);\n    });\n  };\n\n  UtilityObj.prototype.LRKeyEvent = function () {\n    var LR_INVOKE_KEYCODE = 187;\n\n    if ($(\".button--LR\").length > 0) {\n      $(\"html\").on(\"keydown\", function (e) {\n        if (parseInt(e.keyCode) === parseInt(LR_INVOKE_KEYCODE)) {\n          $(\".button--LR\").toggleClass(\"data-show\");\n        }\n      });\n    }\n  };\n\n  UtilityObj.prototype.getLoaderHTML = function (message) {\n    return \"<div class=\\\"loading-message-indicator\\\"><i class=\\\"fa fa-spinner fa-spin fa-2x\\\"></i>\".concat(message ? \"&nbsp;\" + message : \"\", \"</div>\");\n  };\n\n  UtilityObj.prototype.convertToNumericField = function (field) {\n    if (!field) {\n      return;\n    }\n\n    if (this.isTouchDevice()) {\n      field.each(function () {\n        $(this).prop(\"type\", \"tel\");\n      });\n    }\n  };\n\n  UtilityObj.prototype.isString = function (obj) {\n    return Object.prototype.toString.call(obj) === \"[object String]\";\n  };\n\n  UtilityObj.prototype.disableHeaderFooterLinks = function () {\n    var links = $(\"#tnthNavWrapper a, #homeFooter a\").not(\"a[href*='logout']\").not(\"a.required-link\").not(\"a.home-link\");\n    links.addClass(\"disabled\");\n    links.prop(\"onclick\", null).off(\"click\");\n    links.on(\"click\", function (e) {\n      e.preventDefault();\n      return false;\n    });\n  };\n\n  UtilityObj.prototype.pad = function (n) {\n    n = parseInt(n);\n    return !isNaN(n) && n < 10 ? \"0\" + n : n;\n  };\n\n  UtilityObj.prototype.escapeHtml = function (text) {\n    \"use strict\";\n\n    if (text === null || text !== \"undefined\" || String(text).length === 0) {\n      return text;\n    }\n\n    return text.replace(/[\\\"&'\\/<>]/g, function (a) {\n      return {\n        '\"': \"&quot;\",\n        \"&\": \"&amp;\",\n        \"'\": \"&#39;\",\n        \"/\": \"&#47;\",\n        \"<\": \"&lt;\",\n        \">\": \"&gt;\"\n      }[a];\n    });\n  };\n\n  UtilityObj.prototype.containHtmlTags = function (text) {\n    if (!text) {\n      return false;\n    }\n\n    return /[<>]/.test(text);\n  };\n\n  UtilityObj.prototype.getExportFileName = function (prefix) {\n    var d = new Date();\n    return (prefix ? prefix : \"ExportList_\") + (\"00\" + d.getDate()).slice(-2) + (\"00\" + (d.getMonth() + 1)).slice(-2) + d.getFullYear();\n  };\n\n  UtilityObj.prototype.capitalize = function (str) {\n    return str.replace(/\\w\\S*/g, function (txt) {\n      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n    });\n  };\n\n  UtilityObj.prototype.restoreVis = function () {\n    var loadingElement = document.getElementById(\"loadingIndicator\"),\n        mainElement = document.getElementById(\"mainHolder\");\n\n    if (loadingElement) {\n      loadingElement.setAttribute(\"style\", \"display:none; visibility:hidden;\");\n    }\n\n    if (mainElement) {\n      mainElement.setAttribute(\"style\", \"visibility:visible;-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=100)';filter:alpha(opacity=100); -moz-opacity:1; -khtml-opacity:1; opacity:1\");\n    }\n  };\n\n  UtilityObj.prototype.VueErrorHandling = function () {\n    if (typeof Vue === \"undefined\") {\n      return false;\n    }\n    /*global Vue */\n\n\n    var self = this;\n\n    Vue.config.errorHandler = function (err, vm, info) {\n      var handler,\n          current = vm;\n\n      if (vm.$options.errorHandler) {\n        handler = vm.$options.errorHandler;\n      } else {\n        while (!handler && current.$parent) {\n          current = current.$parent;\n          handler = current.$options.errorHandler;\n        }\n      }\n\n      self.restoreVis();\n\n      if (handler) {\n        handler.call(current, err, vm, info);\n        return;\n      }\n\n      console.log(err);\n    };\n  };\n\n  UtilityObj.prototype.extend = function (obj, extension) {\n    // Extend an object with an extension\n    for (var key in extension) {\n      if (extension.hasOwnProperty(key)) {\n        obj[key] = extension[key];\n      }\n    }\n\n    return obj;\n  };\n\n  UtilityObj.prototype.getUrlParameter = function (name) {\n    name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n    var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n    var results = regex.exec(location.search);\n    return results === null ? \"\" : decodeURIComponent(results[1]);\n  };\n\n  UtilityObj.prototype.resetBrowserBackHistory = function (locationUrl, stateObject, title) {\n    var historyDefined = typeof history !== \"undefined\" && history.pushState;\n    locationUrl = locationUrl || location.href;\n\n    if (historyDefined) {\n      history.pushState(stateObject, title, locationUrl);\n    }\n\n    window.addEventListener(\"popstate\", function () {\n      if (historyDefined) {\n        history.pushState(stateObject, title, locationUrl);\n      } else {\n        window.history.forward(1);\n      }\n    });\n  };\n\n  UtilityObj.prototype.handlePostLogout = function () {\n    if (typeof sessionStorage === \"undefined\") {\n      return false;\n    }\n\n    if (sessionStorage.getItem(\"logout\")) {\n      this.resetBrowserBackHistory(location.orgin, \"logout\");\n      /* global resetBrowserBackHistory */\n\n      sessionStorage.removeItem(\"logout\");\n    }\n  };\n\n  UtilityObj.prototype.displaySystemOutageMessage = function (locale) {\n    locale = locale || \"en-us\";\n    locale = locale.replace(\"_\", \"-\");\n    var systemMaintenanceElId = \"systemMaintenanceContainer\";\n\n    if (!document.getElementById(systemMaintenanceElId)) {\n      //check for system outage maintenance message element\n      return;\n    }\n\n    var self = this;\n    this.ajaxRequest(\"api/settings\", {\n      contentType: \"application/json; charset=utf-8\"\n    }, function (data) {\n      if (!data || !(data.MAINTENANCE_MESSAGE || data.MAINTENANCE_WINDOW)) {\n        return false;\n      }\n\n      var messageElement = document.querySelector(\".message-container\");\n\n      if (!messageElement) {\n        messageElement = document.createElement(\"div\");\n        messageElement.classList.add(\"message-container\");\n        document.getElementById(systemMaintenanceElId).appendChild(messageElement);\n      }\n\n      if (data.MAINTENANCE_MESSAGE) {\n        messageElement.innerHTML = self.escapeHtml(data.MAINTENANCE_MESSAGE);\n        return;\n      }\n\n      if (!data.MAINTENANCE_WINDOW || !data.MAINTENANCE_WINDOW.length) {\n        return;\n      } //use maintenance window specified in config to compose the message, assuming in following example format: [\"2018-11-02T12:00:00Z\", \"2018-11-02T18:00:00Z\"], dates in system ISO format\n\n\n      var hoursDiff = function hoursDiff(d1, d2) {\n        if (!d1 || !d2) {\n          return 0;\n        }\n\n        return Math.floor((d2.getTime() - d1.getTime()) / (1000 * 60 * 60) % 24);\n      }; //date object automatically convert iso date/time to local date/time as it assumes a timezone of UTC if date in ISO format\n\n\n      var startDate = new Date(data.MAINTENANCE_WINDOW[0]),\n          endDate = new Date(data.MAINTENANCE_WINDOW[1]);\n      var hoursTil = hoursDiff(new Date(), startDate);\n\n      if (hoursTil < 0 || isNaN(hoursTil)) {\n        //maintenance window has passed\n        document.getElementById(systemMaintenanceElId).classList.add(\"tnth-hide\");\n        return;\n      }\n      /*global i18next */\n      //construct message based on maintenance window\n\n\n      try {\n        var options = {\n          year: \"numeric\",\n          month: \"long\",\n          day: \"numeric\",\n          hour: \"numeric\",\n          minute: \"numeric\",\n          second: \"numeric\",\n          hour12: true,\n          timeZoneName: \"short\"\n        };\n        var displayStartDate = startDate.toLocaleString(locale, options).replace(/[,]/g, \" \"); //display language-sensitive representation of date/time\n\n        var displayEndDate = endDate.toLocaleString(locale, options).replace(/[,]/g, \" \");\n        var message = [\"<div>\" + i18next.t(\"Hi there.\") + \"</div>\", \"<div>\" + i18next.t(\"TrueNTH will be down for website maintenance starting <b>{startdate}</b>. This should last until <b>{enddate}</b>.\".replace(\"{startdate}\", displayStartDate).replace(\"{enddate}\", displayEndDate)) + \"</div>\", \"<div>\" + i18next.t(\"Thanks for your patience while we upgrade our site.\") + \"</div>\"].join(\"\");\n        messageElement.innerHTML = self.escapeHtml(message);\n      } catch (e) {\n        console.log(\"Error occurred converting system outage date/time \", e);\n        /*eslint no-console:off */\n\n        document.getElementById(systemMaintenanceElId).classList.add(\"tnth-hide\");\n      }\n    });\n  };\n\n  return new UtilityObj();\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Utility);\nvar getExportFileName = Utility.getExportFileName;\n/* expose common functions */\n\nvar getUrlParameter = Utility.getUrlParameter;\n\n//# sourceURL=webpack:///./static/js/src/modules/Utility.js?");

/***/ })

/******/ });
//# sourceMappingURL=../../maps/gil.bundle.js.map